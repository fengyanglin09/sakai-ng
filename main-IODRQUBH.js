import"./chunk-X6YHEMIY.js";import{b as tl,c as ol,d as rl,e as nl,f as Xi,g as Zi,h as Cr,i as ea,j as cl,k as dl,l as ll,m as ul,n as je,oa as hl,qa as fl,ra as ml}from"./chunk-2SX6STAI.js";import{$ as Bs,A as zi,Aa as le,Ac as il,Ba as Re,Bb as pt,Bc as al,Ca as Yd,Cb as Vi,Dc as $s,Ea as Qd,Ec as js,Fa as Hs,Fc as sl,Ha as Gi,I as pr,Ib as Zd,Jb as el,L as zd,Ma as pe,N as mt,Na as Fs,O as Ms,Q as go,S as he,Sa as Ht,T as Ns,W as Gd,Za as Ks,_a as Q,_b as Co,aa as Ds,ab as Jd,ac as Vs,cb as Xd,ea as qd,f as mo,fa as Wd,fc as $i,g as Hd,h as Fd,hb as Y,ia as Ls,ib as J,j as Kd,jb as H,k as Me,kb as qi,kc as ji,l as Ve,la as Us,lb as Wi,mc as Yi,nb as zs,nc as Qi,oc as Ji,p as Ps,pb as gr,qa as Vd,qb as $e,sa as $d,sc as gt,vb as Gs,w as po,wa as jd,wb as qs,x as xs,xb as Ws,y as Os}from"./chunk-HFGQLCCG.js";import{a as C,b as A,c as ft,d as Ee,e as _s,f as l}from"./chunk-ZY7WU73K.js";var Mf="@",Nf=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=Ns(Wd,{optional:!0});loadingSchedulerFn=Ns(Bf,{optional:!0});_engine;constructor(t,o,r,i,a){this.doc=t,this.delegate=o,this.zone=r,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-NRY5G47D.js").then(r=>r),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(t):o=t(),o.catch(r=>{throw new zd(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,o){let r=this.delegate.createRenderer(t,o);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new Ys(r);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(t,o);i.use(s),this.scheduler?.notify(11)}).catch(a=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(o){Yd()};static \u0275prov=mt({token:n,factory:n.\u0275fac})}return n})(),Ys=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,o,r){this.delegate.insertBefore(e,t,o,r)}removeChild(e,t,o){this.delegate.removeChild(e,t,o)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,o,r){this.delegate.setAttribute(e,t,o,r)}removeAttribute(e,t,o){this.delegate.removeAttribute(e,t,o)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,o,r){this.delegate.setStyle(e,t,o,r)}removeStyle(e,t,o){this.delegate.removeStyle(e,t,o)}setProperty(e,t,o){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,o)),this.delegate.setProperty(e,t,o)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,o){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,o)),this.delegate.listen(e,t,o)}shouldReplay(e){return this.replay!==null&&e.startsWith(Mf)}},Bf=new go("");function pl(n="animations"){return $d("NgAsyncAnimations"),Gd([{provide:Qd,useFactory:(e,t,o)=>new Nf(e,t,o,n),deps:[$i,rl,Ls]},{provide:Vd,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var gl={root:{transitionDuration:"{transition.duration}"},panel:{borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},header:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},content:{borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"}};var Cl={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}}};var yl={root:{width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},icon:{size:"1rem"},group:{borderColor:"{content.background}",offset:"-0.75rem"},lg:{width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xl:{width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}}};var vl={root:{borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},dot:{size:"0.5rem"},sm:{fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},lg:{fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},xl:{fontSize:"1rem",minWidth:"2rem",height:"2rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}};var bl={primitive:{borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},semantic:{transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}}};var kl={root:{borderRadius:"{content.border.radius}"}};var Al={root:{padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},item:{color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},separator:{color:"{navigation.item.icon.color}"}};var Tl={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},colorScheme:{light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}}};var El={root:{background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},body:{padding:"1.25rem",gap:"0.5rem"},caption:{gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"500"},subtitle:{color:"{text.muted.color}"}};var wl={root:{transitionDuration:"{transition.duration}"},content:{gap:"0.25rem"},indicatorList:{padding:"1rem",gap:"0.5rem"},indicator:{width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}}};var Il={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},clearIcon:{color:"{form.field.icon.color}"}};var Sl={root:{borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}}};var Rl={root:{borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},image:{width:"2rem",height:"2rem"},icon:{size:"1rem"},removeIcon:{size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},colorScheme:{light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}}};var _l={root:{transitionDuration:"{transition.duration}"},preview:{width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},panel:{shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},colorScheme:{light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}}};var Pl={icon:{size:"2rem",color:"{overlay.modal.color}"},content:{gap:"1rem"}};var xl={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"1rem"},icon:{size:"1.5rem",color:"{overlay.popover.color}"},footer:{gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"}};var Ol={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}};var Ml={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{datatable.border.color}",padding:"0.75rem 1rem"},footerCell:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},dropPoint:{color:"{primary.color}"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},rowToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},filter:{inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},paginatorTop:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}};var Nl={root:{borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},header:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},content:{background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},footer:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"}};var Bl={root:{transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},header:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},title:{gap:"0.5rem",fontWeight:"500"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},inputIcon:{color:"{form.field.icon.color}"},selectMonth:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},selectYear:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},group:{borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},dayView:{margin:"0.5rem 0 0 0"},weekDay:{padding:"0.25rem",fontWeight:"500",color:"{content.color}"},date:{hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},monthView:{margin:"0.5rem 0 0 0"},month:{padding:"0.375rem",borderRadius:"{content.border.radius}"},yearView:{margin:"0.5rem 0 0 0"},year:{padding:"0.375rem",borderRadius:"{content.border.radius}"},buttonbar:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},timePicker:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},colorScheme:{light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}}};var Dl={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}",gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"}};var Ll={root:{borderColor:"{content.border.color}"},content:{background:"{content.background}",color:"{text.color}"},horizontal:{margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},vertical:{margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}}};var Ul={root:{background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},item:{borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var Hl={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}"},title:{fontSize:"1.5rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"{overlay.modal.padding}"}};var Fl={toolbar:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},toolbarItem:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},overlayOption:{focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},content:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"}};var Kl={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},legend:{background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},content:{padding:"0"}};var zl={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},content:{highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},file:{padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fileList:{gap:"0.5rem"},progressbar:{height:"0.25rem"},basic:{gap:"0.5rem"}};var Gl={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},over:{active:{top:"-1.25rem"}},in:{input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},on:{borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}}};var ql={root:{borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},navButton:{background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},navIcon:{size:"1.5rem"},thumbnailsContent:{background:"{content.background}",padding:"1rem 0.25rem"},thumbnailNavButton:{size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},thumbnailNavButtonIcon:{size:"1rem"},caption:{background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},indicatorList:{gap:"0.5rem",padding:"1rem"},indicatorButton:{width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},insetIndicatorList:{background:"rgba(0, 0, 0, 0.5)"},insetIndicatorButton:{background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},closeButton:{size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},closeButtonIcon:{size:"1.5rem"},colorScheme:{light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}}};var Wl={icon:{color:"{form.field.icon.color}"}};var Vl={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"}};var $l={root:{transitionDuration:"{transition.duration}"},preview:{icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},toolbar:{position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},action:{hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var jl={handle:{size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var Yl={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},text:{fontWeight:"500"},icon:{size:"1rem"},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}}};var Ql={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},display:{hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"}};var Jl={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},chip:{borderRadius:"{border.radius.sm}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}}};var Xl={addon:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"}};var Zl={root:{transitionDuration:"{transition.duration}"},button:{width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},colorScheme:{light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}}};var eu={root:{gap:"0.5rem"},input:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}}};var tu={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}};var ou={root:{transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},value:{background:"{primary.color}"},range:{background:"{content.border.color}"},text:{color:"{text.muted.color}"}};var ru={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}}};var nu={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},overlay:{padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var iu={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},separator:{borderColor:"{content.border.color}"}};var au={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var su={root:{borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},content:{padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},text:{fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},icon:{size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},outlined:{root:{borderWidth:"1px"}},simple:{content:{padding:"0"}},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}}};var cu={root:{borderRadius:"{content.border.radius}",gap:"1rem"},meters:{background:"{content.border.color}",size:"0.5rem"},label:{gap:"0.5rem"},labelMarker:{size:"0.5rem"},labelIcon:{size:"1rem"},labelList:{verticalGap:"0.5rem",horizontalGap:"1rem"}};var du={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"}};var lu={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}};var uu={root:{gutter:"0.75rem",transitionDuration:"{transition.duration}"},node:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},nodeToggleButton:{background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},connector:{color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"}};var hu={root:{outline:{width:"2px",color:"{content.background}"}}};var fu={root:{padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},navButton:{background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},currentPageReport:{color:"{text.muted.color}"},jumpToPageInput:{maxWidth:"2.5rem"}};var mu={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},toggleableHeader:{padding:"0.375rem 1.125rem"},title:{fontWeight:"600"},content:{padding:"0 1.125rem 1.125rem 1.125rem"},footer:{padding:"0 1.125rem 1.125rem 1.125rem"}};var pu={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenu:{indent:"1rem"},submenuIcon:{color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"}};var gu={meter:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},icon:{color:"{form.field.icon.color}"},overlay:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},content:{gap:"0.5rem"},colorScheme:{light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}}};var Cu={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}};var yu={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}"}};var vu={root:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},value:{background:"{primary.color}"},label:{color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"}};var bu={colorScheme:{light:{root:{"color.1":"{red.500}","color.2":"{blue.500}","color.3":"{green.500}","color.4":"{yellow.500}"}},dark:{root:{"color.1":"{red.400}","color.2":"{blue.400}","color.3":"{green.400}","color.4":"{yellow.400}"}}}};var ku={root:{width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}}};var Au={root:{gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},icon:{size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}};var Tu={colorScheme:{light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}}};var Eu={root:{transitionDuration:"{transition.duration}"},bar:{size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}}};var wu={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"}};var Iu={root:{borderRadius:"{form.field.border.radius}"},colorScheme:{light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}}};var Su={root:{borderRadius:"{content.border.radius}"},colorScheme:{light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}}};var Ru={root:{transitionDuration:"{transition.duration}"},track:{background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},range:{background:"{primary.color}"},handle:{width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{handle:{contentBackground:"{surface.0}"}},dark:{handle:{contentBackground:"{surface.950}"}}}};var _u={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"}};var Pu={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}};var xu={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},gutter:{background:"{content.border.color}"},handle:{size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}};var Ou={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},step:{padding:"0.5rem",gap:"1rem"},stepHeader:{padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},stepTitle:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},stepNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},steppanels:{padding:"0.875rem 0.5rem 1.125rem 0.5rem"},steppanel:{background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"}};var Mu={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}"},itemLink:{borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},itemLabel:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},itemNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}};var Nu={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},item:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},itemIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"}};var Bu={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},tab:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},tabpanel:{background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}};var Du={root:{transitionDuration:"{transition.duration}"},tabList:{background:"{content.background}",borderColor:"{content.border.color}"},tab:{borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},tabPanel:{background:"{content.background}",color:"{content.color}"},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}};var Lu={root:{fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},icon:{size:"0.75rem"},colorScheme:{light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}};var Uu={root:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},prompt:{gap:"0.25rem"},commandResponse:{margin:"2px 0"}};var Hu={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}};var Fu={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}};var Ku={event:{minHeight:"5rem"},horizontal:{eventContent:{padding:"1rem 0"}},vertical:{eventContent:{padding:"0 1rem"}},eventMarker:{size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},eventConnector:{color:"{content.border.color}",size:"2px"}};var zu={root:{width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},icon:{size:"1.125rem"},content:{padding:"{overlay.popover.padding}",gap:"0.5rem"},text:{gap:"0.5rem"},summary:{fontWeight:"500",fontSize:"1rem"},detail:{fontWeight:"500",fontSize:"0.875rem"},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem"},colorScheme:{light:{blur:"1.5px",info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{blur:"10px",info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}}};var Gu={root:{padding:"0.5rem 1rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.375rem 0.75rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.625rem 1.25rem"}},icon:{disabledColor:"{form.field.disabled.color}"},content:{left:"0.25rem",top:"0.25rem",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)"},colorScheme:{light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}}};var qu={root:{width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},handle:{borderRadius:"50%",size:"1rem"},colorScheme:{light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}}};var Wu={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"}};var Vu={root:{maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},colorScheme:{light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}}};var $u={root:{background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},node:{padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},nodeIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},nodeToggleButton:{borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},loadingIcon:{size:"2rem"},filter:{margin:"0 0 0.5rem 0"}};var ju={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},tree:{padding:"{list.padding}"},clearIcon:{color:"{form.field.icon.color}"},emptyMessage:{padding:"{list.option.padding}"},chip:{borderRadius:"{border.radius.sm}"}};var Yu={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},footerCell:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},nodeToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}};var Qu={loader:{mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}}};var Ju=A(C({},bl),{components:{accordion:gl,autocomplete:Cl,avatar:yl,badge:vl,blockui:kl,breadcrumb:Al,button:Tl,datepicker:Bl,card:El,carousel:wl,cascadeselect:Il,checkbox:Sl,chip:Rl,colorpicker:_l,confirmdialog:Pl,confirmpopup:xl,contextmenu:Ol,dataview:Nl,datatable:Ml,dialog:Dl,divider:Ll,dock:Ul,drawer:Hl,editor:Fl,fieldset:Kl,fileupload:zl,iftalabel:Vl,floatlabel:Gl,galleria:ql,iconfield:Wl,image:$l,imagecompare:jl,inlinemessage:Yl,inplace:Ql,inputchips:Jl,inputgroup:Xl,inputnumber:Zl,inputotp:eu,inputtext:tu,knob:ou,listbox:ru,megamenu:nu,menu:iu,menubar:au,message:su,metergroup:cu,multiselect:du,orderlist:lu,organizationchart:uu,overlaybadge:hu,popover:yu,paginator:fu,password:gu,panel:mu,panelmenu:pu,picklist:Cu,progressbar:vu,progressspinner:bu,radiobutton:ku,rating:Au,scrollpanel:Eu,select:wu,selectbutton:Iu,skeleton:Su,slider:Ru,speeddial:_u,splitter:xu,splitbutton:Pu,stepper:Ou,steps:Mu,tabmenu:Nu,tabs:Bu,tabview:Du,textarea:Hu,tieredmenu:Fu,tag:Lu,terminal:Uu,timeline:Ku,togglebutton:Gu,toggleswitch:qu,tree:$u,treeselect:ju,treetable:Yu,toast:zu,toolbar:Wu,virtualscroller:Qu,tooltip:Vu,ripple:Tu}});var Xu=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=Fs({type:n});static \u0275inj=Ms({})}return n})();var Qe=class n{_config={preset:"Aura",primary:"emerald",surface:null,darkTheme:!1,menuMode:"static"};_state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1};layoutConfig=Gi(this._config);layoutState=Gi(this._state);configUpdate=new mo;overlayOpen=new mo;menuSource=new mo;resetSource=new mo;menuSource$=this.menuSource.asObservable();resetSource$=this.resetSource.asObservable();configUpdate$=this.configUpdate.asObservable();overlayOpen$=this.overlayOpen.asObservable();theme=Co(()=>this.layoutConfig()?.darkTheme?"light":"dark");isSidebarActive=Co(()=>this.layoutState().overlayMenuActive||this.layoutState().staticMenuMobileActive);isDarkTheme=Co(()=>this.layoutConfig().darkTheme);getPrimary=Co(()=>this.layoutConfig().primary);getSurface=Co(()=>this.layoutConfig().surface);isOverlay=Co(()=>this.layoutConfig().menuMode==="overlay");transitionComplete=Gi(!1);initialized=!1;constructor(){Vs(()=>{this.layoutConfig()&&this.onConfigUpdate()}),Vs(()=>{let e=this.layoutConfig();if(!this.initialized||!e){this.initialized=!0;return}this.handleDarkModeTransition(e)})}handleDarkModeTransition(e){document.startViewTransition?this.startViewTransition(e):(this.toggleDarkMode(e),this.onTransitionEnd())}startViewTransition(e){document.startViewTransition(()=>{this.toggleDarkMode(e)}).ready.then(()=>{this.onTransitionEnd()}).catch(()=>{})}toggleDarkMode(e){(e||this.layoutConfig()).darkTheme?document.documentElement.classList.add("app-dark"):document.documentElement.classList.remove("app-dark")}onTransitionEnd(){this.transitionComplete.set(!0),setTimeout(()=>{this.transitionComplete.set(!1)})}onMenuToggle(){this.isOverlay()&&(this.layoutState.update(e=>A(C({},e),{overlayMenuActive:!this.layoutState().overlayMenuActive})),this.layoutState().overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.layoutState.update(e=>A(C({},e),{staticMenuDesktopInactive:!this.layoutState().staticMenuDesktopInactive})):(this.layoutState.update(e=>A(C({},e),{staticMenuMobileActive:!this.layoutState().staticMenuMobileActive})),this.layoutState().staticMenuMobileActive&&this.overlayOpen.next(null))}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this._config=C({},this.layoutConfig()),this.configUpdate.next(this.layoutConfig())}onMenuStateChange(e){this.menuSource.next(e)}reset(){this.resetSource.next(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=mt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Tn=class n{constructor(e){this.layoutService=e}items;toggleDarkMode(){this.layoutService.layoutConfig.update(e=>A(C({},e),{darkTheme:!e.darkTheme}))}static \u0275fac=function(t){return new(t||n)(Re(Qe))};static \u0275cmp=pe({type:n,selectors:[["app-topbar"]],decls:15,vars:0,consts:[[1,"layout-topbar"],[1,"layout-topbar-logo-container"],[1,"layout-menu-button","layout-topbar-action",3,"click"],[1,"pi","pi-bars"],["routerLink","/",1,"layout-topbar-logo"],["src","assets/app/mayo-logo.png","alt","mayo specialty app & analytics",1,"pr-1",2,"height","1.5em","width","auto"],[1,"layout-topbar-actions"],[1,"layout-topbar-menu","hidden","lg:block"],[1,"layout-topbar-menu-content"],["type","button",1,"layout-topbar-action"],[1,"pi","pi-user"]],template:function(t,o){t&1&&(Y(0,"div",0)(1,"div",1)(2,"button",2),gr("click",function(){return o.layoutService.onMenuToggle()}),H(3,"i",3),J(),Y(4,"a",4),H(5,"img",5),Y(6,"span"),pt(7,"SPAA Dashbaord"),J()()(),Y(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),H(12,"i",10),Y(13,"span"),pt(14,"Profile"),J()()()()()())},dependencies:[je,ea,gt,Xu],encapsulation:2})};var Df=["app-menuitem",""],Lf=()=>({paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"});function Uf(n,e){if(n&1&&(Y(0,"div",4),pt(1),J()),n&2){let t=$e();le(),Vi(t.item.label)}}function Hf(n,e){n&1&&H(0,"i",9)}function Ff(n,e){if(n&1){let t=zs();Y(0,"a",5),gr("click",function(r){Bs(t);let i=$e();return Ds(i.itemClick(r))}),H(1,"i",6),Y(2,"span",7),pt(3),J(),Ht(4,Hf,1,0,"i",8),J()}if(n&2){let t=$e();Q("ngClass",t.item.styleClass),Ks("href",t.item.url,jd)("target",t.item.target),le(),Q("ngClass",t.item.icon),le(2),Vi(t.item.label),le(),Q("ngIf",t.item.items)}}function Kf(n,e){n&1&&H(0,"i",9)}function zf(n,e){if(n&1){let t=zs();Y(0,"a",10),gr("click",function(r){Bs(t);let i=$e();return Ds(i.itemClick(r))}),H(1,"i",6),Y(2,"span",7),pt(3),J(),Ht(4,Kf,1,0,"i",8),J()}if(n&2){let t=$e();Q("ngClass",t.item.styleClass)("routerLink",t.item.routerLink)("routerLinkActiveOptions",t.item.routerLinkActiveOptions||el(14,Lf))("fragment",t.item.fragment)("queryParamsHandling",t.item.queryParamsHandling)("preserveFragment",t.item.preserveFragment)("skipLocationChange",t.item.skipLocationChange)("replaceUrl",t.item.replaceUrl)("state",t.item.state)("queryParams",t.item.queryParams),Ks("target",t.item.target),le(),Q("ngClass",t.item.icon),le(2),Vi(t.item.label),le(),Q("ngIf",t.item.items)}}function Gf(n,e){if(n&1&&H(0,"li",12),n&2){let t=e.$implicit,o=e.index,r=$e(2);Xd(t.badgeClass),Q("item",t)("index",o)("parentKey",r.key)}}function qf(n,e){if(n&1&&(Y(0,"ul"),Ht(1,Gf,1,5,"ng-template",11),J()),n&2){let t=$e();Q("@children",t.submenuAnimation),le(),Q("ngForOf",t.item.items)}}var oa=class n{constructor(e,t){this.router=e;this.layoutService=t;this.menuSourceSubscription=this.layoutService.menuSource$.subscribe(o=>{Promise.resolve(null).then(()=>{o.routeEvent?this.active=!!(o.key===this.key||o.key.startsWith(this.key+"-")):o.key!==this.key&&!o.key.startsWith(this.key+"-")&&(this.active=!1)})}),this.menuResetSubscription=this.layoutService.resetSource$.subscribe(()=>{this.active=!1}),this.router.events.pipe(po(o=>o instanceof Xi)).subscribe(o=>{this.item.routerLink&&this.updateActiveStateFromRoute()})}item;index;root;parentKey;active=!1;menuSourceSubscription;menuResetSubscription;key="";ngOnInit(){this.key=this.parentKey?this.parentKey+"-"+this.index:String(this.index),this.item.routerLink&&this.updateActiveStateFromRoute()}updateActiveStateFromRoute(){this.router.isActive(this.item.routerLink[0],{paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"})&&this.layoutService.onMenuStateChange({key:this.key,routeEvent:!0})}itemClick(e){if(this.item.disabled){e.preventDefault();return}this.item.command&&this.item.command({originalEvent:e,item:this.item}),this.item.items&&(this.active=!this.active),this.layoutService.onMenuStateChange({key:this.key})}get submenuAnimation(){return this.root||this.active?"expanded":"collapsed"}get activeClass(){return this.active&&!this.root}ngOnDestroy(){this.menuSourceSubscription&&this.menuSourceSubscription.unsubscribe(),this.menuResetSubscription&&this.menuResetSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||n)(Re(Cr),Re(Qe))};static \u0275cmp=pe({type:n,selectors:[["","app-menuitem",""]],hostVars:4,hostBindings:function(t,o){t&2&&Jd("layout-root-menuitem",o.root)("active-menuitem",o.activeClass)},inputs:{item:"item",index:"index",root:"root",parentKey:"parentKey"},features:[Zd([Qe])],attrs:Df,decls:5,vars:4,consts:[["class","layout-menuitem-root-text",4,"ngIf"],["tabindex","0","pRipple","",3,"ngClass","click",4,"ngIf"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams","click",4,"ngIf"],[4,"ngIf"],[1,"layout-menuitem-root-text"],["tabindex","0","pRipple","",3,"click","ngClass"],[1,"layout-menuitem-icon",3,"ngClass"],[1,"layout-menuitem-text"],["class","pi pi-fw pi-angle-down layout-submenu-toggler",4,"ngIf"],[1,"pi","pi-fw","pi-angle-down","layout-submenu-toggler"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"click","ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams"],["ngFor","",3,"ngForOf"],["app-menuitem","",3,"item","index","parentKey"]],template:function(t,o){t&1&&(qi(0),Ht(1,Uf,2,1,"div",0)(2,Ff,5,6,"a",1)(3,zf,5,15,"a",2)(4,qf,2,2,"ul",3),Wi()),t&2&&(le(),Q("ngIf",o.root&&o.item.visible!==!1),le(),Q("ngIf",(!o.item.routerLink||o.item.items)&&o.item.visible!==!1),le(),Q("ngIf",o.item.routerLink&&!o.item.items&&o.item.visible!==!1),le(),Q("ngIf",o.item.items&&o.item.visible!==!1))},dependencies:[n,gt,Yi,Qi,Ji,je,ea,cl,ml,fl],encapsulation:2,data:{animation:[il("children",[js("collapsed",$s({height:"0"})),js("expanded",$s({height:"*"})),sl("collapsed <=> expanded",al("400ms cubic-bezier(0.86, 0, 0.07, 1)"))])]}})};function Wf(n,e){if(n&1&&H(0,"li",4),n&2){let t=$e(),o=t.$implicit,r=t.index;Q("item",o)("index",r)("root",!0)}}function Vf(n,e){n&1&&H(0,"li",5)}function $f(n,e){if(n&1&&(qi(0),Ht(1,Wf,1,3,"li",2)(2,Vf,1,0,"li",3),Wi()),n&2){let t=e.$implicit;le(),Q("ngIf",!t.separator),le(),Q("ngIf",t.separator)}}var ra=class n{model=[];ngOnInit(){this.model=[{label:"SPAA Unit",items:[{label:"Specialty Apps",icon:"fa fa-laptop",routerLink:["/pages/specialty-app-dashboard"]},{label:"Analytics reports",icon:"pi pi-chart-bar",routerLink:["/pages/analytics-report-dashboard"]}]},{label:"GES Unit",items:[{label:"CAD Apps",icon:"fa fa-desktop",routerLink:["/pages/cad-app-dashboard"]}]},{label:"Mayo Resources",items:[{label:"Development",icon:"fa fa-tools",routerLink:["/pages/development-resource-dashboard"]},{label:"Support",icon:"fa fa-headset",routerLink:["/pages/support-resource-dashboard"]},{label:"Access & Accounts",icon:"fa fa-user-shield",routerLink:["/pages/access-accounts-resource-dashboard"]}]}]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pe({type:n,selectors:[["app-menu"]],decls:2,vars:1,consts:[[1,"layout-menu"],[4,"ngFor","ngForOf"],["app-menuitem","",3,"item","index","root",4,"ngIf"],["class","menu-separator",4,"ngIf"],["app-menuitem","",3,"item","index","root"],[1,"menu-separator"]],template:function(t,o){t&1&&(Y(0,"ul",0),Ht(1,$f,3,2,"ng-container",1),J()),t&2&&(le(),Q("ngForOf",o.model))},dependencies:[gt,Qi,Ji,oa,je],encapsulation:2})};var En=class n{constructor(e){this.el=e}static \u0275fac=function(t){return new(t||n)(Re(Us))};static \u0275cmp=pe({type:n,selectors:[["app-sidebar"]],decls:2,vars:0,consts:[[1,"layout-sidebar"]],template:function(t,o){t&1&&(Y(0,"div",0),H(1,"app-menu"),J())},dependencies:[ra],encapsulation:2})};var na=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pe({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"layout-footer"],["src","assets/app/mayo-footer.png","alt","Footer Logo",2,"height","1.8em","width","auto"]],template:function(t,o){t&1&&(Y(0,"div",0),H(1,"img",1),pt(2," Mayo Foundation for Medical Education and Research \xA9 2025. All rights reserved. "),J())},encapsulation:2})};var ia=class n{constructor(e,t,o){this.layoutService=e;this.renderer=t;this.router=o;this.overlayMenuOpenSubscription=this.layoutService.overlayOpen$.subscribe(()=>{this.menuOutsideClickListener||(this.menuOutsideClickListener=this.renderer.listen("document","click",r=>{this.isOutsideClicked(r)&&this.hideMenu()})),this.layoutService.layoutState().staticMenuMobileActive&&this.blockBodyScroll()}),this.router.events.pipe(po(r=>r instanceof Xi)).subscribe(()=>{this.hideMenu()})}overlayMenuOpenSubscription;menuOutsideClickListener;appSidebar;appTopBar;isOutsideClicked(e){let t=document.querySelector(".layout-sidebar"),o=document.querySelector(".layout-menu-button"),r=e.target;return!(t?.isSameNode(r)||t?.contains(r)||o?.isSameNode(r)||o?.contains(r))}hideMenu(){this.layoutService.layoutState.update(e=>A(C({},e),{overlayMenuActive:!1,staticMenuMobileActive:!1,menuHoverActive:!1})),this.menuOutsideClickListener&&(this.menuOutsideClickListener(),this.menuOutsideClickListener=null),this.unblockBodyScroll()}blockBodyScroll(){document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"}unblockBodyScroll(){document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")}get containerClass(){return{"layout-overlay":this.layoutService.layoutConfig().menuMode==="overlay","layout-static":this.layoutService.layoutConfig().menuMode==="static","layout-static-inactive":this.layoutService.layoutState().staticMenuDesktopInactive&&this.layoutService.layoutConfig().menuMode==="static","layout-overlay-active":this.layoutService.layoutState().overlayMenuActive,"layout-mobile-active":this.layoutService.layoutState().staticMenuMobileActive}}ngOnDestroy(){this.overlayMenuOpenSubscription&&this.overlayMenuOpenSubscription.unsubscribe(),this.menuOutsideClickListener&&this.menuOutsideClickListener()}static \u0275fac=function(t){return new(t||n)(Re(Qe),Re(Hs),Re(Cr))};static \u0275cmp=pe({type:n,selectors:[["app-layout"]],viewQuery:function(t,o){if(t&1&&(Gs(En,5),Gs(Tn,5)),t&2){let r;qs(r=Ws())&&(o.appSidebar=r.first),qs(r=Ws())&&(o.appTopBar=r.first)}},decls:8,vars:1,consts:[[1,"layout-wrapper",3,"ngClass"],[1,"layout-main-container"],[1,"layout-main"],[1,"layout-mask","animate-fadein"]],template:function(t,o){t&1&&(Y(0,"div",0),H(1,"app-topbar")(2,"app-sidebar"),Y(3,"div",1)(4,"div",2),H(5,"router-outlet"),J(),H(6,"app-footer"),J(),H(7,"div",3),J()),t&2&&Q("ngClass",o.containerClass)},dependencies:[gt,Yi,Tn,En,je,Zi,na],encapsulation:2})};var Ja={};Ee(Ja,{addClientCapabilitiesToClaims:()=>tp,blockAPICallsBeforeInitialize:()=>Ya,blockAcquireTokenInPopups:()=>Kh,blockNonBrowserEnvironment:()=>ja,blockRedirectInIframe:()=>Fh,blockReloadInHiddenIframes:()=>Hh,clearHash:()=>Oi,createGuid:()=>_d,getCurrentUri:()=>Ae,getHomepage:()=>Rd,invoke:()=>q,invokeAsync:()=>f,isInIframe:()=>Mi,isInPopup:()=>Uh,preconnect:()=>Bi,preflightCheck:()=>Ni,redirectPreflightCheck:()=>Qa,replaceHash:()=>Sd});var m={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},He={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Ne={GET:"GET",POST:"POST"},_e=[m.OPENID_SCOPE,m.PROFILE_SCOPE,m.OFFLINE_ACCESS_SCOPE],Xs=[..._e,m.EMAIL_SCOPE],X={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},aa={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Fe={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},vr={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},z={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};var wn={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Je={QUERY:"query",FRAGMENT:"fragment"},Zs={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},In={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},br={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ct={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Z={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var Sn="appmetadata",Zu="client_info",yo="1",kr={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ge={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ie={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},_={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},yt={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},sa={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ca={username:"username",password:"password"},vo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},da={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Xe={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},la={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var Rn=300;var Ft={};Ee(Ft,{postRequestFailed:()=>Pn,unexpectedError:()=>_n});var _n="unexpected_error",Pn="post_request_failed";var ua={[_n]:"Unexpected error in authentication.",[Pn]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},eh={unexpectedError:{code:_n,desc:ua[_n]},postRequestFailed:{code:Pn,desc:ua[Pn]}},E=class n extends Error{constructor(e,t,o){let r=t?`${e}: ${t}`:e;super(r),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||m.EMPTY_STRING,this.errorMessage=t||m.EMPTY_STRING,this.subError=o||m.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Ar(n,e){return new E(n,e?`${ua[n]} ${e}`:ua[n])}var ae={};Ee(ae,{authTimeNotFound:()=>vt,authorizationCodeMissingFromServerResponse:()=>No,bindingKeyNotRemoved:()=>Kn,cannotAppendScopeSet:()=>xo,cannotRemoveEmptyScope:()=>Po,clientInfoDecodingError:()=>Kt,clientInfoEmptyError:()=>bo,deviceCodeExpired:()=>Nn,deviceCodePollingCancelled:()=>Mn,deviceCodeUnknownError:()=>Bn,emptyInputScopeSet:()=>qt,endSessionEndpointNotSupported:()=>Bo,endpointResolutionError:()=>Ce,hashNotDeserialized:()=>Eo,invalidAssertion:()=>Un,invalidCacheEnvironment:()=>kt,invalidCacheRecord:()=>Oo,invalidClientCredential:()=>Hn,invalidState:()=>Ke,keyIdMissing:()=>Do,maxAgeTranspired:()=>So,methodNotImplemented:()=>S,missingTenantIdError:()=>qn,multipleMatchingAccounts:()=>On,multipleMatchingAppMetadata:()=>Ro,multipleMatchingTokens:()=>xn,nestedAppAuthBridgeDisabled:()=>Wn,networkError:()=>Ao,noAccountFound:()=>Dn,noAccountInSilentRequest:()=>bt,noCryptoObject:()=>Wt,noNetworkConnectivity:()=>zn,nonceMismatch:()=>Io,nullOrEmptyToken:()=>ko,openIdConfigError:()=>To,requestCannotBeMade:()=>_o,stateMismatch:()=>wo,stateNotFound:()=>Gt,tokenClaimsCnfRequiredForSignedJwt:()=>Mo,tokenParsingError:()=>zt,tokenRefreshRequired:()=>At,unexpectedCredentialType:()=>Ln,userCanceled:()=>Gn,userTimeoutReached:()=>Fn});var Kt="client_info_decoding_error",bo="client_info_empty_error",zt="token_parsing_error",ko="null_or_empty_token",Ce="endpoints_resolution_error",Ao="network_error",To="openid_config_error",Eo="hash_not_deserialized",Ke="invalid_state",wo="state_mismatch",Gt="state_not_found",Io="nonce_mismatch",vt="auth_time_not_found",So="max_age_transpired",xn="multiple_matching_tokens",On="multiple_matching_accounts",Ro="multiple_matching_appMetadata",_o="request_cannot_be_made",Po="cannot_remove_empty_scope",xo="cannot_append_scopeset",qt="empty_input_scopeset",Mn="device_code_polling_cancelled",Nn="device_code_expired",Bn="device_code_unknown_error",bt="no_account_in_silent_request",Oo="invalid_cache_record",kt="invalid_cache_environment",Dn="no_account_found",Wt="no_crypto_object",Ln="unexpected_credential_type",Un="invalid_assertion",Hn="invalid_client_credential",At="token_refresh_required",Fn="user_timeout_reached",Mo="token_claims_cnf_required_for_signedjwt",No="authorization_code_missing_from_server_response",Kn="binding_key_not_removed",Bo="end_session_endpoint_not_supported",Do="key_id_missing",zn="no_network_connectivity",Gn="user_canceled",qn="missing_tenant_id_error",S="method_not_implemented",Wn="nested_app_auth_bridge_disabled";var I={[Kt]:"The client info could not be parsed/decoded correctly",[bo]:"The client info was empty",[zt]:"Token cannot be parsed",[ko]:"The token is null or empty",[Ce]:"Endpoints cannot be resolved",[Ao]:"Network request failed",[To]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Eo]:"The hash parameters could not be deserialized",[Ke]:"State was not the expected format",[wo]:"State mismatch error",[Gt]:"State not found",[Io]:"Nonce mismatch error",[vt]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[So]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[xn]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[On]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ro]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[_o]:"Token request cannot be made without authorization code or refresh token.",[Po]:"Cannot remove null or empty scope from ScopeSet",[xo]:"Cannot append ScopeSet",[qt]:"Empty input ScopeSet cannot be processed",[Mn]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Nn]:"Device code is expired.",[Bn]:"Device code stopped polling for unknown reasons.",[bt]:"Please pass an account object, silent flow is not supported without account information",[Oo]:"Cache record object was null or undefined.",[kt]:"Invalid environment when attempting to create cache entry",[Dn]:"No account found in cache for given key.",[Wt]:"No crypto object detected.",[Ln]:"Unexpected credential type.",[Un]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Hn]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[At]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Fn]:"User defined timeout for device code polling reached",[Mo]:"Cannot generate a POP jwt if the token_claims are not populated",[No]:"Server response does not contain an authorization code to proceed",[Kn]:"Could not remove the credential's binding key from storage.",[Bo]:"The provided authority does not support logout",[Do]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[zn]:"No network connectivity. Check your internet connection.",[Gn]:"User cancelled the flow.",[qn]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[S]:"This method has not been implemented",[Wn]:"The nested app auth bridge is disabled"},th={clientInfoDecodingError:{code:Kt,desc:I[Kt]},clientInfoEmptyError:{code:bo,desc:I[bo]},tokenParsingError:{code:zt,desc:I[zt]},nullOrEmptyToken:{code:ko,desc:I[ko]},endpointResolutionError:{code:Ce,desc:I[Ce]},networkError:{code:Ao,desc:I[Ao]},unableToGetOpenidConfigError:{code:To,desc:I[To]},hashNotDeserialized:{code:Eo,desc:I[Eo]},invalidStateError:{code:Ke,desc:I[Ke]},stateMismatchError:{code:wo,desc:I[wo]},stateNotFoundError:{code:Gt,desc:I[Gt]},nonceMismatchError:{code:Io,desc:I[Io]},authTimeNotFoundError:{code:vt,desc:I[vt]},maxAgeTranspired:{code:So,desc:I[So]},multipleMatchingTokens:{code:xn,desc:I[xn]},multipleMatchingAccounts:{code:On,desc:I[On]},multipleMatchingAppMetadata:{code:Ro,desc:I[Ro]},tokenRequestCannotBeMade:{code:_o,desc:I[_o]},removeEmptyScopeError:{code:Po,desc:I[Po]},appendScopeSetError:{code:xo,desc:I[xo]},emptyInputScopeSetError:{code:qt,desc:I[qt]},DeviceCodePollingCancelled:{code:Mn,desc:I[Mn]},DeviceCodeExpired:{code:Nn,desc:I[Nn]},DeviceCodeUnknownError:{code:Bn,desc:I[Bn]},NoAccountInSilentRequest:{code:bt,desc:I[bt]},invalidCacheRecord:{code:Oo,desc:I[Oo]},invalidCacheEnvironment:{code:kt,desc:I[kt]},noAccountFound:{code:Dn,desc:I[Dn]},noCryptoObj:{code:Wt,desc:I[Wt]},unexpectedCredentialType:{code:Ln,desc:I[Ln]},invalidAssertion:{code:Un,desc:I[Un]},invalidClientCredential:{code:Hn,desc:I[Hn]},tokenRefreshRequired:{code:At,desc:I[At]},userTimeoutReached:{code:Fn,desc:I[Fn]},tokenClaimsRequired:{code:Mo,desc:I[Mo]},noAuthorizationCodeFromServer:{code:No,desc:I[No]},bindingKeyNotRemovedError:{code:Kn,desc:I[Kn]},logoutNotSupported:{code:Bo,desc:I[Bo]},keyIdMissing:{code:Do,desc:I[Do]},noNetworkConnectivity:{code:zn,desc:I[zn]},userCanceledError:{code:Gn,desc:I[Gn]},missingTenantIdError:{code:qn,desc:I[qn]},nestedAppAuthBridgeDisabled:{code:Wn,desc:I[Wn]}},Vn=class n extends E{constructor(e,t){super(e,t?`${I[e]}: ${t}`:I[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function p(n,e){return new Vn(n,e)}var Vt={createNewGuid:()=>{throw p(S)},base64Decode:()=>{throw p(S)},base64Encode:()=>{throw p(S)},base64UrlEncode:()=>{throw p(S)},encodeKid:()=>{throw p(S)},getPublicKeyThumbprint(){return l(this,null,function*(){throw p(S)})},removeTokenBindingKey(){return l(this,null,function*(){throw p(S)})},clearKeystore(){return l(this,null,function*(){throw p(S)})},signJwt(){return l(this,null,function*(){throw p(S)})},hashString(){return l(this,null,function*(){throw p(S)})}};var N=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(N||{}),ye=class n{constructor(e,t,o){this.level=N.Info;let r=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||r,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:N.Info,this.correlationId=i.correlationId||m.EMPTY_STRING,this.packageName=t||m.EMPTY_STRING,this.packageVersion=o||m.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:N.Info}}clone(e,t,o){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:o||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${N[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,o){this.localCallback&&this.localCallback(e,t,o)}error(e,t){this.logMessage(e,{logLevel:N.Error,containsPii:!1,correlationId:t||m.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:N.Error,containsPii:!0,correlationId:t||m.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:N.Warning,containsPii:!1,correlationId:t||m.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:N.Warning,containsPii:!0,correlationId:t||m.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:N.Info,containsPii:!1,correlationId:t||m.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:N.Info,containsPii:!0,correlationId:t||m.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:N.Verbose,containsPii:!1,correlationId:t||m.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:N.Verbose,containsPii:!0,correlationId:t||m.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:N.Trace,containsPii:!1,correlationId:t||m.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:N.Trace,containsPii:!0,correlationId:t||m.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var ha="@azure/msal-common",Tr="15.13.1";var $t={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var ve={};Ee(ve,{authorityMismatch:()=>ei,authorityUriInsecure:()=>Uo,cannotAllowPlatformBroker:()=>Zn,cannotSetOIDCOptions:()=>Xn,claimsRequestParsingError:()=>$n,emptyInputScopesError:()=>Fo,invalidAuthenticationHeader:()=>Jn,invalidAuthorityMetadata:()=>qo,invalidAuthorizePostBodyParameters:()=>oi,invalidClaims:()=>jt,invalidCloudDiscoveryMetadata:()=>Yt,invalidCodeChallengeMethod:()=>jn,invalidRequestMethodForEAR:()=>ti,logoutRequestEmpty:()=>zo,missingNonceAuthenticationHeader:()=>Qn,missingSshJwk:()=>Tt,missingSshKid:()=>Yn,pkceParamsMissing:()=>Go,redirectUriEmpty:()=>Lo,tokenRequestEmpty:()=>Ko,untrustedAuthority:()=>Wo,urlEmptyError:()=>Ho,urlParseError:()=>Ze});var Lo="redirect_uri_empty",$n="claims_request_parsing_error",Uo="authority_uri_insecure",Ze="url_parse_error",Ho="empty_url_error",Fo="empty_input_scopes_error",jt="invalid_claims",Ko="token_request_empty",zo="logout_request_empty",jn="invalid_code_challenge_method",Go="pkce_params_missing",Yt="invalid_cloud_discovery_metadata",qo="invalid_authority_metadata",Wo="untrusted_authority",Tt="missing_ssh_jwk",Yn="missing_ssh_kid",Qn="missing_nonce_authentication_header",Jn="invalid_authentication_header",Xn="cannot_set_OIDCOptions",Zn="cannot_allow_platform_broker",ei="authority_mismatch",ti="invalid_request_method_for_EAR",oi="invalid_authorize_post_body_parameters";var F={[Lo]:"A redirect URI is required for all calls, and none has been set.",[$n]:"Could not parse the given claims request object.",[Uo]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ze]:"URL could not be parsed into appropriate segments.",[Ho]:"URL was empty or null.",[Fo]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[jt]:"Given claims parameter must be a stringified JSON object.",[Ko]:"Token request was empty and not found in cache.",[zo]:"The logout request was null or undefined.",[jn]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Go]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Yt]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[qo]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Wo]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Tt]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Yn]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Qn]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Jn]:"Invalid authentication header provided",[Xn]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Zn]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ei]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[oi]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[ti]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},oh={redirectUriNotSet:{code:Lo,desc:F[Lo]},claimsRequestParsingError:{code:$n,desc:F[$n]},authorityUriInsecure:{code:Uo,desc:F[Uo]},urlParseError:{code:Ze,desc:F[Ze]},urlEmptyError:{code:Ho,desc:F[Ho]},emptyScopesError:{code:Fo,desc:F[Fo]},invalidClaimsRequest:{code:jt,desc:F[jt]},tokenRequestEmptyError:{code:Ko,desc:F[Ko]},logoutRequestEmptyError:{code:zo,desc:F[zo]},invalidCodeChallengeMethod:{code:jn,desc:F[jn]},invalidCodeChallengeParams:{code:Go,desc:F[Go]},invalidCloudDiscoveryMetadata:{code:Yt,desc:F[Yt]},invalidAuthorityMetadata:{code:qo,desc:F[qo]},untrustedAuthority:{code:Wo,desc:F[Wo]},missingSshJwk:{code:Tt,desc:F[Tt]},missingSshKid:{code:Yn,desc:F[Yn]},missingNonceAuthenticationHeader:{code:Qn,desc:F[Qn]},invalidAuthenticationHeader:{code:Jn,desc:F[Jn]},cannotSetOIDCOptions:{code:Xn,desc:F[Xn]},cannotAllowPlatformBroker:{code:Zn,desc:F[Zn]},authorityMismatch:{code:ei,desc:F[ei]},invalidAuthorizePostBodyParameters:{code:oi,desc:F[oi]},invalidRequestMethodForEAR:{code:ti,desc:F[ti]}},ri=class n extends E{constructor(e){super(e,F[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function P(n){return new ri(n)}var D=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},o=e.split("&"),r=i=>decodeURIComponent(i.replace(/\+/g," "));return o.forEach(i=>{if(i.trim()){let[a,s]=i.split(/=(.+)/g,2);a&&s&&(t[r(a)]=r(s))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var G=class n{constructor(e){let t=e?D.trimArrayEntries([...e]):[],o=t?D.removeEmptyStringsFromArray(t):[];if(!o||!o.length)throw P(Fo);this.scopes=new Set,o.forEach(r=>this.scopes.add(r))}static fromString(e){let o=(e||m.EMPTY_STRING).split(" ");return new n(o)}static createSearchScopes(e){let t=e&&e.length>0?e:[..._e],o=new n(t);return o.containsOnlyOIDCScopes()?o.removeScope(m.OFFLINE_ACCESS_SCOPE):o.removeOIDCScopes(),o}containsScope(e){let t=this.printScopesLowerCase().split(" "),o=new n(t);return e?o.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Xs.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw p(xo)}}removeScope(e){if(!e)throw p(Po);this.scopes.delete(e.trim())}removeOIDCScopes(){Xs.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw p(qt);let t=new Set;return e.scopes.forEach(o=>t.add(o.toLowerCase())),this.scopes.forEach(o=>t.add(o.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw p(qt);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),o=e.getScopeCount(),r=this.getScopeCount();return t.size<r+o}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):m.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Er(n,e){if(!n)throw p(bo);try{let t=e(n);return JSON.parse(t)}catch{throw p(Kt)}}function et(n){if(!n)throw p(Kt);let e=n.split(Ct.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?m.EMPTY_STRING:e[1]}}function ec(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Qt(n,e,t,o){if(o){let{oid:r,sub:i,tid:a,name:s,tfp:d,acr:u,preferred_username:h,upn:g,login_hint:y}=o,T=a||d||u||"";return{tenantId:T,localAccountId:r||i||"",name:s,username:h||g||"",loginHint:y,isHomeTenant:ec(T,n)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:ec(t,n)}}function Vo(n,e,t,o){let r=n;if(e){let i=e,{isHomeTenant:s}=i,d=ft(i,["isHomeTenant"]);r=C(C({},n),d)}if(t){let a=Qt(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:s}=a,d=ft(a,["isHomeTenant"]);return r=A(C(C({},r),d),{idTokenClaims:t,idToken:o}),r}return r}var be={Default:0,Adfs:1,Dsts:2,Ciam:3};function $o(n){return n&&(n.tid||n.tfp||n.acr)||null}var L={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var B=class n{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,o){let r=new n;t.authorityType===be.Adfs?r.authorityType=br.ADFS_ACCOUNT_TYPE:t.protocolMode===L.OIDC?r.authorityType=br.GENERIC_ACCOUNT_TYPE:r.authorityType=br.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&o&&(i=Er(e.clientInfo,o),i.xms_tdbr&&(r.dataBoundary=i.xms_tdbr==="EU"?"EU":"None")),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;let a=e.environment||t&&t.getPreferredCache();if(!a)throw p(kt);r.environment=a,r.realm=i?.utid||$o(e.idTokenClaims)||"",r.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let s=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,d=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=s||d||"",r.loginHint=e.idTokenClaims?.login_hint,r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{let u=Qt(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[u]}return r}static createFromAccountInfo(e,t,o){let r=new n;return r.authorityType=e.authorityType||br.GENERIC_ACCOUNT_TYPE,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.loginHint=e.loginHint,r.cloudGraphHostName=t,r.msGraphHost=o,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r.dataBoundary=e.dataBoundary,r}static generateHomeAccountId(e,t,o,r,i){if(!(t===be.Adfs||t===be.Dsts)){if(e)try{let a=Er(e,r.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}o.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,o){if(!e||!t)return!1;let r=!0;if(o){let i=e.idTokenClaims||{},a=t.idTokenClaims||{};r=i.iat===a.iat&&i.nonce===a.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}};var ee={};Ee(ee,{checkMaxAge:()=>ni,extractTokenClaims:()=>Et,getJWSPayload:()=>rh,isKmsi:()=>tc});function Et(n,e){let t=rh(n);try{let o=e(t);return JSON.parse(o)}catch{throw p(zt)}}function tc(n){if(!n.signin_state)return!1;let e=["kmsi","dvc_dmjd"];return n.signin_state.some(o=>e.includes(o.trim().toLowerCase()))}function rh(n){if(!n)throw p(ko);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw p(zt);return t[2]}function ni(n,e){if(e===0||Date.now()-3e5>n+e)throw p(So)}var ot={};Ee(ot,{getDeserializedResponse:()=>oc,mapToQueryString:()=>tt,normalizeUrlForComparison:()=>jf,stripLeadingHashOrQuery:()=>ih});function nh(n){if(!n)return n;let e=n.toLowerCase();return D.endsWith(e,"?")?e=e.slice(0,-1):D.endsWith(e,"?/")&&(e=e.slice(0,-2)),D.endsWith(e,"/")||(e+="/"),e}function ih(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function oc(n){if(!n||n.indexOf("=")<0)return null;try{let e=ih(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw p(Eo)}return null}function tt(n,e=!0,t){let o=new Array;return n.forEach((r,i)=>{!e&&t&&i in t?o.push(`${i}=${r}`):o.push(`${i}=${encodeURIComponent(r)}`)}),o.join("&")}function jf(n){if(!n)return n;let e=n.split("#")[0];try{let t=new URL(e),o=t.origin+t.pathname+t.search;return nh(o)}catch{return nh(e)}}var R=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw P(Ho);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return D.endsWith(t,"?")?t=t.slice(0,-1):D.endsWith(t,"?/")&&(t=t.slice(0,-2)),D.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw P(Ze)}if(!e.HostNameAndPort||!e.PathSegments)throw P(Ze);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw P(Uo)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),o=t.PathSegments;return e&&o.length!==0&&(o[0]===Fe.COMMON||o[0]===Fe.ORGANIZATIONS)&&(o[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw P(Ze);let o={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=o.AbsolutePath.split("/");return r=r.filter(i=>i&&i.length>0),o.PathSegments=r,o.QueryString&&o.QueryString.endsWith("/")&&(o.QueryString=o.QueryString.substring(0,o.QueryString.length-1)),o}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),o=e.match(t);if(!o)throw P(Ze);return o[2]}static getAbsoluteUrl(e,t){if(e[0]===m.FORWARD_SLASH){let r=new n(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!oc(e)}};var sh={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},rc=sh.endpointMetadata,nc=sh.instanceDiscoveryMetadata,ic=new Set;nc.metadata.forEach(n=>{n.aliases.forEach(e=>{ic.add(e)})});function ch(n,e){let t,o=n.canonicalAuthority;if(o){let r=new R(o).getUrlComponents().HostNameAndPort;t=ah(r,n.cloudDiscoveryMetadata?.metadata,ge.CONFIG,e)||ah(r,nc.metadata,ge.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function ah(n,e,t,o){if(o?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let r=ii(e,n);if(r)return o?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),r.aliases;o?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function dh(n){return ii(nc.metadata,n)}function ii(n,e){for(let t=0;t<n.length;t++){let o=n[t];if(o.aliases.includes(e))return o}return null}var si={};Ee(si,{cacheErrorUnknown:()=>ai,cacheQuotaExceeded:()=>fa});var fa="cache_quota_exceeded",ai="cache_error_unknown";var ac={[fa]:"Exceeded cache storage capacity.",[ai]:"Unexpected error occurred when using cache storage."},Jt=class n extends E{constructor(e,t){let o=t||(ac[e]?ac[e]:ac[ai]);super(`${e}: ${o}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=o}};function wr(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new Jt(fa):new Jt(n.name,n.message):new Jt(ai)}var jo=class{constructor(e,t,o,r,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=o.clone(ha,Tr),this.staticAuthorityOptions=i,this.performanceClient=r}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(r=>!r))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let o=this.getAllAccounts(e,t);return o.length>1?o.sort(i=>i.idTokenClaims?-1:1)[0]:o.length===1?o[0]:null}getBaseAccountInfo(e,t){let o=this.getAccountsFilteredBy(e,t);return o.length>0?B.getAccountInfo(o[0]):null}buildTenantProfiles(e,t,o){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t,o?.tenantId,o))}getTenantedAccountInfoByFilter(e,t,o,r,i){let a=null,s;if(i&&!this.tenantProfileMatchesFilter(o,i))return null;let d=this.getIdToken(e,r,t,o.tenantId);return d&&(s=Et(d.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,i))?null:(a=Vo(e,o,s,d?.secret),a)}getTenantProfilesFromAccountEntity(e,t,o,r){let i=B.getAccountInfo(e),a=i.tenantProfiles||new Map,s=this.getTokenKeys();if(o){let u=a.get(o);if(u)a=new Map([[o,u]]);else return[]}let d=[];return a.forEach(u=>{let h=this.getTenantedAccountInfoByFilter(i,s,u,t,r);h&&d.push(h)}),d}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,o,r){return l(this,null,function*(){if(!e)throw p(Oo);try{e.account&&(yield this.setAccount(e.account,t,o)),e.idToken&&r?.idToken!==!1&&(yield this.setIdTokenCredential(e.idToken,t,o)),e.accessToken&&r?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t,o)),e.refreshToken&&r?.refreshToken!==!1&&(yield this.setRefreshTokenCredential(e.refreshToken,t,o)),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof E?i:wr(i)}})}saveAccessToken(e,t,o){return l(this,null,function*(){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),a=G.fromString(e.target);i.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;let d=this.getAccessTokenCredential(s,t);d&&this.credentialMatchesFilter(d,r)&&G.fromString(d.target).intersectingScopeSets(a)&&this.removeAccessToken(s,t)}),yield this.setAccessTokenCredential(e,t,o)})}getAccountsFilteredBy(e,t){let o=this.getAccountKeys(),r=[];return o.forEach(i=>{let a=this.getAccount(i,t);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},d=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,s));d&&d.length===0||r.push(a)}),r}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Z.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===_.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),o={};return t.forEach(r=>{if(!this.isAppMetadata(r))return;let i=this.getAppMetadata(r);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(o[r]=i))}),o}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),o=null;return t.forEach(r=>{if(!this.isAuthorityMetadata(r)||r.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(r);i&&i.aliases.indexOf(e)!==-1&&(o=i)}),o}removeAllAccounts(e){this.getAllAccounts({},e).forEach(o=>{this.removeAccount(o,e)})}removeAccount(e,t){this.removeAccountContext(e,t);let o=this.getAccountKeys(),r=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);o.filter(r).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let o=this.getTokenKeys(),r=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);o.idToken.filter(r).forEach(i=>{this.removeIdToken(i,t)}),o.accessToken.filter(r).forEach(i=>{this.removeAccessToken(i,t)}),o.refreshToken.filter(r).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){let o=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!o||o.credentialType.toLowerCase()!==Z.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||o.tokenType!==_.POP)return;let r=o.keyId;r&&this.cryptoImpl.removeTokenBindingKey(r).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${r}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(o=>{this.isAppMetadata(o)&&this.removeItem(o,e)}),!0}getIdToken(e,t,o,r,i){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Z.ID_TOKEN,clientId:this.clientId,realm:r},s=this.getIdTokensByFilter(a,t,o),d=s.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(d>1){let u=s;if(!r){let h=new Map;s.forEach((y,T)=>{y.realm===e.tenantId&&h.set(T,y)});let g=h.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(g===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),h.values().next().value;u=h}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((h,g)=>{this.removeIdToken(g,t)}),i&&t&&i.addFields({multiMatchedID:s.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t,o){let r=o&&o.idToken||this.getTokenKeys().idToken,i=new Map;return r.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,C({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(a,t);s&&this.credentialMatchesFilter(s,e)&&i.set(a,s)}),i}idTokenKeyMatchesFilter(e,t){let o=e.toLowerCase();return!(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,o,r){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let a=G.createSearchScopes(t.scopes),s=t.authenticationScheme||_.BEARER,d=s&&s.toLowerCase()!==_.BEARER.toLowerCase()?Z.ACCESS_TOKEN_WITH_AUTH_SCHEME:Z.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:d,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},h=o&&o.accessToken||this.getTokenKeys().accessToken,g=[];h.forEach(T=>{if(this.accessTokenKeyMatchesFilter(T,u,!0)){let M=this.getAccessTokenCredential(T,i);M&&this.credentialMatchesFilter(M,u)&&g.push(M)}});let y=g.length;return y<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):y>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),g.forEach(T=>{this.removeAccessToken(this.generateCredentialKey(T),i)}),this.performanceClient.addFields({multiMatchedAT:g.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),g[0])}accessTokenKeyMatchesFilter(e,t,o){let r=e.toLowerCase();if(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&r.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&r.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let a=0;a<i.length;a++){if(o&&!r.includes(i[a].toLowerCase()))return!1;if(!o&&r.includes(i[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let o=this.getTokenKeys(),r=[];return o.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let a=this.getAccessTokenCredential(i,t);a&&this.credentialMatchesFilter(a,e)&&r.push(a)}),r}getRefreshToken(e,t,o,r,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=t?yo:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Z.REFRESH_TOKEN,clientId:this.clientId,familyId:a},d=r&&r.refreshToken||this.getTokenKeys().refreshToken,u=[];d.forEach(g=>{if(this.refreshTokenKeyMatchesFilter(g,s)){let y=this.getRefreshTokenCredential(g,o);y&&this.credentialMatchesFilter(y,s)&&u.push(y)}});let h=u.length;return h<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(h>1&&i&&o&&i.addFields({multiMatchedRT:h},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,t){let o=e.toLowerCase();return!(t.familyId&&o.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},o=this.getAppMetadataFilteredBy(t),r=Object.keys(o).map(a=>o[a]),i=r.length;if(i<1)return null;if(i>1)throw p(Ro);return r[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===yo)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let o=e.oid||e.sub;return t===o}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let r=ch(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}let o=this.getAuthorityMetadataByAlias(t);return!!(o&&o.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Z.ACCESS_TOKEN&&e.credentialType!==Z.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:G.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(Sn)!==-1}isAuthorityMetadata(e){return e.indexOf(kr.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${kr.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let o in t)e[o]=t[o];return e}},ci=class extends jo{setAccount(){return l(this,null,function*(){throw p(S)})}getAccount(){throw p(S)}setIdTokenCredential(){return l(this,null,function*(){throw p(S)})}getIdTokenCredential(){throw p(S)}setAccessTokenCredential(){return l(this,null,function*(){throw p(S)})}getAccessTokenCredential(){throw p(S)}setRefreshTokenCredential(){return l(this,null,function*(){throw p(S)})}getRefreshTokenCredential(){throw p(S)}setAppMetadata(){throw p(S)}getAppMetadata(){throw p(S)}setServerTelemetry(){throw p(S)}getServerTelemetry(){throw p(S)}setAuthorityMetadata(){throw p(S)}getAuthorityMetadata(){throw p(S)}getAuthorityMetadataKeys(){throw p(S)}setThrottlingCache(){throw p(S)}getThrottlingCache(){throw p(S)}removeItem(){throw p(S)}getKeys(){throw p(S)}getAccountKeys(){throw p(S)}getTokenKeys(){throw p(S)}generateCredentialKey(){throw p(S)}generateAccountKey(){throw p(S)}};var c={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},Xb=new Map([[c.AcquireTokenByCode,"ATByCode"],[c.AcquireTokenByRefreshToken,"ATByRT"],[c.AcquireTokenSilent,"ATS"],[c.AcquireTokenSilentAsync,"ATSAsync"],[c.AcquireTokenPopup,"ATPopup"],[c.AcquireTokenRedirect,"ATRedirect"],[c.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[c.CryptoOptsSignJwt,"CryptoSignJwt"],[c.SilentCacheClientAcquireToken,"SltCacheClientAT"],[c.SilentIframeClientAcquireToken,"SltIframeClientAT"],[c.SilentRefreshClientAcquireToken,"SltRClientAT"],[c.SsoSilent,"SsoSlt"],[c.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[c.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[c.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[c.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[c.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[c.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[c.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[c.BrokerHandhshake,"BrokerHandshake"],[c.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[c.AcquireTokenByBroker,"ATByBroker"],[c.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[c.RefreshTokenClientAcquireToken,"RTClientAT"],[c.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[c.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[c.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[c.AcquireTokenFromCache,"ATFromCache"],[c.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[c.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[c.AcquireTokenBySilentIframe,"ATBySltIframe"],[c.InitializeBaseRequest,"InitBaseReq"],[c.InitializeSilentRequest,"InitSltReq"],[c.InitializeClientApplication,"InitClientApplication"],[c.InitializeCache,"InitCache"],[c.ImportExistingCache,"importCache"],[c.SetUserData,"setUserData"],[c.LocalStorageUpdated,"localStorageUpdated"],[c.SilentIframeClientTokenHelper,"SIClientTHelper"],[c.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[c.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[c.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[c.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[c.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[c.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[c.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[c.GetAuthCodeUrl,"GetAuthCodeUrl"],[c.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[c.HandleCodeResponse,"HandleCodeResp"],[c.HandleResponseEar,"HandleRespEar"],[c.HandleResponseCode,"HandleRespCode"],[c.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[c.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[c.AuthClientAcquireToken,"AuthClientAT"],[c.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[c.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[c.PopTokenGenerateCnf,"PopTGenCnf"],[c.PopTokenGenerateKid,"PopTGenKid"],[c.HandleServerTokenResponse,"HandleServerTRes"],[c.DeserializeResponse,"DeserializeRes"],[c.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[c.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[c.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[c.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[c.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[c.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[c.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[c.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[c.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[c.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[c.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[c.AcquireTokenByCodeAsync,"ATByCodeAsync"],[c.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[c.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[c.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[c.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[c.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[c.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[c.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[c.NativeGenerateAuthResult,"NtvGenAuthRes"],[c.RemoveHiddenIframe,"RemoveHiddenIframe"],[c.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[c.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[c.GeneratePkceCodes,"GenPkceCodes"],[c.GenerateCodeVerifier,"GenCodeVerifier"],[c.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[c.Sha256Digest,"Sha256Digest"],[c.GetRandomValues,"GetRandomValues"],[c.GenerateHKDF,"genHKDF"],[c.GenerateBaseKey,"genBaseKey"],[c.Base64Decode,"b64Decode"],[c.UrlEncodeArr,"urlEncArr"],[c.Encrypt,"encrypt"],[c.Decrypt,"decrypt"],[c.GenerateEarKey,"genEarKey"],[c.DecryptEarResponse,"decryptEarResp"]]),sc={NotStarted:0,InProgress:1,Completed:2};var ma=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},wt=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:sc.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new ma}}startPerformanceMeasurement(){return new ma}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var pa={tokenRenewalOffsetSeconds:Rn,preventCorsPreflight:!1},Yf={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:N.Info,correlationId:m.EMPTY_STRING},Qf={claimsBasedCachingEnabled:!1},Jf={sendGetRequestAsync(){return l(this,null,function*(){throw p(S)})},sendPostRequestAsync(){return l(this,null,function*(){throw p(S)})}},Xf={sku:m.SKU,version:Tr,cpu:m.EMPTY_STRING,os:m.EMPTY_STRING},Zf={clientSecret:m.EMPTY_STRING,clientAssertion:void 0},em={azureCloudInstance:$t.None,tenant:`${m.DEFAULT_COMMON_TENANT}`},tm={application:{appName:"",appVersion:""}};function lh({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:o,storageInterface:r,networkInterface:i,cryptoInterface:a,clientCredentials:s,libraryInfo:d,telemetry:u,serverTelemetryManager:h,persistencePlugin:g,serializableCache:y}){let T=C(C({},Yf),t);return{authOptions:om(n),systemOptions:C(C({},pa),e),loggerOptions:T,cacheOptions:C(C({},Qf),o),storageInterface:r||new ci(n.clientId,Vt,new ye(T),new wt),networkInterface:i||Jf,cryptoInterface:a||Vt,clientCredentials:s||Zf,libraryInfo:C(C({},Xf),d),telemetry:C(C({},tm),u),serverTelemetryManager:h||null,persistencePlugin:g||null,serializableCache:y||null}}function om(n){return C({clientCapabilities:[],azureCloudOptions:em,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function ga(n){return n.authOptions.authority.options.protocolMode===L.OIDC}var fe={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var te={};Ee(te,{addApplicationTelemetry:()=>ui,addAuthorizationCode:()=>Xc,addBrokerParameters:()=>_t,addCcsOid:()=>St,addCcsUpn:()=>Xt,addClaims:()=>Zo,addClientAssertion:()=>mi,addClientAssertionType:()=>pi,addClientCapabilitiesToClaims:()=>uh,addClientId:()=>Jo,addClientInfo:()=>tr,addClientSecret:()=>fi,addCodeChallengeParams:()=>Cm,addCodeVerifier:()=>ed,addCorrelationId:()=>er,addDeviceCode:()=>ym,addDomainHint:()=>Yc,addEARParameters:()=>Tm,addExtraQueryParameters:()=>Rt,addGrantType:()=>gi,addIdTokenHint:()=>jc,addInstanceAware:()=>Ci,addLibraryInfo:()=>li,addLoginHint:()=>Sr,addLogoutHint:()=>td,addNativeBroker:()=>gm,addNonce:()=>Jc,addOboAssertion:()=>vm,addPassword:()=>Am,addPopToken:()=>yi,addPostBodyParameters:()=>Em,addPostLogoutRedirectUri:()=>$c,addPrompt:()=>Qc,addRedirectUri:()=>Xo,addRefreshToken:()=>Zc,addRequestTokenUse:()=>bm,addResponseMode:()=>Vc,addResponseType:()=>pm,addScopes:()=>Qo,addServerTelemetry:()=>bi,addSid:()=>Aa,addSshJwk:()=>vi,addState:()=>hi,addThrottling:()=>ki,addUsername:()=>km,instrumentBrokerParams:()=>Yo});var It={};Ee(It,{ACCESS_TOKEN:()=>im,BROKER_CLIENT_ID:()=>di,BROKER_REDIRECT_URI:()=>ka,CCS_HEADER:()=>fm,CLAIMS:()=>uc,CLIENT_ASSERTION:()=>Bc,CLIENT_ASSERTION_TYPE:()=>Dc,CLIENT_ID:()=>rt,CLIENT_INFO:()=>lm,CLIENT_REQUEST_ID:()=>kc,CLIENT_SECRET:()=>Nc,CODE:()=>Cc,CODE_CHALLENGE:()=>yc,CODE_CHALLENGE_METHOD:()=>vc,CODE_VERIFIER:()=>bc,DEVICE_CODE:()=>Mc,DOMAIN_HINT:()=>Gc,EAR_JWE_CRYPTO:()=>Wc,EAR_JWK:()=>qc,ERROR:()=>rm,ERROR_DESCRIPTION:()=>nm,EXPIRES_IN:()=>sm,FOCI:()=>hm,GRANT_TYPE:()=>lc,ID_TOKEN:()=>am,ID_TOKEN_HINT:()=>Oc,INSTANCE_AWARE:()=>Ir,LOGIN_HINT:()=>zc,LOGOUT_HINT:()=>Fc,NATIVE_BROKER:()=>Hc,NONCE:()=>pc,OBO_ASSERTION:()=>Lc,ON_BEHALF_OF:()=>um,POST_LOGOUT_URI:()=>xc,PROMPT:()=>gc,REDIRECT_URI:()=>Ca,REFRESH_TOKEN:()=>fc,REFRESH_TOKEN_EXPIRES_IN:()=>cm,REQUESTED_TOKEN_USE:()=>Uc,REQ_CNF:()=>va,RESPONSE_MODE:()=>dc,RESPONSE_TYPE:()=>cc,RETURN_SPA_CODE:()=>ba,SCOPE:()=>hc,SESSION_STATE:()=>dm,SID:()=>Kc,STATE:()=>mc,TOKEN_TYPE:()=>ya,X_APP_NAME:()=>_c,X_APP_VER:()=>Pc,X_CLIENT_CPU:()=>wc,X_CLIENT_CURR_TELEM:()=>Ic,X_CLIENT_EXTRA_SKU:()=>mm,X_CLIENT_LAST_TELEM:()=>Sc,X_CLIENT_OS:()=>Ec,X_CLIENT_SKU:()=>Ac,X_CLIENT_VER:()=>Tc,X_MS_LIB_CAPABILITY:()=>Rc});var rt="client_id",Ca="redirect_uri",cc="response_type",dc="response_mode",lc="grant_type",uc="claims",hc="scope",rm="error",nm="error_description",im="access_token",am="id_token",fc="refresh_token",sm="expires_in",cm="refresh_token_expires_in",mc="state",pc="nonce",gc="prompt",dm="session_state",lm="client_info",Cc="code",yc="code_challenge",vc="code_challenge_method",bc="code_verifier",kc="client-request-id",Ac="x-client-SKU",Tc="x-client-VER",Ec="x-client-OS",wc="x-client-CPU",Ic="x-client-current-telemetry",Sc="x-client-last-telemetry",Rc="x-ms-lib-capability",_c="x-app-name",Pc="x-app-ver",xc="post_logout_redirect_uri",Oc="id_token_hint",Mc="device_code",Nc="client_secret",Bc="client_assertion",Dc="client_assertion_type",ya="token_type",va="req_cnf",Lc="assertion",Uc="requested_token_use",um="on_behalf_of",hm="foci",fm="X-AnchorMailbox",ba="return_spa_code",Hc="nativebroker",Fc="logout_hint",Kc="sid",zc="login_hint",Gc="domain_hint",mm="x-client-xtra-sku",di="brk_client_id",ka="brk_redirect_uri",Ir="instance_aware",qc="ear_jwk",Wc="ear_jwe_crypto";function Yo(n,e,t){if(!e)return;let o=n.get(rt);o&&n.has(di)&&t?.addFields({embeddedClientId:o,embeddedRedirectUri:n.get(Ca)},e)}function pm(n,e){n.set(cc,e)}function Vc(n,e){n.set(dc,e||Zs.QUERY)}function gm(n){n.set(Hc,"1")}function Qo(n,e,t=!0,o=_e){t&&!o.includes("openid")&&!e.includes("openid")&&o.push("openid");let r=t?[...e||[],...o]:e||[],i=new G(r);n.set(hc,i.printScopes())}function Jo(n,e){n.set(rt,e)}function Xo(n,e){n.set(Ca,e)}function $c(n,e){n.set(xc,e)}function jc(n,e){n.set(Oc,e)}function Yc(n,e){n.set(Gc,e)}function Sr(n,e){n.set(zc,e)}function Xt(n,e){n.set(X.CCS_HEADER,`UPN:${e}`)}function St(n,e){n.set(X.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Aa(n,e){n.set(Kc,e)}function Zo(n,e,t){let o=uh(e,t);try{JSON.parse(o)}catch{throw P(jt)}n.set(uc,o)}function er(n,e){n.set(kc,e)}function li(n,e){n.set(Ac,e.sku),n.set(Tc,e.version),e.os&&n.set(Ec,e.os),e.cpu&&n.set(wc,e.cpu)}function ui(n,e){e?.appName&&n.set(_c,e.appName),e?.appVersion&&n.set(Pc,e.appVersion)}function Qc(n,e){n.set(gc,e)}function hi(n,e){e&&n.set(mc,e)}function Jc(n,e){n.set(pc,e)}function Cm(n,e,t){if(e&&t)n.set(yc,e),n.set(vc,t);else throw P(Go)}function Xc(n,e){n.set(Cc,e)}function ym(n,e){n.set(Mc,e)}function Zc(n,e){n.set(fc,e)}function ed(n,e){n.set(bc,e)}function fi(n,e){n.set(Nc,e)}function mi(n,e){e&&n.set(Bc,e)}function pi(n,e){e&&n.set(Dc,e)}function vm(n,e){n.set(Lc,e)}function bm(n,e){n.set(Uc,e)}function gi(n,e){n.set(lc,e)}function tr(n){n.set(Zu,"1")}function Ci(n){n.has(Ir)||n.set(Ir,"true")}function Rt(n,e){Object.entries(e).forEach(([t,o])=>{!n.has(t)&&o&&n.set(t,o)})}function uh(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw P(jt)}return e&&e.length>0&&(t.hasOwnProperty(vr.ACCESS_TOKEN)||(t[vr.ACCESS_TOKEN]={}),t[vr.ACCESS_TOKEN][vr.XMS_CC]={values:e}),JSON.stringify(t)}function km(n,e){n.set(ca.username,e)}function Am(n,e){n.set(ca.password,e)}function yi(n,e){e&&(n.set(ya,_.POP),n.set(va,e))}function vi(n,e){e&&(n.set(ya,_.SSH),n.set(va,e))}function bi(n,e){n.set(Ic,e.generateCurrentRequestHeaderValue()),n.set(Sc,e.generateLastRequestHeaderValue())}function ki(n){n.set(Rc,yt.X_MS_LIB_CAPABILITY_VALUE)}function td(n,e){n.set(Fc,e)}function _t(n,e,t){n.has(di)||n.set(di,e),n.has(ka)||n.set(ka,t)}function Tm(n,e){n.set(qc,encodeURIComponent(e)),n.set(Wc,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Em(n,e){Object.entries(e).forEach(([t,o])=>{o&&n.set(t,o)})}var Sa={};Ee(Sa,{createDiscoveredInstance:()=>sd});function hh(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function fh(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function mh(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var q=(n,e,t,o,r)=>(...i)=>{t.trace(`Executing function ${e}`);let a=o?.startMeasurement(e,r);if(r){let s=e+"CallCount";o?.incrementFields({[s]:1},r)}try{let s=n(...i);return a?.end({success:!0}),t.trace(`Returning result from ${e}`),s}catch(s){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(s))}catch{t.trace("Unable to print error message.")}throw a?.end({success:!1},s),s}},f=(n,e,t,o,r)=>(...i)=>{t.trace(`Executing function ${e}`);let a=o?.startMeasurement(e,r);if(r){let s=e+"CallCount";o?.incrementFields({[s]:1},r)}return o?.setPreQueueTime(e,r),n(...i).then(s=>(t.trace(`Returning result from ${e}`),a?.end({success:!0}),s)).catch(s=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(s))}catch{t.trace("Unable to print error message.")}throw a?.end({success:!1},s),s})};var ph=(()=>{class n{constructor(t,o,r,i){this.networkInterface=t,this.logger=o,this.performanceClient=r,this.correlationId=i}detectRegion(t,o){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RegionDiscoveryDetectRegion,this.correlationId);let r=t;if(r)o.region_source=vo.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let a=yield f(this.getRegionFromIMDS.bind(this),c.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(m.IMDS_VERSION,i);if(a.status===He.SUCCESS&&(r=a.body,o.region_source=vo.IMDS),a.status===He.BAD_REQUEST){let s=yield f(this.getCurrentVersion.bind(this),c.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!s)return o.region_source=vo.FAILED_AUTO_DETECTION,null;let d=yield f(this.getRegionFromIMDS.bind(this),c.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(s,i);d.status===He.SUCCESS&&(r=d.body,o.region_source=vo.IMDS)}}catch{return o.region_source=vo.FAILED_AUTO_DETECTION,null}}return r||(o.region_source=vo.FAILED_AUTO_DETECTION),r||null})}getRegionFromIMDS(t,o){return l(this,null,function*(){return this.performanceClient?.addQueueMeasurement(c.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${m.IMDS_ENDPOINT}?api-version=${t}&format=text`,o,m.IMDS_TIMEOUT)})}getCurrentVersion(t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let o=yield this.networkInterface.sendGetRequestAsync(`${m.IMDS_ENDPOINT}?format=json`,t);return o.status===He.BAD_REQUEST&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var W={};Ee(W,{createAccessTokenEntity:()=>nd,createIdTokenEntity:()=>rd,createRefreshTokenEntity:()=>id,generateAppMetadataKey:()=>Mm,generateAuthorityMetadataExpiresAt:()=>Ea,isAccessTokenEntity:()=>Rm,isAppMetadataEntity:()=>Nm,isAuthorityMetadataEntity:()=>Bm,isAuthorityMetadataExpired:()=>wa,isCredentialEntity:()=>Ta,isIdTokenEntity:()=>_m,isRefreshTokenEntity:()=>Pm,isServerTelemetryEntity:()=>xm,isThrottlingEntity:()=>Om,updateAuthorityEndpointMetadata:()=>_r,updateCloudDiscoveryMetadata:()=>Ti});var oe={};Ee(oe,{delay:()=>Sm,isCacheExpired:()=>Im,isTokenExpired:()=>Rr,nowSeconds:()=>Pe,toDateFromSeconds:()=>Ai,toSecondsFromDate:()=>wm,wasClockTurnedBack:()=>od});function Pe(){return Math.round(new Date().getTime()/1e3)}function wm(n){return n.getTime()/1e3}function Ai(n){return n?new Date(Number(n)*1e3):new Date}function Rr(n,e){let t=Number(n)||0;return Pe()+e>t}function Im(n,e){let t=Number(n)+e*24*60*60*1e3;return Date.now()>t}function od(n){return Number(n)>Pe()}function Sm(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function rd(n,e,t,o,r){return{credentialType:Z.ID_TOKEN,homeAccountId:n,environment:e,clientId:o,secret:t,realm:r,lastUpdatedAt:Date.now().toString()}}function nd(n,e,t,o,r,i,a,s,d,u,h,g,y,T,M){let x={homeAccountId:n,credentialType:Z.ACCESS_TOKEN,secret:t,cachedAt:Pe().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:e,clientId:o,realm:r,target:i,tokenType:h||_.BEARER,lastUpdatedAt:Date.now().toString()};if(g&&(x.userAssertionHash=g),u&&(x.refreshOn=u.toString()),T&&(x.requestedClaims=T,x.requestedClaimsHash=M),x.tokenType?.toLowerCase()!==_.BEARER.toLowerCase())switch(x.credentialType=Z.ACCESS_TOKEN_WITH_AUTH_SCHEME,x.tokenType){case _.POP:let ue=Et(t,d);if(!ue?.cnf?.kid)throw p(Mo);x.keyId=ue.cnf.kid;break;case _.SSH:x.keyId=y}return x}function id(n,e,t,o,r,i,a){let s={credentialType:Z.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:o,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(s.userAssertionHash=i),r&&(s.familyId=r),a&&(s.expiresOn=a.toString()),s}function Ta(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function Rm(n){return n?Ta(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Z.ACCESS_TOKEN||n.credentialType===Z.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function _m(n){return n?Ta(n)&&n.hasOwnProperty("realm")&&n.credentialType===Z.ID_TOKEN:!1}function Pm(n){return n?Ta(n)&&n.credentialType===Z.REFRESH_TOKEN:!1}function xm(n,e){let t=n.indexOf(ie.CACHE_KEY)===0,o=!0;return e&&(o=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&o}function Om(n,e){let t=!1;n&&(t=n.indexOf(yt.THROTTLING_PREFIX)===0);let o=!0;return e&&(o=e.hasOwnProperty("throttleTime")),t&&o}function Mm({environment:n,clientId:e}){return[Sn,n,e].join(Ct.CACHE_KEY_SEPARATOR).toLowerCase()}function Nm(n,e){return e?n.indexOf(Sn)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Bm(n,e){return e?n.indexOf(kr.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Ea(){return Pe()+kr.REFRESH_TIME_SECONDS}function _r(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Ti(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function wa(n){return n.expiresAt<=Pe()}var Be=class n{constructor(e,t,o,r,i,a,s,d){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=o,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=a,this.managedIdentity=d||!1,this.regionDiscovery=new ph(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(m.CIAM_AUTH_URL))return be.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case m.ADFS:return be.Adfs;case m.DSTS:return be.Dsts}return be.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new R(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw p(Ce)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw p(Ce)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw p(Ce)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw p(Bo);return this.replacePath(this.metadata.end_session_endpoint)}else throw p(Ce)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw p(Ce)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw p(Ce)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===be.Default&&this.protocolMode!==L.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,r=new R(this.metadata.canonical_authority).getUrlComponents(),i=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((s,d)=>{let u=i[d];if(d===0&&this.canReplaceTenant(r)){let h=new R(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==h&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${h}`),u=h)}s!==u&&(t=t.replace(`/${u}/`,`/${s}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===be.Adfs||this.protocolMode===L.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield f(this.updateCloudDiscoveryMetadata.bind(this),c.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let o=yield f(this.updateEndpointMetadata.bind(this),c.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:o}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:o},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ea(),jwks_uri:""}),e}updateCachedMetadata(e,t,o){t!==ge.CACHE&&o?.source!==ge.CACHE&&(e.expiresAt=Ea(),e.canonical_authority=this.canonicalAuthority);let r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}updateEndpointMetadata(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===ge.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let r=yield f(this.updateMetadataWithRegionalInformation.bind(this),c.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);_r(e,r,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let o=yield f(this.getEndpointMetadataFromNetwork.bind(this),c.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield f(this.updateMetadataWithRegionalInformation.bind(this),c.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(o)),_r(e,o,!0),ge.NETWORK;throw p(To,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),_r(e,t,!1),{source:ge.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let r=this.getEndpointMetadataFromHardcodedValues();if(r)return _r(e,r,!1),{source:ge.HARDCODED_VALUES,metadata:r};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let o=wa(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!o?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ge.CACHE}):(o&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new R(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw P(qo)}return null}getEndpointMetadataFromNetwork(){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let o=yield this.networkInterface.sendGetRequestAsync(t,e);return hh(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in rc?rc[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==m.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=da.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let o=yield f(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),c.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=da.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,n.replaceWithRegionalInformation(e,o);this.regionDiscoveryMetadata.region_outcome=da.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let o=yield f(this.getCloudDiscoveryMetadataFromNetwork.bind(this),c.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(o)return Ti(e,o,!0),ge.NETWORK;throw P(Wo)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||m.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||m.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||m.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Ti(e,t,!1),ge.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let r=dh(this.hostnameAndPort);if(r)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Ti(e,r,!1),ge.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let o=wa(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!o?(this.logger.verbose("Found cloud discovery metadata in the cache."),ge.CACHE):(o&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===be.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=ii(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),P(Yt)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${m.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},o=null;try{let r=yield this.networkInterface.sendGetRequestAsync(e,t),i,a;if(fh(r.body))i=r.body,a=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(mh(r.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),i=r.body,i.error===m.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=ii(a,this.hostnameAndPort)}catch(r){if(r instanceof E)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${r.errorCode}
Error Description: ${r.errorMessage}`);else{let i=r;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&R.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let o;if(t&&t.azureCloudInstance!==$t.None){let r=t.tenant?t.tenant:m.DEFAULT_COMMON_TENANT;o=`${t.azureCloudInstance}/${r}/`}return o||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return m.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw p(Ce)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return ic.has(e)}static isPublicCloudAuthority(e){return m.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,o){let r=new R(e);r.validateAsUri();let i=r.getUrlComponents(),a=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(a=`${t}.${m.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let s=R.constructAuthorityUriFromObject(A(C({},r.getUrlComponents()),{HostNameAndPort:a})).urlString;return o?`${s}?${o}`:s}static replaceWithRegionalInformation(e,t){let o=C({},e);return o.authorization_endpoint=n.buildRegionalAuthorityString(o.authorization_endpoint,t),o.token_endpoint=n.buildRegionalAuthorityString(o.token_endpoint,t),o.end_session_endpoint&&(o.end_session_endpoint=n.buildRegionalAuthorityString(o.end_session_endpoint,t)),o}static transformCIAMAuthority(e){let t=e,r=new R(e).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(m.CIAM_AUTH_URL)){let i=r.HostNameAndPort.split(".")[0];t=`${t}${i}${m.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Be.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Fe.COMMON,Fe.CONSUMERS,Fe.ORGANIZATIONS]);function gh(n){let o=new R(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(o){case Fe.COMMON:case Fe.ORGANIZATIONS:case Fe.CONSUMERS:return;default:return o}}function Ia(n){return n.endsWith(m.FORWARD_SLASH)?n:`${n}${m.FORWARD_SLASH}`}function ad(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw P(Yt)}return{canonicalAuthority:n.authority?Ia(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function sd(n,e,t,o,r,i,a){return l(this,null,function*(){a?.addQueueMeasurement(c.AuthorityFactoryCreateDiscoveredInstance,i);let s=Be.transformCIAMAuthority(Ia(n)),d=new Be(s,e,t,o,r,i,a);try{return yield f(d.resolveEndpointsAsync.bind(d),c.AuthorityResolveEndpointsAsync,r,a,i)(),d}catch{throw p(Ce)}})}var we=class n extends E{constructor(e,t,o,r,i){super(e,t,o),this.name="ServerError",this.errorNo=r,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function Pt(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var xt=class n{static generateThrottlingStorageKey(e){return`${yt.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,o){let r=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(r);if(i){if(i.throttleTime<Date.now()){e.removeItem(r,o);return}throw new we(i.errorCodes?.join(" ")||m.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,o,r){if(n.checkResponseStatus(o)||n.checkResponseForRetryAfter(o)){let i={throttleTime:n.calculateThrottleTime(parseInt(o.headers[X.RETRY_AFTER])),error:o.body.error,errorCodes:o.body.error_codes,errorMessage:o.body.error_description,subError:o.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,r)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(X.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,o=Date.now()/1e3;return Math.floor(Math.min(o+(t||yt.DEFAULT_THROTTLE_TIME_SECONDS),o+yt.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,o,r){let i=Pt(t,o,r),a=this.generateThrottlingStorageKey(i);e.removeItem(a,o.correlationId)}};var Pr=class n extends E{constructor(e,t,o){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=o}};function or(n,e,t,o){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${o?.name}, error.message:${o?.message}`,new Pr(n,e,t)}var Zt=class{constructor(e,t){this.config=lh(e),this.logger=new ye(this.config.loggerOptions,ha,Tr),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[X.CONTENT_TYPE]=m.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case fe.HOME_ACCOUNT_ID:try{let o=et(e.credential);t[X.CCS_HEADER]=`Oid:${o.uid}@${o.utid}`}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case fe.UPN:t[X.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,o,r,i,a){return l(this,null,function*(){a&&this.performanceClient?.addQueueMeasurement(a,i);let s=yield this.sendPostRequest(r,e,{body:t,headers:o},i);return this.config.serverTelemetryManager&&s.status<500&&s.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),s})}sendPostRequest(e,t,o,r){return l(this,null,function*(){xt.preProcess(this.cacheManager,e,r);let i;try{i=yield f(this.networkClient.sendPostRequestAsync.bind(this.networkClient),c.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,r)(t,o);let a=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:a[X.X_MS_HTTP_VERSION]||"",requestId:a[X.X_MS_REQUEST_ID]||""},r)}catch(a){if(a instanceof Pr){let s=a.responseHeaders;throw s&&this.performanceClient?.addFields({httpVerToken:s[X.X_MS_HTTP_VERSION]||"",requestId:s[X.X_MS_REQUEST_ID]||"",contentTypeHeader:s[X.CONTENT_TYPE]||void 0,contentLengthHeader:s[X.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},r),a.error}throw a instanceof E?a:p(Ao)}return xt.postProcess(this.cacheManager,e,i,r),i})}updateAuthority(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.UpdateTokenEndpointAuthority,t);let o=`https://${e}/${this.authority.tenant}/`,r=yield sd(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r})}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&_t(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Rt(t,e.tokenQueryParameters),er(t,e.correlationId),Yo(t,e.correlationId,this.performanceClient),tt(t)}};var nt={};Ee(nt,{badToken:()=>to,consentRequired:()=>dd,interactionRequired:()=>cd,loginRequired:()=>ld,nativeAccountUnavailable:()=>Ei,noTokensFound:()=>eo,refreshTokenExpired:()=>wi,uxNotAllowed:()=>Ra});var eo="no_tokens_found",Ei="native_account_unavailable",wi="refresh_token_expired",Ra="ux_not_allowed",cd="interaction_required",dd="consent_required",ld="login_required",to="bad_token";var Ch=[cd,dd,ld,to,Ra],Dm=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],_a={[eo]:"No refresh token found in the cache. Please sign-in.",[Ei]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[wi]:"Refresh token has expired.",[to]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Ra]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},yh={noTokensFoundError:{code:eo,desc:_a[eo]},native_account_unavailable:{code:Ei,desc:_a[Ei]},bad_token:{code:to,desc:_a[to]}},ce=class n extends E{constructor(e,t,o,r,i,a,s,d){super(e,t,o),Object.setPrototypeOf(this,n.prototype),this.timestamp=r||m.EMPTY_STRING,this.traceId=i||m.EMPTY_STRING,this.correlationId=a||m.EMPTY_STRING,this.claims=s||m.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=d}};function Pa(n,e,t){let o=!!n&&Ch.indexOf(n)>-1,r=!!t&&Dm.indexOf(t)>-1,i=!!e&&Ch.some(a=>e.indexOf(a)>-1);return o||i||r}function rr(n){return new ce(n,_a[n])}var ze=class n{static setRequestState(e,t,o){let r=n.generateLibraryState(e,o);return t?`${r}${m.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw p(Wt);let o={id:e.createNewGuid()};t&&(o.meta=t);let r=JSON.stringify(o);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw p(Wt);if(!t)throw p(Ke);try{let o=t.split(m.RESOURCE_DELIM),r=o[0],i=o.length>1?o.slice(1).join(m.RESOURCE_DELIM):m.EMPTY_STRING,a=e.base64Decode(r),s=JSON.parse(a);return{userRequestState:i||m.EMPTY_STRING,libraryState:s}}catch{throw p(Ke)}}};var Lm={SW:"sw"},Ie=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.PopTokenGenerateCnf,e.correlationId);let o=yield f(this.generateKid.bind(this),c.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}})}generateKid(e){return l(this,null,function*(){return this.performanceClient?.addQueueMeasurement(c.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Lm.SW}})}signPopToken(e,t,o){return l(this,null,function*(){return this.signPayload(e,t,o)})}signPayload(e,t,o,r){return l(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:a,shrClaims:s,shrNonce:d,shrOptions:u}=o,g=(a?new R(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(C({at:e,ts:Pe(),m:i?.toUpperCase(),u:g?.HostNameAndPort,nonce:d||this.cryptoUtils.createNewGuid(),p:g?.AbsolutePath,q:g?.QueryString?[[],g.QueryString]:void 0,client_claims:s||void 0},r),t,u,o.correlationId)})}};var xa=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Ge=class n{constructor(e,t,o,r,i,a,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=o,this.logger=r,this.serializableCache=i,this.persistencePlugin=a,this.performanceClient=s}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let o=`Error(s): ${e.error_codes||m.NOT_AVAILABLE} - Timestamp: ${e.timestamp||m.NOT_AVAILABLE} - Description: ${e.error_description||m.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||m.NOT_AVAILABLE} - Trace ID: ${e.trace_id||m.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,i=new we(e.error,o,e.suberror,r,e.status);if(t&&e.status&&e.status>=He.SERVER_ERROR_RANGE_START&&e.status<=He.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=He.CLIENT_ERROR_RANGE_START&&e.status<=He.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Pa(e.error,e.error_description,e.suberror)?new ce(e.error,e.error_description,e.suberror,e.timestamp||m.EMPTY_STRING,e.trace_id||m.EMPTY_STRING,e.correlation_id||m.EMPTY_STRING,e.claims||m.EMPTY_STRING,r):i}}handleServerTokenResponse(e,t,o,r,i,a,s,d,u){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.HandleServerTokenResponse,e.correlation_id);let h;if(e.id_token){if(h=Et(e.id_token||m.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&h.nonce!==i.nonce)throw p(Io);if(r.maxAge||r.maxAge===0){let M=h.auth_time;if(!M)throw p(vt);ni(M,r.maxAge)}}this.homeAccountIdentifier=B.generateHomeAccountId(e.client_info||m.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,h);let g;i&&i.state&&(g=ze.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||r.sshKid||void 0;let y=this.generateCacheRecord(e,t,o,r,h,a,i),T;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),T=new xa(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(T)),s&&!d&&y.account){let M=this.cacheStorage.generateAccountKey(B.getAccountInfo(y.account));if(!this.cacheStorage.getAccount(M,r.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,y,!1,r,h,g,void 0,u)}yield this.cacheStorage.saveCacheRecord(y,r.correlationId,tc(h||{}),r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&T&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(T))}return n.generateAuthenticationResult(this.cryptoObj,t,y,!1,r,h,g,e,u)})}generateCacheRecord(e,t,o,r,i,a,s){let d=t.getPreferredCache();if(!d)throw p(kt);let u=$o(i),h,g;e.id_token&&i&&(h=rd(this.homeAccountIdentifier,d,e.id_token,this.clientId,u||""),g=xr(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,i,e.client_info,d,u,s,void 0,this.logger));let y=null;if(e.access_token){let x=e.scope?G.fromString(e.scope):new G(r.scopes||[]),ue=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,Ue=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,K=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,me=o+ue,ho=me+Ue,fo=K&&K>0?o+K:void 0;y=nd(this.homeAccountIdentifier,d,e.access_token,this.clientId,u||t.tenant||"",x.printScopes(),me,ho,this.cryptoObj.base64Decode,fo,e.token_type,a,e.key_id,r.claims,r.requestedClaimsHash)}let T=null;if(e.refresh_token){let x;if(e.refresh_token_expires_in){let ue=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;x=o+ue}T=id(this.homeAccountIdentifier,d,e.refresh_token,this.clientId,e.foci,a,x)}let M=null;return e.foci&&(M={clientId:this.clientId,environment:d,familyId:e.foci}),{account:g,idToken:h,accessToken:y,refreshToken:T,appMetadata:M}}static generateAuthenticationResult(e,t,o,r,i,a,s,d,u){return l(this,null,function*(){let h=m.EMPTY_STRING,g=[],y=null,T,M,x=m.EMPTY_STRING;if(o.accessToken){if(o.accessToken.tokenType===_.POP&&!i.popKid){let me=new Ie(e),{secret:ho,keyId:fo}=o.accessToken;if(!fo)throw p(Do);h=yield me.signPopToken(ho,fo,i)}else h=o.accessToken.secret;g=G.fromString(o.accessToken.target).asArray(),y=Ai(o.accessToken.expiresOn),T=Ai(o.accessToken.extendedExpiresOn),o.accessToken.refreshOn&&(M=Ai(o.accessToken.refreshOn))}o.appMetadata&&(x=o.appMetadata.familyId===yo?yo:"");let ue=a?.oid||a?.sub||"",Ue=a?.tid||"";d?.spa_accountid&&o.account&&(o.account.nativeAccountId=d?.spa_accountid);let K=o.account?Vo(B.getAccountInfo(o.account),void 0,a,o.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:ue,tenantId:Ue,scopes:g,account:K,idToken:o?.idToken?.secret||"",idTokenClaims:a||{},accessToken:h,fromCache:r,expiresOn:y,extExpiresOn:T,refreshOn:M,correlationId:i.correlationId,requestId:u||m.EMPTY_STRING,familyId:x,tokenType:o.accessToken?.tokenType||m.EMPTY_STRING,state:s?s.userRequestState:m.EMPTY_STRING,cloudGraphHostName:o.account?.cloudGraphHostName||m.EMPTY_STRING,msGraphHost:o.account?.msGraphHost||m.EMPTY_STRING,code:d?.spa_code,fromNativeBroker:!1}})}};function xr(n,e,t,o,r,i,a,s,d,u,h,g){g?.verbose("setCachedAccount called");let T=n.getAccountKeys().find(K=>K.startsWith(t)),M=null;T&&(M=n.getAccount(T,r));let x=M||B.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:a,environment:s,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:h},e,o),ue=x.tenantProfiles||[],Ue=d||x.realm;if(Ue&&!ue.find(K=>K.tenantId===Ue)){let K=Qt(t,x.localAccountId,Ue,i);ue.push(K)}return x.tenantProfiles=ue,x}function Oa(n,e,t){return l(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var nr=class extends Zt{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){return l(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(c.AuthClientAcquireToken,e.correlationId),!e.code)throw p(_o);let o=Pe(),r=yield f(this.executeTokenRequest.bind(this),c.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=r.headers?.[X.X_MS_REQUEST_ID],a=new Ge(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(r.body),f(a.handleServerTokenResponse.bind(a),c.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,o,e,t,void 0,void 0,void 0,i)})}getLogoutUri(e){if(!e)throw P(zo);let t=this.createLogoutUrlQueryString(e);return R.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthClientExecuteTokenRequest,t.correlationId);let o=this.createTokenQueryParameters(t),r=R.appendQueryString(e.tokenEndpoint,o),i=yield f(this.createTokenRequestBody.bind(this),c.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),a;if(t.clientInfo)try{let u=Er(t.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ct.CLIENT_INFO_SEPARATOR}${u.utid}`,type:fe.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let s=this.createTokenRequestHeaders(a||t.ccsCredential),d=Pt(this.config.authOptions.clientId,t);return f(this.executePostToTokenEndpoint.bind(this),c.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(r,i,s,d,t.correlationId,c.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Jo(t,e.embeddedClientId||e.tokenBodyParameters?.[rt]||this.config.authOptions.clientId),this.includeRedirectUri)Xo(t,e.redirectUri);else if(!e.redirectUri)throw P(Lo);if(Qo(t,e.scopes,!0,this.oidcDefaultScopes),Xc(t,e.code),li(t,this.config.libraryInfo),ui(t,this.config.telemetry.application),ki(t),this.serverTelemetryManager&&!ga(this.config)&&bi(t,this.serverTelemetryManager),e.codeVerifier&&ed(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&fi(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;mi(t,yield Oa(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pi(t,r.assertionType)}if(gi(t,In.AUTHORIZATION_CODE_GRANT),tr(t),e.authenticationScheme===_.POP){let r=new Ie(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield f(r.generateCnf.bind(r),c.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,yi(t,i)}else if(e.authenticationScheme===_.SSH)if(e.sshJwk)vi(t,e.sshJwk);else throw P(Tt);(!D.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Zo(t,e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{let r=Er(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${r.uid}${Ct.CLIENT_INFO_SEPARATOR}${r.utid}`,type:fe.HOME_ACCOUNT_ID}}catch(r){this.logger.verbose("Could not parse client info for CCS Header: "+r)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case fe.HOME_ACCOUNT_ID:try{let r=et(o.credential);St(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case fe.UPN:Xt(t,o.credential);break}return e.embeddedClientId&&_t(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Rt(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ba])&&Rt(t,{[ba]:"1"}),Yo(t,e.correlationId,this.performanceClient),tt(t)})}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&$c(t,e.postLogoutRedirectUri),e.correlationId&&er(t,e.correlationId),e.idTokenHint&&jc(t,e.idTokenHint),e.state&&hi(t,e.state),e.logoutHint&&td(t,e.logoutHint),e.extraQueryParameters&&Rt(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Ci(t),tt(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var Um=300,Ii=class extends Zt{constructor(e,t){super(e,t)}acquireToken(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RefreshTokenClientAcquireToken,e.correlationId);let t=Pe(),o=yield f(this.executeTokenRequest.bind(this),c.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=o.headers?.[X.X_MS_REQUEST_ID],i=new Ge(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(o.body),f(i.handleServerTokenResponse.bind(i),c.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)})}acquireTokenByRefreshToken(e){return l(this,null,function*(){if(!e)throw P(Ko);if(this.performanceClient?.addQueueMeasurement(c.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw p(bt);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield f(this.acquireTokenWithCachedRefreshToken.bind(this),c.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){let r=o instanceof ce&&o.errorCode===eo,i=o instanceof we&&o.errorCode===sa.INVALID_GRANT_ERROR&&o.subError===sa.CLIENT_MISMATCH_ERROR;if(r||i)return f(this.acquireTokenWithCachedRefreshToken.bind(this),c.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return f(this.acquireTokenWithCachedRefreshToken.bind(this),c.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let o=q(this.cacheManager.getRefreshToken.bind(this.cacheManager),c.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!o)throw rr(eo);if(o.expiresOn&&Rr(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||Um))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),rr(wi);let r=A(C({},e),{refreshToken:o.secret,authenticationScheme:e.authenticationScheme||_.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:fe.HOME_ACCOUNT_ID}});try{return yield f(this.acquireToken.bind(this),c.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(r)}catch(i){if(i instanceof ce&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),i.subError===to)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=this.cacheManager.generateCredentialKey(o);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw i}})}executeTokenRequest(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RefreshTokenClientExecuteTokenRequest,e.correlationId);let o=this.createTokenQueryParameters(e),r=R.appendQueryString(t.tokenEndpoint,o),i=yield f(this.createTokenRequestBody.bind(this),c.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s=Pt(this.config.authOptions.clientId,e);return f(this.executePostToTokenEndpoint.bind(this),c.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(r,i,a,s,e.correlationId,c.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Jo(t,e.embeddedClientId||e.tokenBodyParameters?.[rt]||this.config.authOptions.clientId),e.redirectUri&&Xo(t,e.redirectUri),Qo(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),gi(t,In.REFRESH_TOKEN_GRANT),tr(t),li(t,this.config.libraryInfo),ui(t,this.config.telemetry.application),ki(t),this.serverTelemetryManager&&!ga(this.config)&&bi(t,this.serverTelemetryManager),Zc(t,e.refreshToken),this.config.clientCredentials.clientSecret&&fi(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;mi(t,yield Oa(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pi(t,o.assertionType)}if(e.authenticationScheme===_.POP){let o=new Ie(this.cryptoUtils,this.performanceClient),r;e.popKid?r=this.cryptoUtils.encodeKid(e.popKid):r=(yield f(o.generateCnf.bind(o),c.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,yi(t,r)}else if(e.authenticationScheme===_.SSH)if(e.sshJwk)vi(t,e.sshJwk);else throw P(Tt);if((!D.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Zo(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case fe.HOME_ACCOUNT_ID:try{let o=et(e.ccsCredential.credential);St(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case fe.UPN:Xt(t,e.ccsCredential.credential);break}return e.embeddedClientId&&_t(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Rt(t,e.tokenBodyParameters),Yo(t,e.correlationId,this.performanceClient),tt(t)})}};var Si=class extends Zt{constructor(e,t){super(e,t)}acquireCachedToken(e){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Xe.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!D.isEmptyObj(e.claims))throw this.setCacheOutcome(Xe.FORCE_REFRESH_OR_CLAIMS,e.correlationId),p(At);if(!e.account)throw p(bt);let o=e.account.tenantId||gh(e.authority),r=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,r,o);if(i){if(od(i.cachedAt)||Rr(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Xe.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),p(At);i.refreshOn&&Rr(i.refreshOn,0)&&(t=Xe.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Xe.NO_CACHED_ACCESS_TOKEN,e.correlationId),p(At);let a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,r,o,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield f(this.generateResultFromCacheRecord.bind(this),c.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(s,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==Xe.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return l(this,null,function*(){this.performanceClient?.addQueueMeasurement(c.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let o;if(e.idToken&&(o=Et(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let r=o?.auth_time;if(!r)throw p(vt);ni(r,t.maxAge)}return Ge.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,o)})}};var ud={sendGetRequestAsync:()=>Promise.reject(p(S)),sendPostRequestAsync:()=>Promise.reject(p(S))};var it={};Ee(it,{getAuthorizationCodePayload:()=>Km,getAuthorizeUrl:()=>Fm,getStandardAuthorizeRequestParameters:()=>Hm,validateAuthorizationResponse:()=>vh});function Hm(n,e,t,o){let r=e.correlationId,i=new Map;Jo(i,e.embeddedClientId||e.extraQueryParameters?.[rt]||n.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Qo(i,a,!0,n.authority.options.OIDCOptions?.defaultScopes),Xo(i,e.redirectUri),er(i,r),Vc(i,e.responseMode),tr(i),e.prompt&&(Qc(i,e.prompt),o?.addFields({prompt:e.prompt},r)),e.domainHint&&(Yc(i,e.domainHint),o?.addFields({domainHintFromRequest:!0},r)),e.prompt!==z.SELECT_ACCOUNT)if(e.sid&&e.prompt===z.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Aa(i,e.sid),o?.addFields({sidFromRequest:!0},r);else if(e.account){let s=Gm(e.account),d=qm(e.account);if(d&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),d=null),d){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Sr(i,d),o?.addFields({loginHintFromClaim:!0},r);try{let u=et(e.account.homeAccountId);St(i,u)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===z.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Aa(i,s),o?.addFields({sidFromClaim:!0},r);try{let u=et(e.account.homeAccountId);St(i,u)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Sr(i,e.loginHint),Xt(i,e.loginHint),o?.addFields({loginHintFromRequest:!0},r);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Sr(i,e.account.username),o?.addFields({loginHintFromUpn:!0},r);try{let u=et(e.account.homeAccountId);St(i,u)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Sr(i,e.loginHint),Xt(i,e.loginHint),o?.addFields({loginHintFromRequest:!0},r));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Jc(i,e.nonce),e.state&&hi(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Zo(i,e.claims,n.clientCapabilities),e.embeddedClientId&&_t(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Ir))&&Ci(i),i}function Fm(n,e,t,o){let r=tt(e,t,o);return R.appendQueryString(n.authorizationEndpoint,r)}function Km(n,e){if(vh(n,e),!n.code)throw p(No);return n}function vh(n,e){if(!n.state||!e)throw n.state?p(Gt,"Cached State"):p(Gt,"Server State");let t,o;try{t=decodeURIComponent(n.state)}catch{throw p(Ke,n.state)}try{o=decodeURIComponent(e)}catch{throw p(Ke,n.state)}if(t!==o)throw p(wo);if(n.error||n.error_description||n.suberror){let r=zm(n);throw Pa(n.error,n.error_description,n.suberror)?new ce(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",r):new we(n.error||"",n.error_description,n.suberror,r)}}function zm(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function Gm(n){return n.idTokenClaims?.sid||null}function qm(n){return n.loginHint||n.idTokenClaims?.login_hint||null}var bh=",",kh="|";function Wm(n){let{skus:e,libraryName:t,libraryVersion:o,extensionName:r,extensionVersion:i}=n,a=new Map([[0,[t,o]],[2,[r,i]]]),s=[];if(e?.length){if(s=e.split(bh),s.length<4)return e}else s=Array.from({length:4},()=>kh);return a.forEach((d,u)=>{d.length===2&&d[0]?.length&&d[1]?.length&&Vm({skuArr:s,index:u,skuName:d[0],skuVersion:d[1]})}),s.join(bh)}function Vm(n){let{skuArr:e,index:t,skuName:o,skuVersion:r}=n;t>=e.length||(e[t]=[o,r].join(kh))}var ir=class n{constructor(e,t){this.cacheOutcome=Xe.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||m.EMPTY_STRING,this.wrapperVer=e.wrapperVer||m.EMPTY_STRING,this.telemetryCacheKey=ie.CACHE_KEY+Ct.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${ie.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],o=this.getNativeBrokerErrorCode();o?.length&&t.push(`broker_error=${o}`);let r=t.join(ie.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),a=[e,i].join(ie.VALUE_SEPARATOR);return[ie.SCHEMA_VERSION,a,r].join(ie.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),o=e.failedRequests.slice(0,2*t).join(ie.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(ie.VALUE_SEPARATOR),i=e.errors.length,a=t<i?ie.OVERFLOW_TRUE:ie.OVERFLOW_FALSE,s=[i,a].join(ie.VALUE_SEPARATOR);return[ie.SCHEMA_VERSION,e.cacheHits,o,r,s].join(ie.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=ie.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof E?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(ie.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),o=e.errors.length;if(t===o)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let r={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,o=0,r=0,i=e.errors.length;for(t=0;t<i;t++){let a=e.failedRequests[2*t]||m.EMPTY_STRING,s=e.failedRequests[2*t+1]||m.EMPTY_STRING,d=e.errors[t]||m.EMPTY_STRING;if(r+=a.toString().length+s.toString().length+d.length+3,r<ie.MAX_LAST_HEADER_BYTES)o+=1;else break}return o}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||m.EMPTY_STRING),e.push(this.regionSource||m.EMPTY_STRING),e.push(this.regionOutcome||m.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return Wm(e)}};var Ma="missing_kid_error",Na="missing_alg_error";var $m={[Ma]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Na]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},hd=class n extends E{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function fd(n){return new hd(n,$m[n])}var Ri=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw fd(Ma);if(!e.alg)throw fd(Na);let t=new n({typ:e.typ||la.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var ar="pkce_not_created",_i="ear_jwk_empty",Ba="ear_jwe_empty",sr="crypto_nonexistent",at="empty_navigate_uri",Or="hash_empty_error",oo="no_state_in_hash",Mr="hash_does_not_contain_known_properties",Nr="unable_to_parse_state",Br="state_interaction_type_mismatch",Dr="interaction_in_progress",Lr="popup_window_error",Ur="empty_window_error",qe="user_cancelled",Da="monitor_popup_timeout",Hr="monitor_window_timeout",Fr="redirect_in_iframe",Kr="block_iframe_reload",zr="block_nested_popups",La="iframe_closed_prematurely",st="silent_logout_unsupported",Gr="no_account_error",Ua="silent_prompt_value_error",qr="no_token_request_cache_error",Wr="unable_to_parse_token_request_cache_error",Ha="auth_request_not_set_error",Fa="invalid_cache_type",ct="non_browser_environment",dt="database_not_open",Ot="no_network_connectivity",Vr="post_request_failed",$r="get_request_failed",cr="failed_to_parse_response",jr="unable_to_load_token",ro="crypto_key_not_found",Yr="auth_code_required",Qr="auth_code_or_nativeAccountId_required",Jr="spa_code_and_nativeAccountId_present",no="database_unavailable",Xr="unable_to_acquire_token_from_native_platform",Zr="native_handshake_timeout",en="native_extension_not_installed",io="native_connection_not_established",lt="uninitialized_public_client_application",tn="native_prompt_not_supported",on="invalid_base64_string",rn="invalid_pop_token_request",Ka="failed_to_build_headers",za="failed_to_parse_headers",nn="failed_to_decrypt_ear_response",dr="timed_out";var Mt="For more visit: aka.ms/msaljs/browser-errors",w={[ar]:"The PKCE code challenge and verifier could not be generated.",[_i]:"No EAR encryption key provided. This is unexpected.",[Ba]:"Server response does not contain ear_jwe property. This is unexpected.",[sr]:"The crypto object or function is not available.",[at]:"Navigation URI is empty. Please check stack trace for more info.",[Or]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Mt}`,[oo]:"Hash does not contain state. Please verify that the request originated from msal.",[Mr]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Mt}`,[Nr]:"Unable to parse state. Please verify that the request originated from msal.",[Br]:"Hash contains state but the interaction type does not match the caller.",[Dr]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Mt}`,[Lr]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Ur]:"window.open returned null or undefined window object.",[qe]:"User cancelled the flow.",[Da]:`Token acquisition in popup failed due to timeout.  ${Mt}`,[Hr]:`Token acquisition in iframe failed due to timeout.  ${Mt}`,[Fr]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Kr]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Mt}`,[zr]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[La]:"The iframe being monitored was closed prematurely.",[st]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Gr]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Ua]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[qr]:"No token request found in cache.",[Wr]:"The cached token request could not be parsed.",[Ha]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Fa]:"Invalid cache type",[ct]:"Login and token requests are not supported in non-browser environments.",[dt]:"Database is not open!",[Ot]:"No network connectivity. Check your internet connection.",[Vr]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[$r]:"Network request failed. Please check the network trace to determine root cause.",[cr]:"Failed to parse network response. Check network trace.",[jr]:"Error loading token to cache.",[ro]:"Cryptographic Key or Keypair not found in browser storage.",[Yr]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Qr]:"An authorization code or nativeAccountId must be provided to this flow.",[Jr]:"Request cannot contain both spa code and native account id.",[no]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Xr]:`Unable to acquire token from native platform.  ${Mt}`,[Zr]:"Timed out while attempting to establish connection to browser extension",[en]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[io]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Mt}`,[lt]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Mt}`,[tn]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[on]:"Invalid base64 encoded string.",[rn]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Ka]:"Failed to build request headers object.",[za]:"Failed to parse response headers",[nn]:"Failed to decrypt ear response",[dr]:"The request timed out."},UE={pkceNotGenerated:{code:ar,desc:w[ar]},cryptoDoesNotExist:{code:sr,desc:w[sr]},emptyNavigateUriError:{code:at,desc:w[at]},hashEmptyError:{code:Or,desc:w[Or]},hashDoesNotContainStateError:{code:oo,desc:w[oo]},hashDoesNotContainKnownPropertiesError:{code:Mr,desc:w[Mr]},unableToParseStateError:{code:Nr,desc:w[Nr]},stateInteractionTypeMismatchError:{code:Br,desc:w[Br]},interactionInProgress:{code:Dr,desc:w[Dr]},popupWindowError:{code:Lr,desc:w[Lr]},emptyWindowError:{code:Ur,desc:w[Ur]},userCancelledError:{code:qe,desc:w[qe]},monitorPopupTimeoutError:{code:Da,desc:w[Da]},monitorIframeTimeoutError:{code:Hr,desc:w[Hr]},redirectInIframeError:{code:Fr,desc:w[Fr]},blockTokenRequestsInHiddenIframeError:{code:Kr,desc:w[Kr]},blockAcquireTokenInPopupsError:{code:zr,desc:w[zr]},iframeClosedPrematurelyError:{code:La,desc:w[La]},silentLogoutUnsupportedError:{code:st,desc:w[st]},noAccountError:{code:Gr,desc:w[Gr]},silentPromptValueError:{code:Ua,desc:w[Ua]},noTokenRequestCacheError:{code:qr,desc:w[qr]},unableToParseTokenRequestCacheError:{code:Wr,desc:w[Wr]},authRequestNotSet:{code:Ha,desc:w[Ha]},invalidCacheType:{code:Fa,desc:w[Fa]},notInBrowserEnvironment:{code:ct,desc:w[ct]},databaseNotOpen:{code:dt,desc:w[dt]},noNetworkConnectivity:{code:Ot,desc:w[Ot]},postRequestFailed:{code:Vr,desc:w[Vr]},getRequestFailed:{code:$r,desc:w[$r]},failedToParseNetworkResponse:{code:cr,desc:w[cr]},unableToLoadTokenError:{code:jr,desc:w[jr]},signingKeyNotFoundInStorage:{code:ro,desc:w[ro]},authCodeRequired:{code:Yr,desc:w[Yr]},authCodeOrNativeAccountRequired:{code:Qr,desc:w[Qr]},spaCodeAndNativeAccountPresent:{code:Jr,desc:w[Jr]},databaseUnavailable:{code:no,desc:w[no]},unableToAcquireTokenFromNativePlatform:{code:Xr,desc:w[Xr]},nativeHandshakeTimeout:{code:Zr,desc:w[Zr]},nativeExtensionNotInstalled:{code:en,desc:w[en]},nativeConnectionNotEstablished:{code:io,desc:w[io]},uninitializedPublicClientApplication:{code:lt,desc:w[lt]},nativePromptNotSupported:{code:tn,desc:w[tn]},invalidBase64StringError:{code:on,desc:w[on]},invalidPopTokenRequest:{code:rn,desc:w[rn]}},lr=class n extends E{constructor(e,t){super(e,w[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function v(n,e){return new lr(n,e)}var V={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ke={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},an={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},U={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},md={GET:"GET",POST:"POST"},We={SIGNIN:"signin",SIGNOUT:"signout"},$={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Pi={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},O={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},k=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(k||{}),j={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},pd={scopes:_e},gd="jwk",Cd={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Ga="msal.db",Ah=1,Th=`${Ga}.keys`,de={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},Eh=[de.Default,de.Skip,de.RefreshTokenAndNetwork];function xi(n){return encodeURIComponent(ao(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function De(n){return wh(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ao(n){return wh(new TextEncoder().encode(n))}function wh(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function re(n){return new TextDecoder().decode(ut(n))}function ut(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw v(on)}let t=atob(e);return Uint8Array.from(t,o=>o.codePointAt(0)||0)}var jm="RSASSA-PKCS1-v1_5",sn="AES-GCM",Rh="HKDF",vd="SHA-256",Ym=2048,Qm=new Uint8Array([1,0,1]),Ih="0123456789abcdef",Sh=new Uint32Array(1),bd="raw",_h="encrypt",kd="decrypt",Jm="deriveKey",Xm="crypto_subtle_undefined",Ad={name:jm,hash:vd,modulusLength:Ym,publicExponent:Qm};function Ph(n){if(!window)throw v(ct);if(!window.crypto)throw v(sr);if(!n&&!window.crypto.subtle)throw v(sr,Xm)}function Td(n,e,t){return l(this,null,function*(){e?.addQueueMeasurement(c.Sha256Digest,t);let r=new TextEncoder().encode(n);return window.crypto.subtle.digest(vd,r)})}function xh(n){return window.crypto.getRandomValues(n)}function yd(){return window.crypto.getRandomValues(Sh),Sh[0]}function se(){let n=Date.now(),e=yd()*1024+(yd()&1023),t=new Uint8Array(16),o=Math.trunc(e/2**30),r=e&2**30-1,i=yd();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|o>>>8,t[7]=o,t[8]=128|r>>>24,t[9]=r>>>16,t[10]=r>>>8,t[11]=r,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let a="";for(let s=0;s<t.length;s++)a+=Ih.charAt(t[s]>>>4),a+=Ih.charAt(t[s]&15),(s===3||s===5||s===7||s===9)&&(a+="-");return a}function Oh(n,e){return l(this,null,function*(){return window.crypto.subtle.generateKey(Ad,n,e)})}function qa(n){return l(this,null,function*(){return window.crypto.subtle.exportKey(gd,n)})}function Mh(n,e,t){return l(this,null,function*(){return window.crypto.subtle.importKey(gd,n,Ad,e,t)})}function Nh(n,e){return l(this,null,function*(){return window.crypto.subtle.sign(Ad,n,e)})}function cn(){return l(this,null,function*(){let n=yield Ed(),t={alg:"dir",kty:"oct",k:De(new Uint8Array(n))};return ao(JSON.stringify(t))})}function Zm(n){return l(this,null,function*(){let e=re(n),o=JSON.parse(e).k,r=ut(o);return window.crypto.subtle.importKey(bd,r,sn,!1,[kd])})}function Bh(n,e){return l(this,null,function*(){let t=e.split(".");if(t.length!==5)throw v(nn,"jwe_length");let o=yield Zm(n).catch(()=>{throw v(nn,"import_key")});try{let r=new TextEncoder().encode(t[0]),i=ut(t[2]),a=ut(t[3]),s=ut(t[4]),d=s.byteLength*8,u=new Uint8Array(a.length+s.length);u.set(a),u.set(s,a.length);let h=yield window.crypto.subtle.decrypt({name:sn,iv:i,tagLength:d,additionalData:r},o,u);return new TextDecoder().decode(h)}catch{throw v(nn,"decrypt")}})}function Ed(){return l(this,null,function*(){let n=yield window.crypto.subtle.generateKey({name:sn,length:256},!0,[_h,kd]);return window.crypto.subtle.exportKey(bd,n)})}function wd(n){return l(this,null,function*(){return window.crypto.subtle.importKey(bd,n,Rh,!1,[Jm])})}function Dh(n,e,t){return l(this,null,function*(){return window.crypto.subtle.deriveKey({name:Rh,salt:e,hash:vd,info:new TextEncoder().encode(t)},n,{name:sn,length:256},!1,[_h,kd])})}function Lh(n,e,t){return l(this,null,function*(){let o=new TextEncoder().encode(e),r=window.crypto.getRandomValues(new Uint8Array(16)),i=yield Dh(n,r,t),a=yield window.crypto.subtle.encrypt({name:sn,iv:new Uint8Array(12)},i,o);return{data:De(new Uint8Array(a)),nonce:De(r)}})}function Id(n,e,t,o){return l(this,null,function*(){let r=ut(o),i=yield Dh(n,ut(e),t),a=yield window.crypto.subtle.decrypt({name:sn,iv:new Uint8Array(12)},i,r);return new TextDecoder().decode(a)})}function Wa(n){return l(this,null,function*(){let e=yield Td(n),t=new Uint8Array(e);return De(t)})}var so="storage_not_supported",Va="stubbed_public_client_application_called",dn="in_mem_redirect_unavailable";var $a={[so]:"Given storage configuration option was not supported.",[Va]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[dn]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},ep={storageNotSupportedError:{code:so,desc:$a[so]},stubPcaInstanceCalled:{code:Va,desc:$a[Va]},inMemRedirectUnavailable:{code:dn,desc:$a[dn]}},ur=class n extends E{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function ln(n){return new ur(n,$a[n])}function Oi(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function Sd(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Mi(){return window.parent!==window}function Uh(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${V.POPUP_NAME_PREFIX}.`)===0}function Ae(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Rd(){let e=new R(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function Hh(){if(R.hashContainsKnownProperties(window.location.hash)&&Mi())throw v(Kr)}function Fh(n){if(Mi()&&!n)throw v(Fr)}function Kh(){if(Uh())throw v(zr)}function ja(){if(typeof window>"u")throw v(ct)}function Ya(n){if(!n)throw v(lt)}function Ni(n){ja(),Hh(),Kh(),Ya(n)}function Qa(n,e){if(Ni(n),Fh(e.system.allowRedirectInIframe),e.cache.cacheLocation===U.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw ln(dn)}function Bi(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function _d(){return se()}var tp=te.addClientCapabilitiesToClaims;var Di=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((o,r)=>{setTimeout(()=>{r(v(dr,"failed_to_redirect"))},t.timeout)})}};var Xa=class{sendGetRequestAsync(e,t){return l(this,null,function*(){let o,r={},i=0,a=zh(t);try{o=yield fetch(e,{method:md.GET,headers:a})}catch(s){throw or(v(window.navigator.onLine?$r:Ot),void 0,void 0,s)}r=Gh(o.headers);try{return i=o.status,{headers:r,body:yield o.json(),status:i}}catch(s){throw or(v(cr),i,r,s)}})}sendPostRequestAsync(e,t){return l(this,null,function*(){let o=t&&t.body||"",r=zh(t),i,a=0,s={};try{i=yield fetch(e,{method:md.POST,headers:r,body:o})}catch(d){throw or(v(window.navigator.onLine?Vr:Ot),void 0,void 0,d)}s=Gh(i.headers);try{return a=i.status,{headers:s,body:yield i.json(),status:a}}catch(d){throw or(v(cr),a,s,d)}})}};function zh(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([o,r])=>{e.append(o,r)}),e}catch(e){throw or(v(Ka),void 0,void 0,e)}}function Gh(n){try{let e={};return n.forEach((t,o)=>{e[o]=t}),e}catch{throw v(za)}}var op=6e4,Za=1e4,rp=3e4,Pd=2e3;function qh({auth:n,cache:e,system:t,telemetry:o},r){let i={clientId:m.EMPTY_STRING,authority:`${m.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:m.EMPTY_STRING,authorityMetadata:m.EMPTY_STRING,redirectUri:typeof window<"u"?Ae():"",postLogoutRedirectUri:m.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:L.AAD,OIDCOptions:{serverResponseType:Je.FRAGMENT,defaultScopes:[m.OPENID_SCOPE,m.PROFILE_SCOPE,m.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:$t.None,tenant:m.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},a={cacheLocation:U.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:U.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===U.LocalStorage),claimsBasedCachingEnabled:!1},s={loggerCallback:()=>{},logLevel:N.Info,piiLoggingEnabled:!1},d=A(C({},pa),{loggerOptions:s,networkClient:r?new Xa:ud,navigationClient:new Di,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||op,iframeHashTimeout:t?.loadFrameTimeout||Za,navigateFrameWait:0,redirectNavigationTimeout:rp,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||Pd,pollIntervalMilliseconds:V.DEFAULT_POLL_INTERVAL_MS}),u=A(C(C({},d),t),{loggerOptions:t?.loggerOptions||s}),h={application:{appName:m.EMPTY_STRING,appVersion:m.EMPTY_STRING},client:new wt};if(n?.protocolMode!==L.OIDC&&n?.OIDCOptions&&new ye(u.loggerOptions).warning(JSON.stringify(P(ve.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===L.OIDC&&u?.allowPlatformBroker)throw P(ve.cannotAllowPlatformBroker);return{auth:A(C(C({},i),n),{OIDCOptions:C(C({},i.OIDCOptions),n?.OIDCOptions)}),cache:C(C({},a),e),system:u,telemetry:C(C({},h),o)}}var Wh="@azure/msal-browser",xe="4.26.1";var ne="msal",es="browser",xd="|";var jh=`${ne}.${es}.log.level`,Yh=`${ne}.${es}.log.pii`,_w=`${ne}.${es}.performance.enabled`,Qh=`${ne}.${es}.platform.auth.dom`,Od=`${ne}.version`,Vh="account.keys",$h="token.keys";function Nt(n=2){return n<1?`${ne}.${Vh}`:`${ne}.${n}.${Vh}`}function Bt(n,e=2){return e<1?`${ne}.${$h}.${n}`:`${ne}.${e}.${$h}.${n}`}var ts=class n{static loggerCallback(e,t){switch(e){case N.Error:console.error(t);return;case N.Info:console.info(t);return;case N.Verbose:console.debug(t);return;case N.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=qh(e,this.browserEnvironment);let t;try{t=window[U.SessionStorage]}catch{}let o=t?.getItem(jh),r=t?.getItem(Yh)?.toLowerCase(),i=r==="true"?!0:r==="false"?!1:void 0,a=C({},this.config.system.loggerOptions),s=o&&Object.keys(N).includes(o)?N[o]:void 0;s&&(a.loggerCallback=n.loggerCallback,a.logLevel=s),i!==void 0&&(a.piiLoggingEnabled=i),this.logger=new ye(a,Wh,xe),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var os=(()=>{class n extends ts{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return l(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var rs=class{constructor(){this.dbName=Ga,this.version=Ah,this.tableName=Th,this.dbOpen=!1}open(){return l(this,null,function*(){return new Promise((e,t)=>{let o=window.indexedDB.open(this.dbName,this.version);o.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),o.addEventListener("success",r=>{let i=r;this.db=i.target.result,this.dbOpen=!0,e()}),o.addEventListener("error",()=>t(v(no)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return l(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return l(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,o)=>{if(!this.db)return o(v(dt));let a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);a.addEventListener("success",s=>{let d=s;this.closeConnection(),t(d.target.result)}),a.addEventListener("error",s=>{this.closeConnection(),o(s)})})})}setItem(e,t){return l(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((o,r)=>{if(!this.db)return r(v(dt));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);s.addEventListener("success",()=>{this.closeConnection(),o()}),s.addEventListener("error",d=>{this.closeConnection(),r(d)})})})}removeItem(e){return l(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,o)=>{if(!this.db)return o(v(dt));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);a.addEventListener("success",()=>{this.closeConnection(),t()}),a.addEventListener("error",s=>{this.closeConnection(),o(s)})})})}getKeys(){return l(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(v(dt));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",a=>{let s=a;this.closeConnection(),e(s.target.result)}),i.addEventListener("error",a=>{this.closeConnection(),t(a)})})})}containsKey(e){return l(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,o)=>{if(!this.db)return o(v(dt));let a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);a.addEventListener("success",s=>{let d=s;this.closeConnection(),t(d.target.result===1)}),a.addEventListener("error",s=>{this.closeConnection(),o(s)})})})}deleteDatabase(){return l(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let o=window.indexedDB.deleteDatabase(Ga),r=setTimeout(()=>t(!1),200);o.addEventListener("success",()=>(clearTimeout(r),e(!0))),o.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),o.addEventListener("error",()=>(clearTimeout(r),t(!1)))})})}};var Dt=class{constructor(){this.cache=new Map}initialize(){return l(this,null,function*(){})}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){return l(this,null,function*(){this.setItem(e,t)})}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,o)=>{e.push(o)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};var ns=class{constructor(e){this.inMemoryCache=new Dt,this.indexedDBCache=new rs,this.logger=e}handleDatabaseAccessError(e){if(e instanceof lr&&e.errorCode===no)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return l(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(o){this.handleDatabaseAccessError(o)}return t})}setItem(e,t){return l(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(o){this.handleDatabaseAccessError(o)}})}removeItem(e){return l(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return l(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return l(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(o){this.handleDatabaseAccessError(o)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return l(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var un=(()=>{class n{constructor(t,o,r){this.logger=t,Ph(r??!1),this.cache=new ns(this.logger),this.performanceClient=o}createNewGuid(){return se()}base64Encode(t){return ao(t)}base64Decode(t){return re(t)}base64UrlEncode(t){return xi(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return l(this,null,function*(){let o=this.performanceClient?.startMeasurement(c.CryptoOptsGetPublicKeyThumbprint,t.correlationId),r=yield Oh(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield qa(r.publicKey),a={e:i.e,kty:i.kty,n:i.n},s=Jh(a),d=yield this.hashString(s),u=yield qa(r.privateKey),h=yield Mh(u,!1,["sign"]);return yield this.cache.setItem(d,{privateKey:h,publicKey:r.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),o&&o.end({success:!0}),d})}removeTokenBindingKey(t){return l(this,null,function*(){if(yield this.cache.removeItem(t),yield this.cache.containsKey(t))throw p(ae.bindingKeyNotRemoved)})}clearKeystore(){return l(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,o,r,i){return l(this,null,function*(){let a=this.performanceClient?.startMeasurement(c.CryptoOptsSignJwt,i),s=yield this.cache.getItem(o);if(!s)throw v(ro);let d=yield qa(s.publicKey),u=Jh(d),h=xi(JSON.stringify({kid:o})),g=Ri.getShrHeaderString(A(C({},r?.header),{alg:d.alg,kid:h})),y=xi(g);t.cnf={jwk:JSON.parse(u)};let T=xi(JSON.stringify(t)),M=`${y}.${T}`,ue=new TextEncoder().encode(M),Ue=yield Nh(s.privateKey,ue),K=De(new Uint8Array(Ue)),me=`${M}.${K}`;return a&&a.end({success:!0}),me})}hashString(t){return l(this,null,function*(){return Wa(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function Jh(n){return JSON.stringify(n,Object.keys(n).sort())}var np=24*60*60*1e3,is={Lax:"Lax",None:"None"},hn=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,o=document.cookie.split(";");for(let r=0;r<o.length;r++){let i=o[r],[a,...s]=decodeURIComponent(i).trim().split("="),d=s.join("=");if(a===t)return d}return""}getUserData(){throw p(ae.methodNotImplemented)}setItem(e,t,o,r=!0,i=is.Lax){let a=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(o){let s=ip(o);a+=`expires=${s};`}(r||i===is.None)&&(a+="Secure;"),document.cookie=a}setUserData(){return l(this,null,function*(){return Promise.reject(p(ae.methodNotImplemented))})}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(o=>{let r=decodeURIComponent(o).trim().split("=");t.push(r[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}};function ip(n){let e=new Date;return new Date(e.getTime()+n*np).toUTCString()}function ht(n,e){let t=n.getItem(Nt(e));return t?JSON.parse(t):[]}function Oe(n,e,t){let o=e.getItem(Bt(n,t));if(o){let r=JSON.parse(o);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}function fn(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}var Xh="msal.cache.encryption",ap="msal.broadcast.cache",as=class{constructor(e,t,o){if(!window.localStorage)throw ln(so);this.memoryStorage=new Dt,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=o,this.broadcast=new BroadcastChannel(ap)}initialize(e){return l(this,null,function*(){let t=new hn,o=t.getItem(Xh),r={key:"",id:""};if(o)try{r=JSON.parse(o)}catch{}if(r.key&&r.id){let i=q(ut,c.Base64Decode,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:yield f(wd,c.GenerateHKDF,this.logger,this.performanceClient,e)(i)}}else{let i=se(),a=yield f(Ed,c.GenerateBaseKey,this.logger,this.performanceClient,e)(),s=q(De,c.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(a));this.encryptionCookie={id:i,key:yield f(wd,c.GenerateHKDF,this.logger,this.performanceClient,e)(a)};let d={id:i,key:s};t.setItem(Xh,JSON.stringify(d),0,!0,is.None)}yield f(this.importExistingCache.bind(this),c.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0})}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw v(lt);return this.memoryStorage.getItem(e)}decryptData(e,t,o){return l(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw v(lt);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},o),null;let r=yield f(Id,c.Decrypt,this.logger,this.performanceClient,o)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!r)return null;try{return A(C({},JSON.parse(r)),{lastUpdatedAt:t.lastUpdatedAt})}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},o),null}})}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,o,r,i){return l(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw v(lt);if(i)this.setItem(e,t);else{let{data:a,nonce:s}=yield f(Lh,c.Encrypt,this.logger,this.performanceClient,o)(this.encryptionCookie.key,t,this.getContext(e)),d={id:this.encryptionCookie.id,nonce:s,data:a,lastUpdatedAt:r};this.setItem(e,JSON.stringify(d))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),ht(this).forEach(o=>this.removeItem(o));let t=Oe(this.clientId,this);t.idToken.forEach(o=>this.removeItem(o)),t.accessToken.forEach(o=>this.removeItem(o)),t.refreshToken.forEach(o=>this.removeItem(o)),this.getKeys().forEach(o=>{(o.startsWith(ne)||o.indexOf(this.clientId)!==-1)&&this.removeItem(o)})}importExistingCache(e){return l(this,null,function*(){if(!this.encryptionCookie)return;let t=ht(this);t=yield this.importArray(t,e),t.length?this.setItem(Nt(),JSON.stringify(t)):this.removeItem(Nt());let o=Oe(this.clientId,this);o.idToken=yield this.importArray(o.idToken,e),o.accessToken=yield this.importArray(o.accessToken,e),o.refreshToken=yield this.importArray(o.refreshToken,e),o.idToken.length||o.accessToken.length||o.refreshToken.length?this.setItem(Bt(this.clientId),JSON.stringify(o)):this.removeItem(Bt(this.clientId))})}getItemFromEncryptedCache(e,t){return l(this,null,function*(){if(!this.encryptionCookie)return null;let o=this.getItem(e);if(!o)return null;let r;try{r=JSON.parse(o)}catch{return null}return fn(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),f(Id,c.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),o)})}importArray(e,t){return l(this,null,function*(){let o=[],r=[];return e.forEach(i=>{let a=this.getItemFromEncryptedCache(i,t).then(s=>{s?(this.memoryStorage.setItem(i,s),o.push(i)):this.removeItem(i)});r.push(a)}),yield Promise.all(r),o})}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(c.LocalStorageUpdated);t.add({isBackground:!0});let{key:o,value:r,context:i}=e.data;if(!o){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}r?(this.memoryStorage.setItem(o,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(o),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var ss=class{constructor(){if(!window.sessionStorage)throw ln(so)}initialize(){return l(this,null,function*(){})}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){return l(this,null,function*(){this.setItem(e,t)})}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};var b={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Lt(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var mn=class n extends jo{constructor(e,t,o,r,i,a,s){super(e,o,r,i,s),this.cacheConfig=t,this.logger=r,this.internalStorage=new Dt,this.browserStorage=Zh(e,t.cacheLocation,r,i),this.temporaryCacheStorage=Zh(e,t.temporaryCacheLocation,r,i),this.cookieStorage=new hn,this.eventHandler=a}initialize(e){return l(this,null,function*(){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),yield this.browserStorage.initialize(e),yield this.migrateExistingCache(e),this.trackVersionChanges(e)})}migrateExistingCache(e){return l(this,null,function*(){let t=ht(this.browserStorage),o=Oe(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:o.accessToken.length,preMigrateITCount:o.idToken.length,preMigrateRTCount:o.refreshToken.length},e);for(let i=0;i<2;i++){let a=i;yield this.removeStaleAccounts(i,a,e)}for(let i=0;i<2;i++){let a=i;yield this.migrateIdTokens(i,a,e)}let r=this.getKMSIValues();for(let i=0;i<2;i++)yield this.migrateAccessTokens(i,r,e),yield this.migrateRefreshTokens(i,r,e);t=ht(this.browserStorage),o=Oe(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:o.accessToken.length,postMigrateITCount:o.idToken.length,postMigrateRTCount:o.refreshToken.length},e)})}updateOldEntry(e,t){return l(this,null,function*(){let o=this.browserStorage.getItem(e),r=this.validateAndParseJson(o||"");if(!r)return this.browserStorage.removeItem(e),null;if(!r.lastUpdatedAt)r.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(r),t);else if(oe.isCacheExpired(r.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null;let i=fn(r)?yield this.browserStorage.decryptData(e,r,t):r;return!i||!W.isCredentialEntity(i)?(this.performanceClient.incrementFields({invalidCacheCount:1},t),null):(W.isAccessTokenEntity(i)||W.isRefreshTokenEntity(i))&&i.expiresOn&&oe.isTokenExpired(i.expiresOn,Rn)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):i})}removeStaleAccounts(e,t,o){return l(this,null,function*(){let r=ht(this.browserStorage,e);if(r.length!==0){for(let i of[...r]){this.performanceClient.incrementFields({oldAcntCount:1},o);let a=this.browserStorage.getItem(i),s=this.validateAndParseJson(a||"");if(!s){Lt(r,i);continue}if(s.lastUpdatedAt)oe.isCacheExpired(s.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(yield this.removeAccountOldSchema(i,s,t,o),Lt(r,i));else{s.lastUpdatedAt=Date.now().toString(),this.setItem(i,JSON.stringify(s),o);continue}}this.setAccountKeys(r,o,e)}})}removeAccountOldSchema(e,t,o,r){return l(this,null,function*(){let a=(fn(t)?yield this.browserStorage.decryptData(e,t,r):t)?.homeAccountId;if(a){let s=this.getTokenKeys(o);[...s.idToken].filter(d=>d.includes(a)).forEach(d=>{this.browserStorage.removeItem(d),Lt(s.idToken,d)}),[...s.accessToken].filter(d=>d.includes(a)).forEach(d=>{this.browserStorage.removeItem(d),Lt(s.accessToken,d)}),[...s.refreshToken].filter(d=>d.includes(a)).forEach(d=>{this.browserStorage.removeItem(d),Lt(s.refreshToken,d)}),this.setTokenKeys(s,r,o)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},r),this.browserStorage.removeItem(e)})}getKMSIValues(){let e={},t=this.getTokenKeys().idToken;for(let o of t){let r=this.browserStorage.getUserData(o);if(r){let i=JSON.parse(r),a=ee.extractTokenClaims(i.secret,re);a&&(e[i.homeAccountId]=ee.isKmsi(a))}}return e}migrateIdTokens(e,t,o){return l(this,null,function*(){let r=Oe(this.clientId,this.browserStorage,e);if(r.idToken.length===0)return;let i=Oe(this.clientId,this.browserStorage,2),a=ht(this.browserStorage),s=ht(this.browserStorage,t);for(let d of[...r.idToken]){this.performanceClient.incrementFields({oldITCount:1},o);let u=yield this.updateOldEntry(d,o);if(!u){Lt(r.idToken,d);continue}let h=a.find(K=>K.includes(u.homeAccountId)),g=s.find(K=>K.includes(u.homeAccountId)),y=null;if(h)y=this.getAccount(h,o);else if(g){let K=this.browserStorage.getItem(g),me=this.validateAndParseJson(K||"");y=me&&fn(me)?yield this.browserStorage.decryptData(g,me,o):me}if(!y){this.performanceClient.incrementFields({skipITMigrateCount:1},o);continue}let T=ee.extractTokenClaims(u.secret,re),M=this.generateCredentialKey(u),x=this.getIdTokenCredential(M,o),ue=Object.keys(T).includes("signin_state"),Ue=x&&Object.keys(ee.extractTokenClaims(x.secret,re)||{}).includes("signin_state");if(!x||u.lastUpdatedAt>x.lastUpdatedAt&&(ue||!Ue)){let K=y.tenantProfiles||[],me=$o(T)||y.realm;if(me&&!K.find(Rs=>Rs.tenantId===me)){let Rs=Qt(y.homeAccountId,y.localAccountId,me,T);K.push(Rs)}y.tenantProfiles=K;let ho=this.generateAccountKey(B.getAccountInfo(y)),fo=ee.isKmsi(T);yield this.setUserData(ho,JSON.stringify(y),o,y.lastUpdatedAt,fo),a.includes(ho)||a.push(ho),yield this.setUserData(M,JSON.stringify(u),o,u.lastUpdatedAt,fo),this.performanceClient.incrementFields({migratedITCount:1},o),i.idToken.push(M)}}this.setTokenKeys(r,o,e),this.setTokenKeys(i,o),this.setAccountKeys(a,o)})}migrateAccessTokens(e,t,o){return l(this,null,function*(){let r=Oe(this.clientId,this.browserStorage,e);if(r.accessToken.length===0)return;let i=Oe(this.clientId,this.browserStorage,2);for(let a of[...r.accessToken]){this.performanceClient.incrementFields({oldATCount:1},o);let s=yield this.updateOldEntry(a,o);if(!s){Lt(r.accessToken,a);continue}if(!Object.keys(t).includes(s.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},o);continue}let d=this.generateCredentialKey(s),u=t[s.homeAccountId];if(!i.accessToken.includes(d))yield this.setUserData(d,JSON.stringify(s),o,s.lastUpdatedAt,u),this.performanceClient.incrementFields({migratedATCount:1},o),i.accessToken.push(d);else{let h=this.getAccessTokenCredential(d,o);(!h||s.lastUpdatedAt>h.lastUpdatedAt)&&(yield this.setUserData(d,JSON.stringify(s),o,s.lastUpdatedAt,u),this.performanceClient.incrementFields({migratedATCount:1},o))}}this.setTokenKeys(r,o,e),this.setTokenKeys(i,o)})}migrateRefreshTokens(e,t,o){return l(this,null,function*(){let r=Oe(this.clientId,this.browserStorage,e);if(r.refreshToken.length===0)return;let i=Oe(this.clientId,this.browserStorage,2);for(let a of[...r.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},o);let s=yield this.updateOldEntry(a,o);if(!s){Lt(r.refreshToken,a);continue}if(!Object.keys(t).includes(s.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},o);continue}let d=this.generateCredentialKey(s),u=t[s.homeAccountId];if(!i.refreshToken.includes(d))yield this.setUserData(d,JSON.stringify(s),o,s.lastUpdatedAt,u),this.performanceClient.incrementFields({migratedRTCount:1},o),i.refreshToken.push(d);else{let h=this.getRefreshTokenCredential(d,o);(!h||s.lastUpdatedAt>h.lastUpdatedAt)&&(yield this.setUserData(d,JSON.stringify(s),o,s.lastUpdatedAt,u),this.performanceClient.incrementFields({migratedRTCount:1},o))}}this.setTokenKeys(r,o,e),this.setTokenKeys(i,o)})}trackVersionChanges(e){let t=this.browserStorage.getItem(Od);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==xe&&this.setItem(Od,xe,e)}validateAndParseJson(e){if(!e)return null;try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,o){let r=new Array(3).fill(0),i=[],a=20;for(let s=0;s<=a;s++)try{if(this.browserStorage.setItem(e,t),s>0)for(let d=0;d<=2;d++){let u=r.slice(0,d).reduce((g,y)=>g+y,0);if(u>=s)break;let h=s>u+r[d]?u+r[d]:s;s>u&&r[d]>0&&this.removeAccessTokenKeys(i.slice(u,h),o,d)}break}catch(d){let u=wr(d);if(u.errorCode===si.cacheQuotaExceeded&&s<a){if(!i.length)for(let h=0;h<=2;h++)if(e===Bt(this.clientId,h)){let g=JSON.parse(t).accessToken;i.push(...g),r[h]=g.length}else{let g=this.getTokenKeys(h).accessToken;i.push(...g),r[h]=g.length}if(i.length<=s)throw u;this.removeAccessToken(i[s],o,!1)}else throw u}}setUserData(e,t,o,r,i){return l(this,null,function*(){let a=new Array(3).fill(0),s=[],d=20;for(let u=0;u<=d;u++)try{if(yield f(this.browserStorage.setUserData.bind(this.browserStorage),c.SetUserData,this.logger,this.performanceClient)(e,t,o,r,i),u>0)for(let h=0;h<=2;h++){let g=a.slice(0,h).reduce((T,M)=>T+M,0);if(g>=u)break;let y=u>g+a[h]?g+a[h]:u;u>g&&a[h]>0&&this.removeAccessTokenKeys(s.slice(g,y),o,h)}break}catch(h){let g=wr(h);if(g.errorCode===si.cacheQuotaExceeded&&u<d){if(!s.length)for(let y=0;y<=2;y++){let T=this.getTokenKeys(y).accessToken;s.push(...T),a[y]=T.length}if(s.length<=u)throw g;this.removeAccessToken(s[u],o,!1)}else throw g}})}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let o=this.browserStorage.getUserData(e);if(!o)return this.removeAccountKeyFromMap(e,t),null;let r=this.validateAndParseJson(o);return!r||!B.isAccountEntity(r)?null:jo.toObject(new B,r)}setAccount(e,t,o){return l(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccount called");let r=this.generateAccountKey(B.getAccountInfo(e)),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(r,JSON.stringify(e),t,i,o);let a=this.addAccountKeyToMap(r,t);this.performanceClient.addFields({kmsi:o},t),this.cacheConfig.cacheLocation===U.LocalStorage&&a&&this.eventHandler.emitEvent(b.ACCOUNT_ADDED,void 0,B.getAccountInfo(e))})}getAccountKeys(){return ht(this.browserStorage)}setAccountKeys(e,t,o=2){e.length===0?this.removeItem(Nt(o)):this.setItem(Nt(o),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let o=this.getAccountKeys();return o.indexOf(e)===-1?(o.push(e),this.setItem(Nt(),JSON.stringify(o),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let o=this.getAccountKeys(),r=o.indexOf(e);r>-1?(o.splice(r,1),this.setAccountKeys(o,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){let o=this.getActiveAccount(t);o?.homeAccountId===e.homeAccountId&&o?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(r=>{r.includes(e.homeAccountId)&&r.includes(e.environment)&&this.browserStorage.removeItem(r)}),this.cacheConfig.cacheLocation===U.LocalStorage&&this.eventHandler.emitEvent(b.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);let o=this.getTokenKeys(),r=o.idToken.indexOf(e);r>-1&&(this.logger.info("idToken removed from tokenKeys map"),o.idToken.splice(r,1),this.setTokenKeys(o,t))}removeAccessToken(e,t,o=!0){super.removeAccessToken(e,t),o&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,o=2){this.logger.trace("removeAccessTokenKey called");let r=this.getTokenKeys(o),i=0;if(e.forEach(a=>{let s=r.accessToken.indexOf(a);s>-1&&(r.accessToken.splice(s,1),i++)}),i>0){this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),this.setTokenKeys(r,t,o);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);let o=this.getTokenKeys(),r=o.refreshToken.indexOf(e);r>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),o.refreshToken.splice(r,1),this.setTokenKeys(o,t))}getTokenKeys(e=2){return Oe(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,o=2){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Bt(this.clientId,o));return}else this.setItem(Bt(this.clientId,o),JSON.stringify(e),t)}getIdTokenCredential(e,t){let o=this.browserStorage.getUserData(e);if(!o)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let r=this.validateAndParseJson(o);return!r||!W.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e,t,o){return l(this,null,function*(){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(r,JSON.stringify(e),t,i,o);let a=this.getTokenKeys();a.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),a.idToken.push(r),this.setTokenKeys(a,t))})}getAccessTokenCredential(e,t){let o=this.browserStorage.getUserData(e);if(!o)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;let r=this.validateAndParseJson(o);return!r||!W.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e,t,o){return l(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(r,JSON.stringify(e),t,i,o);let a=this.getTokenKeys(),s=a.accessToken.indexOf(r);s!==-1&&a.accessToken.splice(s,1),this.logger.trace(`access token ${s===-1?"added to":"updated in"} map`),a.accessToken.push(r),this.setTokenKeys(a,t)})}getRefreshTokenCredential(e,t){let o=this.browserStorage.getUserData(e);if(!o)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;let r=this.validateAndParseJson(o);return!r||!W.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e,t,o){return l(this,null,function*(){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(r,JSON.stringify(e),t,i,o);let a=this.getTokenKeys();a.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),a.refreshToken.push(r),this.setTokenKeys(a,t))})}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let o=this.validateAndParseJson(t);return!o||!W.isAppMetadataEntity(e,o)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),o)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let o=W.generateAppMetadataKey(e);this.setItem(o,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let o=this.validateAndParseJson(t);return!o||!W.isServerTelemetryEntity(e,o)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),o)}setServerTelemetry(e,t,o){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),o)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let o=this.validateAndParseJson(t);return o&&W.isAuthorityMetadataEntity(e,o)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),o):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Pi.WRAPPER_SKU,e),this.internalStorage.setItem(Pi.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(Pi.WRAPPER_SKU)||m.EMPTY_STRING,t=this.internalStorage.getItem(Pi.WRAPPER_VER)||m.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(aa.ACTIVE_ACCOUNT_FILTERS),o=this.browserStorage.getItem(t);if(!o)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let r=this.validateAndParseJson(o);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let o=this.generateCacheKey(aa.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:oe.nowSeconds().toString()};this.setItem(o,JSON.stringify(r),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(o);this.eventHandler.emitEvent(b.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let o=this.validateAndParseJson(t);return!o||!W.isThrottlingEntity(e,o)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),o)}setThrottlingCache(e,t,o){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),o)}getTemporaryCache(e,t){let o=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let r=this.temporaryCacheStorage.getItem(o);if(!r){if(this.cacheConfig.cacheLocation===U.LocalStorage){let i=this.browserStorage.getItem(o);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,o){let r=o?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(ne)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(ne)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(c.ClearTokensAndKeysWithClaims,e);let t=this.getTokenKeys(),o=0;t.accessToken.forEach(r=>{let i=this.getAccessTokenCredential(r,e);i?.requestedClaimsHash&&r.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(r,e),o++)}),o>0&&this.logger.warning(`${o} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return D.startsWith(e,ne)?e:`${ne}.${this.clientId}.${e}`}generateCredentialKey(e){let t=e.credentialType===Z.REFRESH_TOKEN&&e.familyId||e.clientId,o=e.tokenType&&e.tokenType.toLowerCase()!==_.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${ne}.${2}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",o].join(xd).toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[`${ne}.${2}`,e.homeAccountId,e.environment,t||e.tenantId||""].join(xd).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey($.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey($.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey($.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey($.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey($.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let o=ao(JSON.stringify(e));if(this.setTemporaryCache($.REQUEST_PARAMS,o,!0),t){let r=ao(t);this.setTemporaryCache($.VERIFIER,r,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache($.REQUEST_PARAMS,!0);if(!e)throw v(qr);let t=this.getTemporaryCache($.VERIFIER,!0),o,r="";try{o=JSON.parse(re(e)),t&&(r=re(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),v(Wr)}return[o,r]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache($.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${ne}.${$.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),Oi(window),null}}setInteractionInProgress(e,t=We.SIGNIN){let o=`${ne}.${$.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw v(Dr);this.setTemporaryCache(o,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(o)}hydrateCache(e,t){return l(this,null,function*(){let o=W.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),r;t.claims&&(r=yield this.cryptoImpl.hashString(t.claims));let i=W.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?oe.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?oe.toSecondsFromDate(e.extExpiresOn):0,re,void 0,e.tokenType,void 0,t.sshKid,t.claims,r),a={idToken:o,accessToken:i};return this.saveCacheRecord(a,e.correlationId,ee.isKmsi(ee.extractTokenClaims(e.idToken,re)))})}saveCacheRecord(e,t,o,r){return l(this,null,function*(){try{yield _s(n.prototype,this,"saveCacheRecord").call(this,e,t,o,r)}catch(i){if(i instanceof Jt&&this.performanceClient&&t)try{let a=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},t)}catch{}throw i}})}};function Zh(n,e,t,o){try{switch(e){case U.LocalStorage:return new as(n,t,o);case U.SessionStorage:return new ss;case U.MemoryStorage:default:break}}catch(r){t.error(r)}return new Dt}var ef=(n,e,t,o)=>{let r={cacheLocation:U.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:U.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new mn(n,r,Vt,e,t,o)};function tf(n,e,t,o,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r||{},o):[]}function of(n,e,t,o){let r=t.getAccountInfoFilteredBy(n,o);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function rf(n,e,t,o){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let r=t.getAccountInfoFilteredBy({username:n},o);return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function nf(n,e,t,o){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let r=t.getAccountInfoFilteredBy({homeAccountId:n},o);return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function af(n,e,t,o){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let r=t.getAccountInfoFilteredBy({localAccountId:n},o);return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function sf(n,e,t){e.setActiveAccount(n,t)}function cf(n,e){return n.getActiveAccount(e)}var sp="msal.broadcast.event",cs=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ye({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(sp)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,o){if(typeof window<"u"){let r=o||_d();return this.eventCallbacks.has(r)?(this.logger.error(`Event callback with id: ${r} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${r}`),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,o,r){let i={eventType:e,interactionType:t||null,payload:o||null,error:r||null,timestamp:Date.now()};switch(e){case b.ACCOUNT_ADDED:case b.ACCOUNT_REMOVED:case b.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,o],r)=>{(o.length===0||o.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${r}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var pn=class{constructor(e,t,o,r,i,a,s,d,u){this.config=e,this.browserStorage=t,this.browserCrypto=o,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=a,this.platformAuthProvider=d,this.correlationId=u||se(),this.logger=r.clone(V.MSAL_SKU,xe,this.correlationId),this.performanceClient=s}clearCacheOnLogout(e,t){return l(this,null,function*(){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return R.getAbsoluteUrl(t,Ae())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let o={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ir(o,this.browserStorage)}getDiscoveredAuthority(e){return l(this,null,function*(){let{account:t}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(c.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,a=o?.length?o==="true":this.config.auth.instanceAware,s=t&&a?this.config.auth.authority.replace(R.getDomainFromUrl(i),t.environment):i,d=Be.generateAuthority(s,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=yield f(Sa.createDiscoveredInstance,c.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(d,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!u.isAlias(t.environment))throw P(ve.authorityMismatch);return u})}};function Li(n,e,t,o){return l(this,null,function*(){t.addQueueMeasurement(c.InitializeBaseRequest,n.correlationId);let r=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],a=A(C({},n),{correlationId:n.correlationId,authority:r,scopes:i});if(!a.authenticationScheme)a.authenticationScheme=_.BEARER,o.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(a.authenticationScheme===_.SSH){if(!n.sshJwk)throw P(ve.missingSshJwk);if(!n.sshKid)throw P(ve.missingSshKid)}o.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!D.isEmptyObj(n.claims)&&(a.requestedClaimsHash=yield Wa(n.claims)),a})}function df(n,e,t,o,r){return l(this,null,function*(){o.addQueueMeasurement(c.InitializeSilentRequest,n.correlationId);let i=yield f(Li,c.InitializeBaseRequest,r,o,n.correlationId)(n,t,o,r);return A(C(C({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}function ds(n,e){let t,o=n.httpMethod;if(e===L.EAR){if(t=o||Ne.POST,t!==Ne.POST)throw P(ve.invalidRequestMethodForEAR)}else t=o||Ne.GET;if(n.authorizePostBodyParameters&&t!==Ne.POST)throw P(ve.invalidAuthorizePostBodyParameters);return t}var Se=class extends pn{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=C({correlationId:this.correlationId||se()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let o=this.getLogoutHintFromIdTokenClaims(e.account);o&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=o)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=R.getAbsoluteUrl(e.postLogoutRedirectUri,Ae())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=R.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ae())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=R.getAbsoluteUrl(Ae(),Ae())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield f(this.getClientConfiguration.bind(this),c.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new nr(t,this.performanceClient)})}getClientConfiguration(e){return l(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:i,account:a}=e;this.performanceClient.addQueueMeasurement(c.StandardInteractionClientGetClientConfiguration,this.correlationId);let s=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:o,requestAzureCloudOptions:r,requestExtraQueryParameters:i,account:a}),d=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:d.loggerCallback,piiLoggingEnabled:d.piiLoggingEnabled,logLevel:d.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:V.MSAL_SKU,version:xe,cpu:m.EMPTY_STRING,os:m.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let o=this.getRedirectUri(e.redirectUri),r={interactionType:t},i=ze.setRequestState(this.browserCrypto,e&&e.state||m.EMPTY_STRING,r),a=yield f(Li,c.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(A(C({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),s=A(C({},a),{redirectUri:o,state:i,nonce:e.nonce||se(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),d=A(C({},s),{httpMethod:ds(s,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return d;let u=e.account||this.browserStorage.getActiveAccount(this.correlationId);return u&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${u.homeAccountId}`,this.correlationId),d.account=u),d})}};function lf(n,e){if(!e)return null;try{return ze.parseRequestState(n,e).libraryState.meta}catch{throw p(ae.invalidState)}}function hr(n,e,t){let o=ot.getDeserializedResponse(n);if(!o)throw ot.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),v(Mr)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),v(Or));return o}function uf(n,e,t){if(!n.state)throw v(oo);let o=lf(e,n.state);if(!o)throw v(Nr);if(o.interactionType!==t)throw v(Br)}var gn=class{constructor(e,t,o,r,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=o,this.logger=r,this.performanceClient=i}handleCodeResponse(e,t){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.HandleCodeResponse,t.correlationId);let o;try{o=it.getAuthorizationCodePayload(e,t.state)}catch(r){throw r instanceof we&&r.subError===qe?v(qe):r}return f(this.handleCodeResponseFromServer.bind(this),c.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(o,t)})}handleCodeResponseFromServer(e,t,o=!0){return l(this,null,function*(){if(this.performanceClient.addQueueMeasurement(c.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield f(this.authModule.updateAuthority.bind(this.authModule),c.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),o&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield f(this.authModule.acquireToken.bind(this.authModule),c.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:fe.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:fe.UPN}:null}};var hf="ContentError",ff="PageException",ls="user_switch";var mf="USER_INTERACTION_REQUIRED",pf="USER_CANCEL",gf="NO_NETWORK",Cf="DISABLED",yf="ACCOUNT_UNAVAILABLE",vf="UX_NOT_ALLOWED";var cp=-2147186943,dp={[ls]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},Le=class n extends E{constructor(e,t,o){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=o}};function co(n){if(n.ext&&n.ext.status&&n.ext.status===Cf||n.ext&&n.ext.error&&n.ext.error===cp)return!0;switch(n.errorCode){case hf:case ff:return!0;default:return!1}}function fr(n,e,t){if(t&&t.status)switch(t.status){case yf:return rr(nt.nativeAccountUnavailable);case mf:return new ce(n,e);case pf:return v(qe);case gf:return v(Ot);case vf:return rr(nt.uxNotAllowed)}return new Le(n,dp[n]||e,t)}var Cn=class extends Se{acquireToken(e){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(O.acquireTokenSilent_silentFlow),o=yield f(this.getClientConfiguration.bind(this),c.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Si(o,this.performanceClient);this.logger.verbose("Silent auth client created");try{let a=(yield f(r.acquireCachedToken.bind(r),c.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(i){throw i instanceof lr&&i.errorCode===ro&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}};var lo=class extends pn{constructor(e,t,o,r,i,a,s,d,u,h,g,y){super(e,t,o,r,i,a,d,u,y),this.apiId=s,this.accountId=h,this.platformAuthProvider=u,this.nativeStorageManager=g,this.silentCacheClient=new Cn(e,this.nativeStorageManager,o,r,i,a,d,u,y);let T=this.platformAuthProvider.getExtensionName();this.skus=ir.makeExtraSkuString({libraryName:V.MSAL_SKU,libraryVersion:xe,extensionName:T,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=A(C({},e.extraParameters),{[It.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e,t){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let o=this.performanceClient.startMeasurement(c.NativeInteractionClientAcquireToken,this.correlationId),r=oe.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let a=yield this.initializeNativeRequest(e);try{let d=yield this.acquireTokensFromCache(this.accountId,a);return o.end({success:!0,isNativeBroker:!1,fromCache:!0}),d}catch(d){if(t===de.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),o.end({success:!1,brokerErrorCode:"cache_request_failed"}),d;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let s=yield this.platformAuthProvider.sendMessage(a);return yield this.handleNativeResponse(s,a,r).then(d=>(o.end({success:!0,isNativeBroker:!0,requestId:d.requestId}),i.clearNativeBrokerErrorCode(),d)).catch(d=>{throw o.end({success:!1,errorCode:d.errorCode,subErrorCode:d.subError}),d})}catch(a){throw a instanceof Le&&i.setNativeBrokerErrorCode(a.errorCode),o.end({success:!1}),a}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:G.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return l(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),p(ae.noAccountFound);let o=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!o)throw p(ae.noAccountFound);try{let r=this.createSilentCacheRequest(t,o),i=yield this.silentCacheClient.acquireToken(r),a=A(C({},o),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return A(C({},i),{account:a})}catch(r){throw r}})}acquireTokenRedirect(e,t){return l(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let o=ft(e,[]);delete o.onRedirectNavigate;let r=yield this.initializeNativeRequest(o);try{yield this.platformAuthProvider.sendMessage(r)}catch(s){if(s instanceof Le&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(s.errorCode),co(s)))throw s}this.browserStorage.setTemporaryCache($.NATIVE_REQUEST,JSON.stringify(r),!0);let i={apiId:O.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,i)})}handleRedirectPromise(e,t){return l(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let o=this.browserStorage.getCachedNativeRequest();if(!o)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let s=o,{prompt:r}=s,i=ft(s,["prompt"]);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey($.NATIVE_REQUEST));let a=oe.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let d=yield this.platformAuthProvider.sendMessage(i),u=yield this.handleNativeResponse(d,i,a);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),u}catch(d){throw d}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,o){return l(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let r=ee.extractTokenClaims(e.id_token,re),i=this.createHomeAccountIdentifier(e,r),a=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==a&&e.account.id!==t.accountId)throw fr(ls);let s=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),d=xr(this.browserStorage,s,i,re,this.correlationId,r,e.client_info,void 0,r.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let u=yield this.generateAuthenticationResult(e,t,r,d,s.canonicalAuthority,o);return yield this.cacheAccount(d,this.correlationId,ee.isKmsi(r)),yield this.cacheNativeTokens(e,t,i,r,e.access_token,u.tenantId,o),u})}createHomeAccountIdentifier(e,t){return B.generateHomeAccountId(e.client_info||m.EMPTY_STRING,be.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?G.fromString(t):G.fromString(e)}generatePopAccessToken(e,t){return l(this,null,function*(){if(t.tokenType===_.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let o=new Ie(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw p(ae.keyIdMissing);return o.signPopToken(e.access_token,t.keyId,r)}else return e.access_token})}generateAuthenticationResult(e,t,o,r,i,a){return l(this,null,function*(){let s=this.addTelemetryFromNativeResponse(e.properties.MATS),d=this.generateScopes(t.scope,e.scope),u=e.account.properties||{},h=u.UID||o.oid||o.sub||m.EMPTY_STRING,g=u.TenantId||o.tid||m.EMPTY_STRING,y=Vo(B.getAccountInfo(r),void 0,o,e.id_token);y.nativeAccountId!==e.account.id&&(y.nativeAccountId=e.account.id);let T=yield this.generatePopAccessToken(e,t),M=t.tokenType===_.POP?_.POP:_.BEARER;return{authority:i,uniqueId:h,tenantId:g,scopes:d.asArray(),account:y,idToken:e.id_token,idTokenClaims:o,accessToken:T,fromCache:s?this.isResponseFromCache(s):!1,expiresOn:oe.toDateFromSeconds(a+e.expires_in),tokenType:M,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e,t,o){return l(this,null,function*(){yield this.browserStorage.setAccount(e,this.correlationId,o),this.browserStorage.removeAccountContext(B.getAccountInfo(e),t)})}cacheNativeTokens(e,t,o,r,i,a,s){let d=W.createIdTokenEntity(o,t.authority,e.id_token||"",t.clientId,r.tid||""),u=t.tokenType===_.POP?m.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,h=s+u,g=this.generateScopes(e.scope,t.scope),y=W.createAccessTokenEntity(o,t.authority,i,t.clientId,r.tid||a,g.printScopes(),h,0,re,void 0,t.tokenType,void 0,t.keyId),T={idToken:d,accessToken:y};return this.nativeStorageManager.saveCacheRecord(T,this.correlationId,ee.isKmsi(r),t.storeInCache)}getExpiresInValue(e,t){return e===_.POP?m.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return l(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=yield this.getCanonicalAuthority(e),s=e,{scopes:o}=s,r=ft(s,["scopes"]),i=new G(o||[]);i.appendScopes(_e);let a=A(C({},r),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:C(C({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(a.signPopToken&&e.popKid)throw v(rn);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=ke.MATS_TELEMETRY,e.authenticationScheme===_.POP){let d={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},u=new Ie(this.browserCrypto),h;if(a.keyId)h=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{let g=yield f(u.generateCnf.bind(u),c.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(d,this.logger);h=g.reqCnfString,a.keyId=g.kid,a.signPopToken=!0}a.reqCnf=h}return this.addRequestSKUs(a),a})}getCanonicalAuthority(e){return l(this,null,function*(){let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let o=new R(t);return o.validateAsUri(),o})}getPrompt(e){switch(this.apiId){case O.ssoSilent:case O.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),z.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case z.NONE:case z.CONSENT:case z.LOGIN:case z.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),v(tn)}}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(It.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(It.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(It.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let o="",r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,o=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[It.BROKER_REDIRECT_URI],o=e.extraParameters[It.CLIENT_ID]),e.extraParameters={child_client_id:o,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:o,embeddedRedirectUri:r},this.correlationId)}};function Nd(n,e,t,o,r){return l(this,null,function*(){let i=it.getStandardAuthorizeRequestParameters(A(C({},n.auth),{authority:e}),t,o,r);if(te.addLibraryInfo(i,{sku:V.MSAL_SKU,version:xe,os:"",cpu:""}),n.auth.protocolMode!==L.OIDC&&te.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&(te.addNativeBroker(i),r.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===_.POP)){let a=new un(o,r),s=new Ie(a),d;t.popKid?d=a.encodeKid(t.popKid):d=(yield f(s.generateCnf.bind(s),c.PopTokenGenerateCnf,o,r,t.correlationId)(t,o)).reqCnfString,te.addPopToken(i,d)}return te.instrumentBrokerParams(i,t.correlationId,r),i})}function yn(n,e,t,o,r){return l(this,null,function*(){if(!t.codeChallenge)throw P(ve.pkceParamsMissing);let i=yield f(Nd,c.GetStandardParams,o,r,t.correlationId)(n,e,t,o,r);return te.addResponseType(i,wn.CODE),te.addCodeChallengeParams(i,t.codeChallenge,m.S256_CODE_CHALLENGE_METHOD),te.addExtraQueryParameters(i,t.extraQueryParameters||{}),it.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})}function vn(n,e,t,o,r,i){return l(this,null,function*(){if(!o.earJwk)throw v(_i);let a=yield Nd(e,t,o,r,i);te.addResponseType(a,wn.IDTOKEN_TOKEN_REFRESHTOKEN),te.addEARParameters(a,o.earJwk);let s=new Map;te.addExtraQueryParameters(s,o.extraQueryParameters||{});let d=it.getAuthorizeUrl(t,s,e.auth.encodeExtraQueryParams,o.extraQueryParameters);return bf(n,d,a)})}function bn(n,e,t,o,r,i){return l(this,null,function*(){let a=yield Nd(e,t,o,r,i);te.addResponseType(a,wn.CODE),te.addCodeChallengeParams(a,o.codeChallenge,o.codeChallengeMethod||m.S256_CODE_CHALLENGE_METHOD),te.addPostBodyParameters(a,o.authorizePostBodyParameters||{});let s=new Map;te.addExtraQueryParameters(s,o.extraQueryParameters||{});let d=it.getAuthorizeUrl(t,s,e.auth.encodeExtraQueryParams,o.extraQueryParameters);return bf(n,d,a)})}function bf(n,e,t){let o=n.createElement("form");return o.method="post",o.action=e,t.forEach((r,i)=>{let a=n.createElement("input");a.hidden=!0,a.name=i,a.value=r,o.appendChild(a)}),n.body.appendChild(o),o}function kf(n,e,t,o,r,i,a,s,d,u){return l(this,null,function*(){if(s.verbose("Account id found, calling WAM for token"),!u)throw v(io);let h=new un(s,d),g=new lo(o,r,h,s,a,o.system.navigationClient,t,d,u,e,i,n.correlationId),{userRequestState:y}=ze.parseRequestState(h,n.state);return f(g.acquireToken.bind(g),c.NativeInteractionClientAcquireToken,s,d,n.correlationId)(A(C({},n),{state:y,prompt:void 0}))})}function mr(n,e,t,o,r,i,a,s,d,u,h,g){return l(this,null,function*(){if(xt.removeThrottle(a,r.auth.clientId,n),e.accountId)return f(kf,c.HandleResponsePlatformBroker,u,h,n.correlationId)(n,e.accountId,o,r,a,s,d,u,h,g);let y=A(C({},n),{code:e.code||"",codeVerifier:t}),T=new gn(i,a,y,u,h);return yield f(T.handleCodeResponse.bind(T),c.HandleCodeResponse,u,h,n.correlationId)(e,n)})}function kn(n,e,t,o,r,i,a,s,d,u,h){return l(this,null,function*(){if(xt.removeThrottle(i,o.auth.clientId,n),it.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw v(Ba);if(!n.earJwk)throw v(_i);let g=JSON.parse(yield f(Bh,c.DecryptEarResponse,d,u,n.correlationId)(n.earJwk,e.ear_jwe));if(g.accountId)return f(kf,c.HandleResponsePlatformBroker,d,u,n.correlationId)(n,g.accountId,t,o,i,a,s,d,u,h);let y=new Ge(o.auth.clientId,i,new un(d,u),d,null,null,u);y.validateTokenResponse(g);let T={code:"",state:n.state,nonce:n.nonce,client_info:g.client_info,cloud_graph_host_name:g.cloud_graph_host_name,cloud_instance_host_name:g.cloud_instance_host_name,cloud_instance_name:g.cloud_instance_name,msgraph_host:g.msgraph_host};return yield f(y.handleServerTokenResponse.bind(y),c.HandleServerTokenResponse,d,u,n.correlationId)(g,r,oe.nowSeconds(),n,T,void 0,void 0,void 0,void 0)})}var lp=32;function uo(n,e,t){return l(this,null,function*(){n.addQueueMeasurement(c.GeneratePkceCodes,t);let o=q(up,c.GenerateCodeVerifier,e,n,t)(n,e,t),r=yield f(hp,c.GenerateCodeChallengeFromVerifier,e,n,t)(o,n,e,t);return{verifier:o,challenge:r}})}function up(n,e,t){try{let o=new Uint8Array(lp);return q(xh,c.GetRandomValues,e,n,t)(o),De(o)}catch{throw v(ar)}}function hp(n,e,t,o){return l(this,null,function*(){e.addQueueMeasurement(c.GenerateCodeChallengeFromVerifier,o);try{let r=yield f(Td,c.Sha256Digest,t,e,o)(n,e,o);return De(new Uint8Array(r))}catch{throw v(ar)}})}var us=class n{constructor(e,t,o,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=o,this.handshakeEvent=o.startMeasurement(c.NativeMessageHandlerHandshake),this.platformAuthType=ke.PLATFORM_EXTENSION_PROVIDER}sendMessage(e){return l(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendMessage called.");let t={method:an.GetToken,request:e},o={channel:ke.CHANNEL_ID,extensionId:this.extensionId,responseId:se(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(o)}`),this.messageChannel.port1.postMessage(o);let r=yield new Promise((a,s)=>{this.resolvers.set(o.responseId,{resolve:a,reject:s})});return this.validatePlatformBrokerResponse(r)})}static createProvider(e,t,o){return l(this,null,function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{let r=new n(e,t,o,ke.PREFERRED_EXTENSION_ID);return yield r.sendHandshakeRequest(),r}catch{let i=new n(e,t,o);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return l(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:ke.CHANNEL_ID,extensionId:this.extensionId,responseId:se(),body:{method:an.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,o)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:o}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(v(Zr)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==ke.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===an.HandshakeRequest){let o=this.handshakeResolvers.get(t.responseId);if(!o){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),o.reject(v(en))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");let t=e.data,o=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===an.Response){if(!o)return;let a=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(a)}`),a.status!=="Success")o.reject(fr(a.code,a.description,a.ext));else if(a.result)a.result.code&&a.result.description?o.reject(fr(a.result.code,a.result.description,a.result.ext)):o.resolve(a.result);else throw Ar(Ft.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===an.HandshakeResponse){if(!r){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),o?o.reject(i):r&&r.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Ar(Ft.unexpectedError,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===ke.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}};var hs=class n{constructor(e,t,o){this.logger=e,this.performanceClient=t,this.correlationId=o,this.platformAuthType=ke.PLATFORM_DOM_PROVIDER}static createProvider(e,t,o){return l(this,null,function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts(ke.MICROSOFT_ENTRA_BROKERID))?.includes(ke.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new n(e,t,o)})}getExtensionId(){return ke.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return ke.DOM_API_NAME}sendMessage(e){return l(this,null,function*(){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{let t=this.initializePlatformDOMRequest(e),o=yield window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(o)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}})}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");let x=e,{accountId:t,clientId:o,authority:r,scope:i,redirectUri:a,correlationId:s,state:d,storeInCache:u,embeddedClientId:h,extraParameters:g}=x,y=ft(x,["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"]),T=this.getDOMExtraParams(y);return{accountId:t,brokerId:this.getExtensionId(),authority:r,clientId:o,correlationId:s||this.correlationId,extraParameters:C(C({},g),T),isSecurityTokenService:!1,redirectUri:a,scope:i,state:d,storeInCache:u,embeddedClientId:h}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){let t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),fr(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw Ar(Ft.unexpectedError,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){let t=Object.entries(e).reduce((r,[i,a])=>(r[i]=String(a),r),{});return C({},t)}};function Af(n,e,t,o){return l(this,null,function*(){n.trace("getPlatformAuthProvider called",t);let r=fp();n.trace("Has client allowed platform auth via DOM API: "+r);let i;try{r&&(i=yield hs.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield us.createProvider(n,o||Pd,e))}catch(a){n.trace("Platform auth not available",a)}return i})}function fp(){let n;try{return n=window[U.SessionStorage],n?.getItem(Qh)==="true"}catch{return!1}}function Ut(n,e,t,o){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(o)switch(o){case _.BEARER:case _.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var fs=class extends Se{constructor(e,t,o,r,i,a,s,d,u,h){super(e,t,o,r,i,a,s,u,h),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=d,this.eventHandler=i}acquireToken(e,t){let o;try{if(o={popupName:this.generatePopupName(e.scopes||_e,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,t);{let i=A(C({},e),{httpMethod:ds(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(i,o,t)}}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),o={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},r=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,o,r,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(t,o,r,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,o){return l(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let r=yield f(this.initializeAuthorizationRequest.bind(this),c.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,k.Popup);t.popup&&Bi(r.authority);let i=Ut(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return r.platformBroker=i,this.config.auth.protocolMode===L.EAR?this.executeEarFlow(r,t):this.executeCodeFlow(r,t,o)})}executeCodeFlow(e,t,o){return l(this,null,function*(){let r=e.correlationId,i=this.initializeServerTelemetryManager(O.acquireTokenPopup),a=o||(yield f(uo,c.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r)),s=A(C({},e),{codeChallenge:a.challenge});try{let d=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,r)({serverTelemetryManager:i,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account});if(s.httpMethod===Ne.POST)return yield this.executeCodeFlowWithPost(s,t,d,a.verifier);{let u=yield f(yn,c.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,d.authority,s,this.logger,this.performanceClient),h=this.initiateAuthRequest(u,t);this.eventHandler.emitEvent(b.POPUP_OPENED,k.Popup,{popupWindow:h},null);let g=yield this.monitorPopupForHash(h,t.popupWindowParent),y=q(hr,c.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yield f(mr,c.HandleResponseCode,this.logger,this.performanceClient,r)(e,y,a.verifier,O.acquireTokenPopup,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(d){throw t.popup?.close(),d instanceof E&&(d.setCorrelationId(this.correlationId),i.cacheFailedRequest(d)),d}})}executeEarFlow(e,t){return l(this,null,function*(){let o=e.correlationId,r=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,o)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield f(cn,c.GenerateEarKey,this.logger,this.performanceClient,o)(),a=A(C({},e),{earJwk:i}),s=t.popup||this.openPopup("about:blank",t);(yield vn(s.document,this.config,r,a,this.logger,this.performanceClient)).submit();let u=yield f(this.monitorPopupForHash.bind(this),c.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,o)(s,t.popupWindowParent),h=q(hr,c.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,this.config.auth.OIDCOptions.serverResponseType,this.logger);return f(kn,c.HandleResponseEar,this.logger,this.performanceClient,o)(a,h,O.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}executeCodeFlowWithPost(e,t,o,r){return l(this,null,function*(){let i=e.correlationId,a=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=t.popup||this.openPopup("about:blank",t);(yield bn(s.document,this.config,a,e,this.logger,this.performanceClient)).submit();let u=yield f(this.monitorPopupForHash.bind(this),c.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(s,t.popupWindowParent),h=q(hr,c.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,this.config.auth.OIDCOptions.serverResponseType,this.logger);return f(mr,c.HandleResponseCode,this.logger,this.performanceClient,i)(e,h,r,O.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logoutPopupAsync(e,t,o,r){return l(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(b.LOGOUT_START,k.Popup,e);let i=this.initializeServerTelemetryManager(O.logoutPopup);try{yield this.clearCacheOnLogout(this.correlationId,e.account);let a=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o,account:e.account||void 0});try{a.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&a.authority.protocolMode===L.OIDC){if(this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Popup,e),r){let u={apiId:O.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=R.getAbsoluteUrl(r,Ae());yield this.navigationClient.navigateInternal(h,u)}t.popup?.close();return}}let s=a.getLogoutUri(e);this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Popup,e);let d=this.openPopup(s,t);if(this.eventHandler.emitEvent(b.POPUP_OPENED,k.Popup,{popupWindow:d},null),yield this.monitorPopupForHash(d,t.popupWindowParent).catch(()=>{}),r){let u={apiId:O.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=R.getAbsoluteUrl(r,Ae());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${h}`),yield this.navigationClient.navigateInternal(h,u)}else this.logger.verbose("No main window navigation requested")}catch(a){throw t.popup?.close(),a instanceof E&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),this.eventHandler.emitEvent(b.LOGOUT_FAILURE,k.Popup,null,a),this.eventHandler.emitEvent(b.LOGOUT_END,k.Popup),a}this.eventHandler.emitEvent(b.LOGOUT_END,k.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),v(at)}monitorPopupForHash(e,t){return new Promise((o,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),r(v(qe));return}let a="";try{a=e.location.href}catch{}if(!a||a==="about:blank")return;clearInterval(i);let s="",d=this.config.auth.OIDCOptions.serverResponseType;e&&(d===Je.QUERY?s=e.location.search:s=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),o(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let o;if(t.popup?(o=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),o.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),o=this.openSizedPopup(e,t)),!o)throw v(Ur);return o.focus&&o.focus(),this.currentWindow=o,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),o}catch(o){throw this.logger.error("error opening popup "+o.message),v(Lr)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:o,popupWindowParent:r}){let i=r.screenLeft?r.screenLeft:r.screenX,a=r.screenTop?r.screenTop:r.screenY,s=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=o.popupSize?.width,h=o.popupSize?.height,g=o.popupPosition?.top,y=o.popupPosition?.left;return(!u||u<0||u>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=V.POPUP_WIDTH),(!h||h<0||h>d)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),h=V.POPUP_HEIGHT),(!g||g<0||g>d)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,d/2-V.POPUP_HEIGHT/2+a)),(!y||y<0||y>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),y=Math.max(0,s/2-V.POPUP_WIDTH/2+i)),r.open(e,t,`width=${u}, height=${h}, top=${g}, left=${y}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${V.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${V.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function mp(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var ms=class extends Se{constructor(e,t,o,r,i,a,s,d,u,h){super(e,t,o,r,i,a,s,u,h),this.nativeStorage=d}acquireToken(e){return l(this,null,function*(){let t=yield f(this.initializeAuthorizationRequest.bind(this),c.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,k.Redirect);t.platformBroker=Ut(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);let o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(b.RESTORE_FROM_BFCACHE,k.Redirect))},r=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${r}`),this.browserStorage.setTemporaryCache($.ORIGIN_URI,r,!0),window.addEventListener("pageshow",o);try{this.config.auth.protocolMode===L.EAR?yield this.executeEarFlow(t):yield this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof E&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",o),i}})}executeCodeFlow(e,t){return l(this,null,function*(){let o=e.correlationId,r=this.initializeServerTelemetryManager(O.acquireTokenRedirect),i=yield f(uo,c.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),a=A(C({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(a,i.verifier);try{if(a.httpMethod===Ne.POST)return yield this.executeCodeFlowWithPost(a);{let s=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),d=yield f(yn,c.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,s.authority,a,this.logger,this.performanceClient);return yield this.initiateAuthRequest(d,t)}}catch(s){throw s instanceof E&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}})}executeEarFlow(e){return l(this,null,function*(){let t=e.correlationId,o=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=yield f(cn,c.GenerateEarKey,this.logger,this.performanceClient,t)(),i=A(C({},e),{earJwk:r});return this.browserStorage.cacheAuthorizeRequest(i),(yield vn(document,this.config,o,i,this.logger,this.performanceClient)).submit(),new Promise((s,d)=>{setTimeout(()=>{d(v(dr,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}executeCodeFlowWithPost(e){return l(this,null,function*(){let t=e.correlationId,o=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(yield bn(document,this.config,o,e,this.logger,this.performanceClient)).submit(),new Promise((i,a)=>{setTimeout(()=>{a(v(dr,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}handleRedirectPromise(e="",t,o,r){return l(this,null,function*(){let i=this.initializeServerTelemetryManager(O.handleRedirectPromise);try{let[a,s]=this.getRedirectResponse(e||"");if(!a)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),mp()!=="back_forward"?r.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let d=this.browserStorage.getTemporaryCache($.ORIGIN_URI,!0)||m.EMPTY_STRING,u=ot.normalizeUrlForComparison(d),h=ot.normalizeUrlForComparison(window.location.href);if(u===h&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),d.indexOf("#")>-1&&Sd(d),yield this.handleResponse(a,t,o,i);if(this.config.auth.navigateToLoginRequestUrl){if(!Mi()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache($.URL_HASH,s,!0);let g={apiId:O.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},y=!0;if(!d||d==="null"){let T=Rd();this.browserStorage.setTemporaryCache($.ORIGIN_URI,T,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),y=yield this.navigationClient.navigateInternal(T,g)}else this.logger.verbose(`Navigating to loginRequestUrl: ${d}`),y=yield this.navigationClient.navigateInternal(d,g);if(!y)return yield this.handleResponse(a,t,o,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(a,t,o,i);return null}catch(a){throw a instanceof E&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===Je.QUERY?t=window.location.search:t=window.location.hash);let o=ot.getDeserializedResponse(t);if(o){try{uf(o,this.browserCrypto,k.Redirect)}catch(i){return i instanceof E&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return Oi(window),this.logger.verbose("Hash contains known properties, returning response hash"),[o,t]}let r=this.browserStorage.getTemporaryCache($.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey($.URL_HASH)),r&&(o=ot.getDeserializedResponse(r),o)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[o,r]):[null,""]}handleResponse(e,t,o,r){return l(this,null,function*(){if(!e.state)throw v(oo);if(e.ear_jwe){let s=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return f(kn,c.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,O.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}let a=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority});return f(mr,c.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,o,O.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}initiateAuthRequest(e,t){return l(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let o={apiId:O.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=t||this.config.auth.onRedirectNavigate;if(typeof r=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),r(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield this.navigationClient.navigateExternal(e,o);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield this.navigationClient.navigateExternal(e,o);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),v(at)})}logout(e){return l(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),o=this.initializeServerTelemetryManager(O.logout);try{this.eventHandler.emitEvent(b.LOGOUT_START,k.Redirect,e),yield this.clearCacheOnLogout(this.correlationId,t.account);let r={apiId:O.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===L.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Redirect,t);return}}let a=i.getLogoutUri(t);if(this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(a)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,We.SIGNOUT),yield this.navigationClient.navigateExternal(a,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,We.SIGNOUT),yield this.navigationClient.navigateExternal(a,r);return}}catch(r){throw r instanceof E&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),this.eventHandler.emitEvent(b.LOGOUT_FAILURE,k.Redirect,null,r),this.eventHandler.emitEvent(b.LOGOUT_END,k.Redirect),r}this.eventHandler.emitEvent(b.LOGOUT_END,k.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return R.getAbsoluteUrl(t,Ae())}};function Tf(n,e,t,o,r){return l(this,null,function*(){if(e.addQueueMeasurement(c.SilentHandlerInitiateAuthRequest,o),!n)throw t.info("Navigate url is empty"),v(at);return r?f(pp,c.SilentHandlerLoadFrame,t,e,o)(n,r,e,o):q(gp,c.SilentHandlerLoadFrameSync,t,e,o)(n)})}function Ef(n,e,t,o,r){return l(this,null,function*(){let i=ps();if(!i.contentDocument)throw"No document associated with iframe!";return(yield bn(i.contentDocument,n,e,t,o,r)).submit(),i})}function wf(n,e,t,o,r){return l(this,null,function*(){let i=ps();if(!i.contentDocument)throw"No document associated with iframe!";return(yield vn(i.contentDocument,n,e,t,o,r)).submit(),i})}function Bd(n,e,t,o,r,i,a){return l(this,null,function*(){return o.addQueueMeasurement(c.SilentHandlerMonitorIframeForHash,i),new Promise((s,d)=>{e<Za&&r.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Za}ms). This may result in timeouts.`);let u=window.setTimeout(()=>{window.clearInterval(h),d(v(Hr))},e),h=window.setInterval(()=>{let g="",y=n.contentWindow;try{g=y?y.location.href:""}catch{}if(!g||g==="about:blank")return;let T="";y&&(a===Je.QUERY?T=y.location.search:T=y.location.hash),window.clearTimeout(u),window.clearInterval(h),s(T)},t)}).finally(()=>{q(Cp,c.RemoveHiddenIframe,r,o,i)(n)})})}function pp(n,e,t,o){return t.addQueueMeasurement(c.SilentHandlerLoadFrame,o),new Promise((r,i)=>{let a=ps();window.setTimeout(()=>{if(!a){i("Unable to load iframe");return}a.src=n,r(a)},e)})}function gp(n){let e=ps();return e.src=n,e}function ps(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("allow","local-network-access *"),document.body.appendChild(n),n}function Cp(n){document.body===n.parentNode&&document.body.removeChild(n)}var gs=class extends Se{constructor(e,t,o,r,i,a,s,d,u,h,g){super(e,t,o,r,i,a,d,h,g),this.apiId=s,this.nativeStorage=u}acquireToken(e){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=C({},e);t.prompt?t.prompt!==z.NONE&&t.prompt!==z.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${z.NONE}`),t.prompt=z.NONE):t.prompt=z.NONE;let o=yield f(this.initializeAuthorizationRequest.bind(this),c.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,k.Silent);return o.platformBroker=Ut(this.config,this.logger,this.platformAuthProvider,o.authenticationScheme),Bi(o.authority),this.config.auth.protocolMode===L.EAR?this.executeEarFlow(o):this.executeCodeFlow(o)})}executeCodeFlow(e){return l(this,null,function*(){let t,o=this.initializeServerTelemetryManager(this.apiId);try{return t=yield f(this.createAuthCodeClient.bind(this),c.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield f(this.silentTokenHelper.bind(this),c.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(r){if(r instanceof E&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),!t||!(r instanceof E)||r.errorCode!==V.INVALID_GRANT_ERROR)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),yield f(this.silentTokenHelper.bind(this),c.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}})}executeEarFlow(e){return l(this,null,function*(){let t=e.correlationId,o=yield f(this.getDiscoveredAuthority.bind(this),c.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=yield f(cn,c.GenerateEarKey,this.logger,this.performanceClient,t)(),i=A(C({},e),{earJwk:r}),a=yield f(wf,c.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,o,i,this.logger,this.performanceClient),s=this.config.auth.OIDCOptions.serverResponseType,d=yield f(Bd,c.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,s),u=q(hr,c.DeserializeResponse,this.logger,this.performanceClient,t)(d,s,this.logger);return f(kn,c.HandleResponseEar,this.logger,this.performanceClient,t)(i,u,this.apiId,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logout(){return Promise.reject(v(st))}silentTokenHelper(e,t){return l(this,null,function*(){let o=t.correlationId;this.performanceClient.addQueueMeasurement(c.SilentIframeClientTokenHelper,o);let r=yield f(uo,c.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),i=A(C({},t),{codeChallenge:r.challenge}),a;if(t.httpMethod===Ne.POST)a=yield f(Ef,c.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,o)(this.config,e.authority,i,this.logger,this.performanceClient);else{let h=yield f(yn,c.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,e.authority,i,this.logger,this.performanceClient);a=yield f(Tf,c.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,o)(h,this.performanceClient,this.logger,o,this.config.system.navigateFrameWait)}let s=this.config.auth.OIDCOptions.serverResponseType,d=yield f(Bd,c.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,o)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,o,s),u=q(hr,c.DeserializeResponse,this.logger,this.performanceClient,o)(d,s,this.logger);return f(mr,c.HandleResponseCode,this.logger,this.performanceClient,o)(t,u,r.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}};var Cs=class extends Se{acquireToken(e){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.SilentRefreshClientAcquireToken,e.correlationId);let t=yield f(Li,c.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),o=C(C({},e),t);e.redirectUri&&(o.redirectUri=this.getRedirectUri(e.redirectUri));let r=this.initializeServerTelemetryManager(O.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return f(i.acquireTokenByRefreshToken.bind(i),c.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a),a})})}logout(){return Promise.reject(v(st))}createRefreshTokenClient(e){return l(this,null,function*(){let t=yield f(this.getClientConfiguration.bind(this),c.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Ii(t,this.performanceClient)})}};var ys=class{constructor(e,t,o,r){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=o,this.cryptoObj=r}loadExternalTokens(e,t,o){return l(this,null,function*(){if(!this.isBrowserEnvironment)throw v(ct);let r=e.correlationId||se(),i=t.id_token?ee.extractTokenClaims(t.id_token,re):void 0,a=ee.isKmsi(i||{}),s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},d=e.authority?new Be(Be.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||se()):void 0,u=yield this.loadAccount(e,o.clientInfo||t.client_info||"",r,i,d),h=yield this.loadIdToken(t,u.homeAccountId,u.environment,u.realm,r,a),g=yield this.loadAccessToken(e,t,u.homeAccountId,u.environment,u.realm,o,r,a),y=yield this.loadRefreshToken(t,u.homeAccountId,u.environment,r,a);return this.generateAuthenticationResult(e,{account:u,idToken:h,accessToken:g,refreshToken:y},i,d)})}loadAccount(e,t,o,r,i){return l(this,null,function*(){if(this.logger.verbose("TokenCache - loading account"),e.account){let u=B.createFromAccountInfo(e.account);return yield this.storage.setAccount(u,o,ee.isKmsi(r||{})),u}else if(!i||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),v(jr);let a=B.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,r),s=r?.tid,d=xr(this.storage,i,a,re,o,r,t,i.hostnameAndPort,s,void 0,void 0,this.logger);return yield this.storage.setAccount(d,o,ee.isKmsi(r||{})),d})}loadIdToken(e,t,o,r,i,a){return l(this,null,function*(){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let s=W.createIdTokenEntity(t,o,e.id_token,this.config.auth.clientId,r);return yield this.storage.setIdTokenCredential(s,i,a),s})}loadAccessToken(e,t,o,r,i,a,s,d){return l(this,null,function*(){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let u=t.scope?G.fromString(t.scope):new G(e.scopes),h=a.expiresOn||t.expires_in+oe.nowSeconds(),g=a.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+oe.nowSeconds(),y=W.createAccessTokenEntity(o,r,t.access_token,this.config.auth.clientId,i,u.printScopes(),h,g,re);return yield this.storage.setAccessTokenCredential(y,s,d),y})}loadRefreshToken(e,t,o,r,i){return l(this,null,function*(){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let a=W.createRefreshTokenEntity(t,o,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield this.storage.setRefreshTokenCredential(a,r,i),a})}generateAuthenticationResult(e,t,o,r){let i="",a=[],s=null,d;t?.accessToken&&(i=t.accessToken.secret,a=G.fromString(t.accessToken.target).asArray(),s=oe.toDateFromSeconds(t.accessToken.expiresOn),d=oe.toDateFromSeconds(t.accessToken.extendedExpiresOn));let u=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:a,account:B.getAccountInfo(u),idToken:t.idToken?.secret||"",idTokenClaims:o||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:d,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}};var vs=class extends nr{constructor(e){super(e),this.includeRedirectUri=!1}};var bs=class extends Se{constructor(e,t,o,r,i,a,s,d,u,h){super(e,t,o,r,i,a,d,u,h),this.apiId=s}acquireToken(e){return l(this,null,function*(){if(!e.code)throw v(Yr);let t=yield f(this.initializeAuthorizationRequest.bind(this),c.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,k.Silent),o=this.initializeServerTelemetryManager(this.apiId);try{let r=A(C({},t),{code:e.code}),i=yield f(this.getClientConfiguration.bind(this),c.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new vs(i);this.logger.verbose("Auth code client created");let s=new gn(a,this.browserStorage,r,this.logger,this.performanceClient);return yield f(s.handleCodeResponseFromServer.bind(s),c.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof E&&(r.setCorrelationId(this.correlationId),o.cacheFailedRequest(r)),r}})}logout(){return Promise.reject(v(st))}};function If(n,e,t){let o=window.msal?.clientIds||[],r=o.length,i=o.filter(a=>a===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:r,sameClientIdInstanceCount:i})}function ks(n,e,t){try{Ni(n)}catch(o){throw e.end({success:!1},o,t),o}}var An=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new un(this.logger,this.performanceClient):Vt,this.eventHandler=new cs(this.logger),this.browserStorage=this.isBrowserEnvironment?new mn(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,ad(this.config.auth)):ef(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:U.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:U.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new mn(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new ys(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return l(this,null,function*(){let o=new n(e);return yield o.initialize(t),o})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){return l(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(b.INITIALIZE_END);return}let o=e?.correlationId||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(c.InitializeClientApplication,o);if(this.eventHandler.emitEvent(b.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(yield f(this.browserStorage.initialize.bind(this.browserStorage),c.InitializeCache,this.logger,this.performanceClient,o)(o),r)try{this.platformAuthProvider=yield Af(this.logger,this.performanceClient,o,this.config.system.nativeBrokerHandshakeTimeout)}catch(a){this.logger.verbose(a)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),q(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),c.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,o)(o)),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(o)),this.initialized=!0,this.eventHandler.emitEvent(b.INITIALIZE_END),i.end({allowPlatformBroker:r,success:!0})})}handleRedirectPromise(e){return l(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Ya(this.initialized),this.isBrowserEnvironment){let t=e||"",o=this.redirectResponse.get(t);return typeof o>"u"?(o=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,o),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return l(this,null,function*(){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===We.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let o=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),i=r&&this.platformAuthProvider&&!e,a;this.eventHandler.emitEvent(b.HANDLE_REDIRECT_START,k.Redirect);let s;try{if(i&&this.platformAuthProvider){a=this.performanceClient.startMeasurement(c.AcquireTokenRedirect,r?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),a.add({isPlatformBrokerRequest:!0});let d=new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,O.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);s=f(d.handleRedirectPromise.bind(d),c.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,a.event.correlationId)(this.performanceClient,a.event.correlationId)}else{let[d,u]=this.browserStorage.getCachedRequest(),h=d.correlationId;a=this.performanceClient.startMeasurement(c.AcquireTokenRedirect,h),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let g=this.createRedirectClient(h);s=f(g.handleRedirectPromise.bind(g),c.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,a.event.correlationId)(e,d,u,a)}}catch(d){throw this.browserStorage.resetRequestCache(),d}return s.then(d=>(d?(this.browserStorage.resetRequestCache(),o.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(b.LOGIN_SUCCESS,k.Redirect,d),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Redirect,d),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0},void 0,d.account)):a.event.errorCode?a.end({success:!1},void 0):a.discard(),this.eventHandler.emitEvent(b.HANDLE_REDIRECT_END,k.Redirect),d)).catch(d=>{this.browserStorage.resetRequestCache();let u=d;throw o.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Redirect,null,u):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Redirect,null,u),this.eventHandler.emitEvent(b.HANDLE_REDIRECT_END,k.Redirect),a.end({success:!1},u),d})})}acquireTokenRedirect(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let o=this.performanceClient.startMeasurement(c.AcquireTokenPreRedirect,t);o.add({scenarioId:e.scenarioId});let r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=a=>{let s=typeof r=="function"?r(a):void 0;return o.add({navigateCallbackResult:s!==!1}),o.event=o.end({success:!0},void 0,e.account)||o.event,s};else{let a=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=s=>{let d=typeof a=="function"?a(s):void 0;return o.add({navigateCallbackResult:d!==!1}),o.event=o.end({success:!0},void 0,e.account)||o.event,d}}let i=this.getAllAccounts().length>0;try{Qa(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,We.SIGNIN),i?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Redirect,e):this.eventHandler.emitEvent(b.LOGIN_START,k.Redirect,e);let a;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?a=new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,O.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,o).catch(d=>{if(o.add({brokerErrorName:d.name,brokerErrorCode:d.errorCode}),d instanceof Le&&co(d))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(d instanceof ce)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw d}):a=this.createRedirectClient(t).acquireToken(e),yield a}catch(a){throw this.browserStorage.resetRequestCache(),o.event.status===2?this.performanceClient.startMeasurement(c.AcquireTokenRedirect,t).end({success:!1},a,e.account):o.end({success:!1},a,e.account),i?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Redirect,null,a):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Redirect,null,a),a}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(c.AcquireTokenPopup,t);o.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),ks(this.initialized,o,e.account),this.browserStorage.setInteractionInProgress(!0,We.SIGNIN)}catch(s){return Promise.reject(s)}let r=this.getAllAccounts();r.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Popup,e):this.eventHandler.emitEvent(b.LOGIN_START,k.Popup,e);let i,a=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(o.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(A(C({},e),{correlationId:t}),O.acquireTokenPopup).then(s=>(o.end({success:!0},void 0,s.account),s)).catch(s=>{if(o.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s instanceof Le&&co(s))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,a);if(s instanceof ce)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,a);throw s})):i=this.createPopupClient(t).acquireToken(e,a),i.then(s=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(b.LOGIN_SUCCESS,k.Popup,s):this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Popup,s),o.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),s)).catch(s=>(r.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Popup,null,s):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Popup,null,s),o.end({success:!1},s,e.account),Promise.reject(s))).finally(()=>l(this,null,function*(){this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(t))}))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e),o=A(C({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(c.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),ks(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(b.SSO_SILENT_START,k.Silent,o);let r;return this.canUsePlatformBroker(o)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),r=this.acquireTokenNative(o,O.ssoSilent).catch(i=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof Le&&co(i))return this.platformAuthProvider=void 0,this.createSilentIframeClient(o.correlationId).acquireToken(o);throw i})):r=this.createSilentIframeClient(o.correlationId).acquireToken(o),r.then(i=>(this.eventHandler.emitEvent(b.SSO_SILENT_SUCCESS,k.Silent,i),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),i)).catch(i=>{throw this.eventHandler.emitEvent(b.SSO_SILENT_FAILURE,k.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i,e.account),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let o=this.performanceClient.startMeasurement(c.AcquireTokenByCode,t);ks(this.initialized,o),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_START,k.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw v(Jr);if(e.code){let r=e.code,i=this.hybridAuthCodeResponses.get(r);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),o.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(A(C({},e),{correlationId:t})).then(a=>(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_SUCCESS,k.Silent,a),this.hybridAuthCodeResponses.delete(r),o.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_FAILURE,k.Silent,null,a),o.end({success:!1},a),a}),this.hybridAuthCodeResponses.set(r,i)),yield i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){o.add({isPlatformBrokerRequest:!0});let r=yield this.acquireTokenNative(A(C({},e),{correlationId:t}),O.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof Le&&co(i)&&(this.platformAuthProvider=void 0),o.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i});return o.end({success:!0},void 0,r.account),r}else throw v(Xr);else throw v(Qr)}catch(r){throw this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_FAILURE,k.Silent,null,r),o.end({success:!1},r),r}})}acquireTokenByCodeAsync(e){return l(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(c.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(r=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:r.fromCache}),r)).catch(r=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},r),r}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return l(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(c.AcquireTokenFromCache,e.correlationId),t){case de.Default:case de.AccessToken:case de.AccessTokenAndRefreshToken:let o=this.createSilentCacheClient(e.correlationId);return f(o.acquireToken.bind(o),c.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw p(ae.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return l(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(c.AcquireTokenByRefreshToken,e.correlationId),t){case de.Default:case de.AccessTokenAndRefreshToken:case de.RefreshToken:case de.RefreshTokenAndNetwork:let o=this.createSilentRefreshClient(e.correlationId);return f(o.acquireToken.bind(o),c.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw p(ae.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return l(this,null,function*(){this.performanceClient.addQueueMeasurement(c.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return f(t.acquireToken.bind(t),c.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(C({correlationId:t},e))})}logoutRedirect(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e);return Qa(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,We.SIGNOUT),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return Ni(this.initialized),this.browserStorage.setInteractionInProgress(!0,We.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){return l(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){let t=this.getRequestCorrelationId();return tf(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return of(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return rf(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return nf(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return af(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();sf(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return cf(this.browserStorage,e)}hydrateCache(e,t){return l(this,null,function*(){this.logger.verbose("hydrateCache called");let o=B.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield this.browserStorage.setAccount(o,e.correlationId,ee.isKmsi(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,o,r){return l(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw v(io);return new lo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,o||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)})}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Ut(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case z.NONE:case z.CONSENT:case z.LOGIN:case z.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new fs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new ms(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new gs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,O.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Cn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new Cs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new bs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,O.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return ja(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==U.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==U.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?se():m.EMPTY_STRING}loginRedirect(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(C({correlationId:t},e||pd))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(C({correlationId:t},e||pd))}acquireTokenSilent(e){return l(this,null,function*(){let t=this.getRequestCorrelationId(e),o=this.performanceClient.startMeasurement(c.AcquireTokenSilent,t);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),ks(this.initialized,o,e.account),this.logger.verbose("acquireTokenSilent called",t);let r=e.account||this.getActiveAccount();if(!r)throw v(Gr);return this.acquireTokenSilentDeduped(e,r,t).then(i=>(o.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),A(C({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof E&&i.setCorrelationId(t),o.end({success:!1},i,r),i})})}acquireTokenSilentDeduped(e,t,o){return l(this,null,function*(){let r=Pt(this.config.auth.clientId,A(C({},e),{authority:e.authority||this.config.auth.authority,correlationId:o}),t.homeAccountId),i=JSON.stringify(r),a=this.activeSilentTokenRequests.get(i);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",o),this.performanceClient.addFields({deduped:!1},o);let s=f(this.acquireTokenSilentAsync.bind(this),c.AcquireTokenSilentAsync,this.logger,this.performanceClient,o)(A(C({},e),{correlationId:o}),t);return this.activeSilentTokenRequests.set(i,s),s.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",o),this.performanceClient.addFields({deduped:!0},o),a})}acquireTokenSilentAsync(e,t){return l(this,null,function*(){let o=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(c.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);let r=yield f(df,c.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||de.Default;return this.acquireTokenSilentNoIframe(r,i).catch(s=>l(this,null,function*(){if(yp(s,i))if(this.activeIframeRequest)if(i!==de.Skip){let[u,h]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,r.correlationId);let g=this.performanceClient.startMeasurement(c.AwaitConcurrentIframe,r.correlationId);g.add({awaitIframeCorrelationId:h});let y=yield u;if(g.end({success:y}),y)return this.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,r.correlationId),this.acquireTokenSilentNoIframe(r,i);throw this.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),s}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),f(this.acquireTokenBySilentIframe.bind(this),c.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r);else{let u;return this.activeIframeRequest=[new Promise(h=>{u=h}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),f(this.acquireTokenBySilentIframe.bind(this),c.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r).then(h=>(u(!0),h)).catch(h=>{throw u(!1),h}).finally(()=>{this.activeIframeRequest=void 0})}else throw s})).then(s=>(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Silent,s),this.performanceClient.addFields({fromCache:s.fromCache},e.correlationId),s)).catch(s=>{throw this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Silent,null,s),s}).finally(()=>{document.removeEventListener("visibilitychange",o)})})}acquireTokenSilentNoIframe(e,t){return l(this,null,function*(){return Ut(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,O.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(o=>l(this,null,function*(){throw this.performanceClient.addFields({brokerErrorName:o.name,brokerErrorCode:o.errorCode},e.correlationId),o instanceof Le&&co(o)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,p(ae.tokenRefreshRequired)):o}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===de.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),f(this.acquireTokenFromCache.bind(this),c.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(o=>{if(t===de.AccessToken)throw o;return this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_NETWORK_START,k.Silent,e),f(this.acquireTokenByRefreshToken.bind(this),c.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}preGeneratePkceCodes(e){return l(this,null,function*(){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=yield f(uo,c.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()})}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?C({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),If(t,e,this.logger)}};function yp(n,e){let t=!(n instanceof ce&&n.subError!==nt.badToken),o=n.errorCode===V.INVALID_GRANT_ERROR||n.errorCode===ae.tokenRefreshRequired,r=t&&o||n.errorCode===nt.noTokensFound||n.errorCode===nt.refreshTokenExpired,i=Eh.includes(e);return r&&i}function Sf(n,e){return l(this,null,function*(){let t=new os(n);return yield t.initialize(),An.createController(t,e)})}var Ui=class n{static createPublicClientApplication(e){return l(this,null,function*(){let t=yield Sf(e);return new n(e,t)})}constructor(e,t){this.isBroker=!1,this.controller=t||new An(new os(e))}initialize(e){return l(this,null,function*(){return this.controller.initialize(e,this.isBroker)})}acquireTokenPopup(e){return l(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return l(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var Hi=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case b.LOGIN_START:return j.Login;case b.SSO_SILENT_START:return j.SsoSilent;case b.ACQUIRE_TOKEN_START:if(e.interactionType===k.Redirect||e.interactionType===k.Popup)return j.AcquireToken;break;case b.HANDLE_REDIRECT_START:return j.HandleRedirect;case b.LOGOUT_START:return j.Logout;case b.SSO_SILENT_SUCCESS:case b.SSO_SILENT_FAILURE:if(t&&t!==j.SsoSilent)break;return j.None;case b.LOGOUT_END:if(t&&t!==j.Logout)break;return j.None;case b.HANDLE_REDIRECT_END:if(t&&t!==j.HandleRedirect)break;return j.None;case b.LOGIN_SUCCESS:case b.LOGIN_FAILURE:case b.ACQUIRE_TOKEN_SUCCESS:case b.ACQUIRE_TOKEN_FAILURE:case b.RESTORE_FROM_BFCACHE:if(e.interactionType===k.Redirect||e.interactionType===k.Popup){if(t&&t!==j.Login&&t!==j.AcquireToken)break;return j.None}break}return null}};var As="@azure/msal-angular",Fi="4.0.21",Ts=new go("MSAL_INSTANCE"),Dd=new go("MSAL_GUARD_CONFIG"),Ld=new go("MSAL_INTERCEPTOR_CONFIG"),vp=new go("MSAL_BROADCAST_CONFIG"),Ki=(()=>{class n{constructor(t,o){this.msalInstance=t,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(As,Fi).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Fd(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new mo,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Hd(j.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(r=>{this._msalSubject.next(r);let i=Hi.getInteractionStatusFromEvent(r,this._inProgress.value);i!==null&&(this.msalInstance.getLogger().clone(As,Fi).verbose(`BroadcastService - ${r.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){this._inProgress.value===j.Startup&&this._inProgress.next(j.None)}}return n.\u0275fac=function(t){return new(t||n)(he(Ts),he(vp,8))},n.\u0275prov=mt({token:n,factory:n.\u0275fac}),n})(),Es=(()=>{class n{constructor(t,o,r){this.instance=t,this.location=o,this.injector=r;let i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary(Cd.Angular,Fi)}initialize(){return Me(this.instance.initialize())}acquireTokenPopup(t){return Me(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return Me(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return Me(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return Me(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(Ki).resetInProgressEvent()}))}loginPopup(t){return Me(this.instance.loginPopup(t))}loginRedirect(t){return Me(this.instance.loginRedirect(t))}logout(t){return Me(this.instance.logout(t))}logoutRedirect(t){return Me(this.instance.logoutRedirect(t))}logoutPopup(t){return Me(this.instance.logoutPopup(t))}ssoSilent(t){return Me(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(As,Fi)),this.logger}setLogger(t){this.logger=t.clone(As,Fi),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(he(Ts),he(ji),he(qd))},n.\u0275prov=mt({token:n,factory:n.\u0275fac}),n})(),ws=(()=>{class n{constructor(t,o,r,i,a){this.msalGuardConfig=t,this.msalBroadcastService=o,this.authService=r,this.location=i,this.router=a,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let o=document.getElementsByTagName("base"),r=this.location.normalize(o.length?o[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${r}/${i}`):`${r}${t}`}loginInteractively(t){let o=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):C({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===k.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(o).pipe(Ps(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let r=this.getDestinationUrl(t.url);return this.authService.loginRedirect(C({redirectStartPage:r},o)).pipe(Ps(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==k.Popup&&this.msalGuardConfig.interactionType!==k.Redirect)throw new ur("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(R.hashContainsKnownProperties(window.location.hash)&&Ja.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),Ve(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),Ve(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let o=this.location.path(!0);return this.authService.initialize().pipe(Os(()=>this.authService.handleRedirectObservable()),Os(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),Ve(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let r=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),a=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(r&&(i||a))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),o.indexOf("#")>-1?Ve(this.parseUrl(this.location.path())):Ve(this.parseUrl(""))}return Ve(!0)}),xs(r=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${r.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),Ve(this.loginFailedRoute)):Ve(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,o){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(o)}canActivateChild(t,o){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(o)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(he(Dd),he(Ki),he(Es),he(ji),he(Cr))},n.\u0275prov=mt({token:n,factory:n.\u0275fac}),n})(),Ud=(()=>{class n{constructor(t,o,r,i,a){this.msalInterceptorConfig=t,this.authService=o,this.location=r,this.msalBroadcastService=i,this._document=a}intercept(t,o){if(this.msalInterceptorConfig.interactionType!==k.Popup&&this.msalInterceptorConfig.interactionType!==k.Redirect)throw new ur("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");let r=this.getScopesForEndpoint(t.url,t.method);if(!r||r.length===0)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),o.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);let a=typeof this.msalInterceptorConfig.authRequest=="function"?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):A(C({},this.msalInterceptorConfig.authRequest),{account:i});return this.authService.getLogger().info(`Interceptor - ${r.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${r}] scopes found for ${t.url}`),this.acquireToken(a,r,i).pipe(pr(s=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");let d=t.headers.set("Authorization",`Bearer ${s.accessToken}`),u=t.clone({headers:d});return o.handle(u)}))}acquireToken(t,o,r){return this.authService.acquireTokenSilent(A(C({},t),{scopes:o,account:r})).pipe(xs(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(zi(1),pr(i=>i===j.None?this.acquireTokenInteractively(t,o):this.msalBroadcastService.inProgress$.pipe(po(a=>a===j.None),zi(1),pr(()=>this.acquireToken(t,o,r))))))),pr(i=>i.accessToken?Ve(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(po(a=>a===j.None),zi(1),pr(()=>this.acquireTokenInteractively(t,o))))))}acquireTokenInteractively(t,o){if(this.msalInterceptorConfig.interactionType===k.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup(A(C({},t),{scopes:o}));this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");let r=window.location.href;return this.authService.acquireTokenRedirect(A(C({},t),{scopes:o,redirectStartPage:r})),Kd}getScopesForEndpoint(t,o){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");let r=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),a=this.matchResourcesToEndpoint(i,r);return a.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,a,o):null}matchResourcesToEndpoint(t,o){let r=[];return t.forEach(i=>{let a=this.location.normalize(i),s=this.getAbsoluteUrl(a),d=new URL(s),u=this.getAbsoluteUrl(o),h=new URL(u);this.checkUrlComponents(d,h)&&r.push(i)}),r}checkUrlComponents(t,o){let r=["protocol","host","pathname","search","hash"];for(let i of r)if(t[i]){let a=decodeURIComponent(t[i]);if(!D.matchPattern(a,o[i]))return!1}return!0}getAbsoluteUrl(t){let o=this._document.createElement("a");return o.href=t,o.href}matchScopesToEndpoint(t,o,r){let i=[];return o.forEach(a=>{let s=[],d=t.get(a);if(d===null){i.push(null);return}d.forEach(u=>{if(typeof u=="string")s.push(u);else{let h=r.toLowerCase();u.httpMethod.toLowerCase()===h&&(u.scopes===null?i.push(null):u.scopes.forEach(y=>{s.push(y)}))}}),s.length>0&&i.push(s)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return n.\u0275fac=function(t){return new(t||n)(he(Ld),he(Es),he(ji),he(Ki),he($i))},n.\u0275prov=mt({token:n,factory:n.\u0275fac}),n})();var Rf=[{path:"",component:ia,canActivate:[ws],children:[{path:"",redirectTo:"pages/specialty-app-dashboard",pathMatch:"full"},{path:"pages",loadChildren:()=>import("./chunk-Y63A54XW.js")}]}];var Is={production:!0,clientId:"483a2857-ef87-4f5f-b9b5-8cdf2c031586",tenantId:"a25fff9c-3f63-4fb2-9a8a-d9bdd0321f9a",redirectUri:"https://fengyanglin09.github.io/work-dashboard-app/"};function _f(){return new Ui({auth:{clientId:Is.clientId,authority:`https://login.microsoftonline.com/${Is.tenantId}`,redirectUri:Is.redirectUri},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}})}function Pf(){return{interactionType:k.Redirect,authRequest:{scopes:["User.Read"]}}}function xf(){return{interactionType:k.Redirect,protectedResourceMap:new Map([["https://graph.microsoft.com/v1.0/me",["User.Read"]]])}}var Of={providers:[Es,ws,Ki,{provide:Ts,useFactory:_f},{provide:Dd,useFactory:Pf},{provide:Ld,useFactory:xf},tl(ol()),{provide:Ud,useClass:Ud,multi:!0},dl(Rf,ll({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"}),ul()),pl(),hl({theme:{preset:Ju,options:{darkModeSelector:".app-dark"}}})]};var Ss=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pe({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){t&1&&H(0,"router-outlet")},dependencies:[je,Zi],encapsulation:2})};nl(Ss,Of).catch(n=>console.error(n));
